"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[398],{4951:function(e,t,n){n.d(t,{J:function(){return i},V:function(){return u}});var s=n(7625),o=n(1076),a=n(1857),r=n(4677);(0,r.pm)();async function i(e){return await o.Z.post(`employees/inspection/${e}`).then((({data:e})=>e))}async function u(e=s.Z.state.inspection){return await o.Z.post("employees/inspection/save",e).then((({data:e})=>e)).catch(a.i)}},7557:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(3396);const o={class:"number-buttons",ref:"numbers"},a=(0,s._)("i",{class:"ri-close-fill"},null,-1),r=[a],i=(0,s._)("i",{class:"ri-delete-back-line"},null,-1),u=[i];function m(e,t,n,a,i,m){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("button",{class:"number-buttons__item",onClick:t[0]||(t[0]=e=>m.pushIntoNumber("1"))},"1"),(0,s._)("button",{class:"number-buttons__item",onClick:t[1]||(t[1]=e=>m.pushIntoNumber("2"))},"2"),(0,s._)("button",{class:"number-buttons__item",onClick:t[2]||(t[2]=e=>m.pushIntoNumber("3"))},"3"),(0,s._)("button",{class:"number-buttons__item",onClick:t[3]||(t[3]=e=>m.pushIntoNumber("4"))},"4"),(0,s._)("button",{class:"number-buttons__item",onClick:t[4]||(t[4]=e=>m.pushIntoNumber("5"))},"5"),(0,s._)("button",{class:"number-buttons__item",onClick:t[5]||(t[5]=e=>m.pushIntoNumber("6"))},"6"),(0,s._)("button",{class:"number-buttons__item",onClick:t[6]||(t[6]=e=>m.pushIntoNumber("7"))},"7"),(0,s._)("button",{class:"number-buttons__item",onClick:t[7]||(t[7]=e=>m.pushIntoNumber("8"))},"8"),(0,s._)("button",{class:"number-buttons__item",onClick:t[8]||(t[8]=e=>m.pushIntoNumber("9"))},"9"),(0,s._)("button",{class:"number-buttons__item",onClick:t[9]||(t[9]=e=>m.clearPassword())},r),(0,s._)("button",{class:"number-buttons__item",onClick:t[10]||(t[10]=e=>m.pushIntoNumber("0"))},"0"),(0,s._)("button",{class:"number-buttons__item",onClick:t[11]||(t[11]=e=>m.popIntoNumber())},u)],512)}var l={name:"InputNumber",methods:{pushIntoNumber(e){this.$emit("pushIntoNumber",e)},popIntoNumber(){this.$emit("popIntoNumber")},clearPassword(){this.$emit("clearNumber")}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((e,t)=>{e.classList.add("animate__animated"),e.classList.add("animate__fadeInUp"),e.style.setProperty("animation-delay",.6+.05*t+"s")}))}},c=n(89);const _=(0,c.Z)(l,[["render",m]]);var d=_},9775:function(e,t,n){n.d(t,{Z:function(){return m}});var s=n(3396);function o(e,t,n,o,a,r){const i=(0,s.up)("input-number");return(0,s.wg)(),(0,s.j4)(i,{onPushIntoNumber:t[0]||(t[0]=e=>r.pushCharIntoPassword(e)),onPopIntoNumber:t[1]||(t[1]=()=>r.extractLastCharIntoPassword()),onClearNumber:t[2]||(t[2]=()=>r.clearPassword())})}var a=n(7557),r={name:"InputPersonalNumberForm",components:{InputNumber:a.Z},data(){return{password:""}},methods:{pushCharIntoPassword(e){this.password+=e},extractLastCharIntoPassword(){this.password=this.password.slice(0,-1)},clearPassword(){this.password=""},emitPass(){this.$emit("password",this.password)}},watch:{password:function(){this.emitPass()}}},i=n(89);const u=(0,i.Z)(r,[["render",o]]);var m=u},2398:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var s=n(3396);function o(e,t,n,o,a,r){const i=(0,s.up)("employee-login");return(0,s.wg)(),(0,s.j4)(i)}var a=n(4677),r=n(7139),i=n(9242);const u={class:"home"},m={class:"driver-form"},l={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},c={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},_={class:"driver-form__input"},d={key:3,class:"driver-form__not-found animate__animated animate__fadeInUp"};function p(e,t,n,o,a,p){const b=(0,s.up)("input-personal-number-form");return(0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",m,[p.login?((0,s.wg)(),(0,s.iD)("div",l,(0,r.zw)(a.employee.fio),1)):((0,s.wg)(),(0,s.iD)("div",c," Введите ваш идентификатор ")),(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":t[0]||(t[0]=e=>a.employee_id=e),onInput:t[1]||(t[1]=(...e)=>p.checkEmployee&&p.checkEmployee(...e))},null,544),[[i.nr,a.employee_id]])]),(0,s.Wm)(b,{onPassword:t[2]||(t[2]=e=>p.updateEmployeeId(e))}),this.employee?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:t[3]||(t[3]=(...e)=>p.start&&p.start(...e)),class:"btn animate__animated animate__fadeInUp"}," начать осмотр ")):(0,s.kq)("",!0),a.error?((0,s.wg)(),(0,s.iD)("div",d,(0,r.zw)(a.error),1)):(0,s.kq)("",!0)])])}n(7658);var b=n(9775),h=n(4951),f={components:{InputPersonalNumberForm:b.Z},data(){return{employee_id:"",employee:null,error:"",toast:(0,a.pm)(),loading:!1}},methods:{start(){this.$store.state.inspection.person_id=this.employee.hash_id,this.$store.state.inspection.person_fio=this.employee.fio,this.$store.state.inspection.type="employee",this.$router.push({name:"step-driver"})},updateEmployeeId(e){this.employee_id=e,this.checkEmployee()},async checkEmployee(){if(this.error=null,!(this.employee_id.length<6)){this.loading=!0;try{const e=await(0,h.J)(this.employee_id);e?(this.employee=e,this.error=null):this.error="Сотрудник не найден"}catch(e){this.error=e.response?.data?.message||"Неизвестная ошибка"}this.loading=!1}}},computed:{login(){return this.employee}}},w=n(89);const y=(0,w.Z)(f,[["render",p]]);var v=y;const I={class:"last-inspection"},k={class:"step-1__outer"},N={class:"step-1"},C={class:"step-1__item"},g=(0,s._)("div",{class:"step-1__label animate__animated animate__fadeInDown"}," Ваш идентификатор ",-1),P={class:"step-1__id animate__animated animate__fadeInDown d-1"},D=(0,s._)("div",{class:"step-1__item"},[(0,s._)("div",{class:"step-1__label animate__animated animate__fadeInDown d-2"}," Ваше полное имя "),(0,s._)("div",{class:"step-1__name animate__animated animate__fadeInDown d-3"}," Ivanov Ivan Ivanovich ")],-1),Z={class:"step-buttons"};function $(e,t,n,o,a,i){return(0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("div",k,[(0,s._)("div",N,[(0,s._)("div",C,[g,(0,s._)("div",P,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)("112345",(e=>(0,s._)("span",{key:e},(0,r.zw)(e),1))),64))])]),D]),(0,s._)("div",Z,[(0,s._)("button",{onClick:t[0]||(t[0]=t=>e.$router.push({name:"home"})),class:"btn opacity blue"},"Назад"),(0,s._)("button",{onClick:t[1]||(t[1]=t=>e.$router.push({name:"step-photo"})),class:"btn"},"Продолжить")])])])}var E={data(){return{}},methods:{},watch:{},computed:{}};const L=(0,w.Z)(E,[["render",$]]);var U=L,q={components:{EmployeeLogin:v,EmployeeIndex:U},data(){return{employee:null,toast:(0,a.pm)()}},methods:{},computed:{login(){return null!==this.employee}}};const x=(0,w.Z)(q,[["render",o]]);var z=x}}]);
//# sourceMappingURL=398.514ca927.js.map