"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[193],{2136:function(t,e,n){n.d(e,{Z:function(){return h}});var s=n(3396);const r={class:"number-buttons",ref:"numbers"},i=(0,s._)("i",{class:"ri-close-fill"},null,-1),a=[i],o=(0,s._)("i",{class:"ri-delete-back-line"},null,-1),d=[o];function l(t,e,n,i,o,l){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("button",{class:"number-buttons__item",onClick:e[0]||(e[0]=t=>l.pushCharIntoPassword("1"))},"1"),(0,s._)("button",{class:"number-buttons__item",onClick:e[1]||(e[1]=t=>l.pushCharIntoPassword("2"))},"2"),(0,s._)("button",{class:"number-buttons__item",onClick:e[2]||(e[2]=t=>l.pushCharIntoPassword("3"))},"3"),(0,s._)("button",{class:"number-buttons__item",onClick:e[3]||(e[3]=t=>l.pushCharIntoPassword("4"))},"4"),(0,s._)("button",{class:"number-buttons__item",onClick:e[4]||(e[4]=t=>l.pushCharIntoPassword("5"))},"5"),(0,s._)("button",{class:"number-buttons__item",onClick:e[5]||(e[5]=t=>l.pushCharIntoPassword("6"))},"6"),(0,s._)("button",{class:"number-buttons__item",onClick:e[6]||(e[6]=t=>l.pushCharIntoPassword("7"))},"7"),(0,s._)("button",{class:"number-buttons__item",onClick:e[7]||(e[7]=t=>l.pushCharIntoPassword("8"))},"8"),(0,s._)("button",{class:"number-buttons__item",onClick:e[8]||(e[8]=t=>l.pushCharIntoPassword("9"))},"9"),(0,s._)("button",{class:"number-buttons__item",onClick:e[9]||(e[9]=t=>l.clearPassword())},a),(0,s._)("button",{class:"number-buttons__item",onClick:e[10]||(e[10]=t=>l.pushCharIntoPassword("0"))},"0"),(0,s._)("button",{class:"number-buttons__item",onClick:e[11]||(e[11]=t=>l.extractLastCharIntoPassword())},d)],512)}var u={data(){return{password:""}},methods:{pushCharIntoPassword(t){this.password+=t},extractLastCharIntoPassword(){this.password=this.password.slice(0,-1)},clearPassword(){this.password=""},emitPass(){this.$emit("password",this.password)}},watch:{password:function(){this.emitPass()}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((t,e)=>{t.classList.add("animate__animated"),t.classList.add("animate__fadeInUp"),t.style.setProperty("animation-delay",.6+.05*e+"s")}))}},c=n(89);const _=(0,c.Z)(u,[["render",l]]);var h=_},7193:function(t,e,n){n.r(e),n.d(e,{default:function(){return M}});var s=n(3396);function r(t,e,n,r,i,a){const o=(0,s.up)("print-login"),d=(0,s.up)("print-index");return(0,s.wg)(),(0,s.iD)(s.HY,null,[this.login?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(o,{key:0,onSuccessAuth:e[0]||(e[0]=t=>a.setDriver(t))})),this.login&&!this.hasQuery?((0,s.wg)(),(0,s.j4)(d,{key:1,onPrint:e[1]||(e[1]=t=>a.printQuery(t))})):(0,s.kq)("",!0),(0,s.Uk)(" /> ")],64)}var i=n(7139),a=n(9242);const o={class:"home"},d={class:"driver-form"},l={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},u={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},c={class:"driver-form__input"},_={key:2,class:"driver-form__not-found animate__animated animate__fadeInUp"};function h(t,e,n,r,h,m){const p=(0,s.up)("input-personal-number-form");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",d,[h.driver.driver_fio?((0,s.wg)(),(0,s.iD)("div",l,(0,i.zw)(h.driver.driver_fio),1)):((0,s.wg)(),(0,s.iD)("div",u," Введите ваш идентификатор ")),(0,s._)("div",c,[(0,s.wy)((0,s._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":e[0]||(e[0]=t=>h.driver_id=t),onInput:e[1]||(e[1]=(...t)=>m.checkDriver&&m.checkDriver(...t))},null,544),[[a.nr,h.driver_id]])]),(0,s.Wm)(p,{onPassword:e[2]||(e[2]=t=>m.updateDriverId(t))}),h.error?((0,s.wg)(),(0,s.iD)("div",_,(0,i.zw)(h.error),1)):(0,s.kq)("",!0)])])}var m=n(2136),p=n(6509),v=n(4677),w={components:{InputPersonalNumberForm:m.Z},data(){return{driver_id:"",driver:{},error:"",toast:(0,v.pm)(),loading:!1}},methods:{async start(){this.$emit("success-auth",this.driver.hash_id)},updateDriverId(t){this.driver_id=t},async checkDriver(){if(this.error=null,!(this.driver_id.length<6)){this.loading=!0;try{const t=await(0,p.L$)(this.driver_id);t?(this.driver=t,this.error=null,await this.start()):this.error="Водитель не найден"}catch(t){this.error=t.response?.data?.message||"Неизвестная ошибка"}this.loading=!1}}},watch:{driver_id:function(t){this.checkDriver(),this.hasDriver||(this.processingApproval=!1)}},computed:{config(){return this.$store.state.config},hasDriver(){return this.driver.driver_id&&!this.error}},mounted(){}},b=n(89);const f=(0,b.Z)(w,[["render",h]]);var I=f;const k={class:"last-inspection"},g={class:"last-inspection__header"},y={class:"last-inspection_body"},D={class:"content-block__calendar"},C={key:0,class:"content-block__table"},P=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Время"),(0,s._)("th",null,"Дата"),(0,s._)("th",null,"Тип осмотра"),(0,s._)("th")])],-1),q=(0,s._)("td",null,[(0,s._)("a",{class:"btn icon"},[(0,s._)("i",{class:"ri-printer-fill"})])],-1),x={key:1},L=(0,s._)("div",{class:"driver-form__not-found animate__animated animate__fadeInUp"},"Ранее осмотры не проводились",-1),Z=[L];function z(t,e,n,r,a,o){const d=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("div",g,[(0,s._)("h1",null,(0,i.zw)(a.name),1)]),(0,s._)("div",y,[(0,s._)("div",D,[(0,s.Wm)(d,{modelValue:a.date,"onUpdate:modelValue":e[0]||(e[0]=t=>a.date=t),inline:"","auto-apply":"","disable-year-select":!0,"disabled-times":"",locale:"ru","hide-navigation":["month","time","hours","seconds"],"min-date":o.firstDayLastMonth,"max-date":o.dateNow,"prevent-min-max-navigation":""},null,8,["modelValue","min-date","max-date"])]),o.hasInspections?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("table",null,[P,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.lastInspections,(t=>((0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,(0,i.zw)(t.time),1),(0,s._)("td",null,(0,i.zw)(t.date),1),(0,s._)("td",null,(0,i.zw)(t.type),1),q])))),256))])])])):(0,s.kq)("",!0),o.hasInspections?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",x,Z))])])}var U=n(7190),V={name:"PrintIndex",components:{VueDatePicker:U.Z},data(){return{date:new Date,name:"Иванов Иван Иванович",lastInspections:[{time:"00:00:00",date:"01-02-2021 ",type:"Предрейсовый/предсменный"},{time:"00:00:00",date:"02-03-2022",type:"Предрейсовый/предсменный"},{time:"00:00:00",date:"03-04-2023",type:"Другой"}]}},methods:{print(t){}},watch:{},computed:{dateNow(){return new Date},firstDayLastMonth(){let t=new Date;return t.setMonth(t.getMonth()-1,1),t},hasInspections(){return this.lastInspections.length>0}},mounted(){}};const A=(0,b.Z)(V,[["render",z]]);var Q=A,R={components:{PrintIndex:Q,PrintLogin:I},data(){return{driverId:null,inspection:{},print:!1,driverIdRequest:null,errorAuthentication:!1}},methods:{confirmPrint(){},printQuery(t){this.inspection=t},setDriver(t){this.driverId=t,console.log(this.inspection),console.log(this.hasQuery),console.log("login "+this.login)},setDriverIdRequest(t){this.driverIdRequest=t}},watch:{driverIdRequest:()=>{(void 0).errorAuthentication=(void 0).driverId!==(void 0).driverIdRequest}},computed:{login(){return null!==this.driverId},hasQuery(){return!1}}};const $=(0,b.Z)(R,[["render",r]]);var M=$}}]);
//# sourceMappingURL=193.b8f02753.js.map