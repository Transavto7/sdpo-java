{"version":3,"file":"js/942.0324807a.js","mappings":"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","sources":["webpack://sdpo-frontend/./src/helpers/api/employee.js","webpack://sdpo-frontend/./src/helpers/media.js","webpack://sdpo-frontend/./src/components/ResultRepeat.vue","webpack://sdpo-frontend/./src/components/ResultRepeat.vue?3316","webpack://sdpo-frontend/./src/components/common/Loader.vue","webpack://sdpo-frontend/./src/components/common/Loader.vue?f04c","webpack://sdpo-frontend/./src/pages/inspection/Step-result-employee.vue","webpack://sdpo-frontend/./src/pages/inspection/Step-result-employee.vue?9340"],"sourcesContent":["import store from \"@/store\";\nimport axios from \"axios\";\nimport {defaultError} from \"@/helpers/http-errors\";\nimport {useToast} from \"vue-toastification\";\n\nconst toast = useToast();\n\nexport async function getEmployee(id) {\n    return await axios.post(`employees/inspection/${id}`)\n        .then(({data}) => {\n        return data;\n    });\n}\n\nexport async function saveEmployeeInspection(inspection = store.state.inspection) {\n    return await axios.post(`employees/inspection/save`, inspection)\n        .then(({data}) => {\n        return data;\n    }).catch(defaultError);\n}\n\n","import alertPath from \"@/assets/audio/alert.ogg\";\nimport store from \"@/store\";\n\nexport function playAlert() {\n    (new Audio(alertPath)).play();\n}\n\nexport async function startWaitTimerRecordMedia() {\n    await stopWaitTimerRecordMedia();\n    let seconds = 5;\n    store.state.waitRecordMedia = true\n\n    store.state.timerRecordMedia = setInterval(() => {\n        seconds--;\n        console.log('осталось ' + seconds)\n        if (seconds < 1) {\n            stopWaitTimerRecordMedia()\n        }\n    }, 1000);\n}\n\nexport async function stopWaitTimerRecordMedia() {\n    if (store.state.waitRecordMedia) {\n        store.state.waitRecordMedia = false\n        await clearInterval(store.state.timerRecordMedia);\n    }\n\n}","<script>\nimport {playAlert} from '@/helpers/media';\n\nexport default {\n  props: {\n    visible: {\n      type: Boolean,\n      require: true\n    },\n    messageContent: {\n      type: String,\n      require: true,\n      default: ''\n    }\n  },\n  methods: {\n    closeModal() {\n      this.$emit('close-modal')\n    },\n    accept() {\n      this.closeModal();\n      this.$emit('accept');\n    },\n  },\n  watch: {\n    visible: function (val) {\n      if (val) playAlert();\n    }\n  },\n}\n</script>\n\n<template>\n  <div v-if=\"visible\"\n       @click=\"closeModal\"\n       class=\"medics__overlay animate__animated animate__fadeIn\">\n  </div>\n  <div v-if=\"visible\" class=\"approval animate__animated animate__fadeInRight\">\n    <div class=\"not-identify__title\">\n      <h3>Не идентифицирован</h3>\n    </div>\n    <div class=\"approval__content\">\n      <div class=\"not-identify__content\">\n        {{ this.messageContent }}\n      </div>\n      <button @click=\"accept\" class=\"btn approval__button-submit animate__animated animate__fadeInUp\">В начало осмотра\n      </button>\n    </div>\n  </div>\n\n</template>","import { render } from \"./ResultRepeat.vue?vue&type=template&id=2ab604ec\"\nimport script from \"./ResultRepeat.vue?vue&type=script&lang=js\"\nexport * from \"./ResultRepeat.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nexport default {\n  props: {\n    loading: {\n      type: Boolean,\n      default: false,\n    }\n  },\n}\n</script>\n<template>\n  <div v-if=\"loading\" class=\"admin__loading animate__animated animate__fadeInUp\" style=\"z-index: 3\">\n    <div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n    Загрузка\n  </div>\n</template>\n","import { render } from \"./Loader.vue?vue&type=template&id=1380ac7d\"\nimport script from \"./Loader.vue?vue&type=script&lang=js\"\nexport * from \"./Loader.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport ResultRepeat from \"@/components/ResultRepeat\";\nimport Loader from \"@/components/common/Loader\";\nimport {saveEmployeeInspection} from \"@/helpers/api/employee\";\n\nexport default {\n  components: {Loader, ResultRepeat},\n  data() {\n    return {\n      backTimeout: null,\n      result: {},\n      conclusion: {\n        admitted: '',\n        comments: '',\n      },\n      notIdentified: 'Не идентифицирован',\n      loading: false,\n      feedback: null,\n      phrase: '',\n    }\n  },\n  async mounted() {\n    this.$data.loading = true;\n\n    let global = this;\n    let checker = async function () {\n      if (global.$store.state.waitRecordMedia) {\n        setTimeout(checker, 1000);\n      } else {\n        global.loading = false;\n        await global.save();\n        if (global.autoStart) {\n          global.backTimeout = global.setTimeoutAndRedirect();\n        }\n      }\n    }\n    setTimeout(checker, 1000);\n  },\n  unmounted() {\n    clearTimeout(this.backTimeout);\n  },\n  methods: {\n    async save() {\n      this.result = await saveEmployeeInspection();\n      this.conclusion.admitted = this.result.admitted ?? '';\n      this.conclusion.comments = this.result.comments ?? '';\n    },\n    redirectHome() {\n      if (this.$route.name === 'step-result-employee') {\n        this.$router.push('/');\n      }\n    },\n    redirectRepeat() {\n      if (this.$route.name === 'step-result-employee') {\n        this.$router.push({name: 'step-retry'});\n      }\n    },\n    setTimeoutAndRedirect() {\n      if (this.result.admitted === this.notIdentified) {\n        return setTimeout(this.redirectRepeat, this.system.delay_before_retry_inspection);\n      }\n      return setTimeout(this.redirectHome, this.system.delay_before_redirect_to_main_page);\n    },\n  },\n  computed: {\n    autoStart() {\n      return this.system.auto_start;\n    },\n    admitted() {\n      return this.result?.admitted === 'Допущен'\n    },\n    showRetryModal() {\n      return this.result.admitted === this.notIdentified;\n    },\n    getComment() {\n      return this.result.comments ?? '';\n    },\n    inspection() {\n      return this.$store.state.inspection;\n    },\n    system() {\n      return this.$store.state.config?.system || {};\n    },\n    connection() {\n      return this.$store.state.connection || false;\n    },\n  }\n  ,\n}\n</script>\n\n<template>\n  <loader v-model:loading=\"loading\"/>\n  <result-repeat v-model:visible=\"showRetryModal\"\n                 v-model:message-content=\"getComment\"\n                 @accept=\"redirectRepeat()\"\n  ></result-repeat>\n  <div style=\"display: flex; \">\n    <div v-if=\"!loading\" class=\"step-result\">\n      <div style=\"text-align: center;\">\n        <h3 class=\"step-result__header_with_result animate__animated animate__fadeInDown\">Результаты осмотра:\n          <span class=\"step-result__text animate__animated animate__fadeInUp\">\n                {{ result.admitted || 'ожидание ответа' }}<br>\n            </span></h3>\n        <div class=\"step-result__cards\">\n          <div v-if=\"system.tonometer_visible && inspection.hasOwnProperty('tonometer')\" class=\"step-result__card animate__animated animate__fadeInUp d-1\">\n            <span>Давление</span>\n            {{ inspection.hasOwnProperty('tonometer') ? inspection.tonometer : 'Неизвестно' }}\n          </div>\n          <div v-if=\"system.tonometer_visible && inspection.hasOwnProperty('pulse')\" class=\"step-result__card animate__animated animate__fadeInUp d-2\">\n            <span>Пульс</span>\n            {{ inspection.hasOwnProperty('pulse') ? inspection.pulse : 'Неизвестно' }}\n          </div>\n          <div v-if=\"system.alcometer_visible && inspection.hasOwnProperty('alcometer_result')\" class=\"step-result__card animate__animated animate__fadeInUp d-2\">\n            <span>Количество промилле</span>\n            {{ inspection.hasOwnProperty('alcometer_result') ? inspection.alcometer_result + ' ‰' : 'Неизвестно' }}\n          </div>\n          <div v-if=\"system.thermometer_visible && inspection.hasOwnProperty('t_people')\" class=\"step-result__card animate__animated animate__fadeInUp d-2\">\n            <span>Температура тела</span>\n            {{ inspection.hasOwnProperty('t_people') ? inspection.t_people + ' °C' : 'Неизвестно' }}\n          </div>\n        </div>\n      </div>\n      <div class=\"step-result__footer\">\n        <div class=\"step-result__buttons\">\n          <button @click=\"$router.push('/')\" class=\"btn blue animate__animated animate__fadeInUp\">В начало</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>","import { render } from \"./Step-result-employee.vue?vue&type=template&id=52abdcea\"\nimport script from \"./Step-result-employee.vue?vue&type=script&lang=js\"\nexport * from \"./Step-result-employee.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["useToast","async","getEmployee","id","axios","then","data","saveEmployeeInspection","inspection","store","catch","defaultError","playAlert","Audio","alertPath","play","startWaitTimerRecordMedia","stopWaitTimerRecordMedia","seconds","setInterval","console","log","clearInterval","class","_createElementVNode","$props","visible","_createElementBlock","onClick","_cache","args","$options","closeModal","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","messageContent","accept","props","type","Boolean","require","String","default","methods","this","$emit","watch","val","__exports__","render","style","loading","_createVNode","_component_loader","$data","$event","_component_result_repeat","showRetryModal","getComment","onAccept","redirectRepeat","_hoisted_5","result","admitted","_hoisted_6","_hoisted_7","system","tonometer_visible","hasOwnProperty","_hoisted_8","_hoisted_9","tonometer","_hoisted_10","_hoisted_11","pulse","alcometer_visible","_hoisted_12","_hoisted_13","alcometer_result","thermometer_visible","_hoisted_14","_hoisted_15","t_people","_hoisted_16","_hoisted_17","_ctx","$router","push","components","Loader","ResultRepeat","backTimeout","conclusion","comments","notIdentified","feedback","phrase","global","checker","$store","state","waitRecordMedia","setTimeout","save","autoStart","setTimeoutAndRedirect","unmounted","clearTimeout","redirectHome","$route","name","delay_before_retry_inspection","delay_before_redirect_to_main_page","computed","auto_start","config","connection"],"sourceRoot":""}