"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[481],{2543:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(3396),i=t(9242);const a={class:"number-form"},s=(0,r._)("div",{class:"number-form__title animate__animated animate__fadeInDown d-2"}," Введите личный номер телефона ",-1),o={class:"number-form__input"};function u(e,n,t,u,m,h){const d=(0,r.up)("input-number");return(0,r.wg)(),(0,r.iD)("div",a,[s,(0,r._)("div",o,[(0,r.wy)((0,r._)("input",{type:"text",class:"animate__animated animate__fadeIn d-5",style:{"letter-spacing":"4px"},"onUpdate:modelValue":n[0]||(n[0]=e=>m.maskNumber=e)},null,512),[[i.nr,m.maskNumber]])]),(0,r.Wm)(d,{onPushIntoNumber:n[1]||(n[1]=e=>h.pushIntoNumber(e)),onPopIntoNumber:n[2]||(n[2]=()=>h.popIntoNumber()),onClearNumber:n[3]||(n[3]=()=>h.clearNumber())})])}var m=t(7557),h={name:"InputPhoneNumber",components:{InputNumber:m.Z},props:{maskInput:{type:String,default:()=>"+7 ... ... .. .."},placeholder:{type:String,default:()=>"."}},data(){return{originNumber:"",maskNumber:"",mask:this.maskInput}},methods:{pushIntoNumber(e){this.isMaxLengthReached()||0===this.originNumber.length&&"8"===e||(this.originNumber+=e)},popIntoNumber(){this.originNumber=this.originNumber.slice(0,-1)},clearNumber(){this.originNumber=""},countOccurrences(){let e=0;for(let n=0;n<this.mask.length;n++)this.mask.charAt(n)===this.placeholder&&e++;return e},isMaxLengthReached(){return this.originNumber.length===this.countOccurrences()},replaceAt(e,n,t){return e.substr(0,n)+t+e.substr(n+t.length)},setMaskNumber(){let e=this.originNumber,n=this.mask;Array.from(e).forEach((e=>{n=this.replaceAt(n,n.indexOf("."),e)})),this.maskNumber=n.split(".").join(""),this.$emit("acceptOn",this.maskNumber.split(" ").join(""))}},watch:{originNumber:function(){this.setMaskNumber()}},mounted(){this.setMaskNumber()}},d=t(89);const l=(0,d.Z)(h,[["render",u]]);var p=l},5511:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(3396);const i={key:0,class:"admin__loading animate__animated animate__fadeInUp",style:{"z-index":"3"}},a=(0,r._)("div",{class:"lds-ring"},[(0,r._)("div"),(0,r._)("div"),(0,r._)("div"),(0,r._)("div")],-1);function s(e,n,t,s,o,u){return t.loading?((0,r.wg)(),(0,r.iD)("div",i,[a,(0,r.Uk)(" Загрузка ")])):(0,r.kq)("",!0)}var o={props:{loading:{type:Boolean,default:!1}}},u=t(89);const m=(0,u.Z)(o,[["render",s]]);var h=m},6481:function(e,n,t){t.r(n),t.d(n,{default:function(){return p}});var r=t(3396);const i={key:0,class:"input-save-phone"};function a(e,n,t,a,s,o){const u=(0,r.up)("loader"),m=(0,r.up)("input-phone-number");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(u,{loading:s.loading,"onUpdate:loading":n[0]||(n[0]=e=>s.loading=e)},null,8,["loading"]),this.loading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(m,{onAcceptOn:n[1]||(n[1]=e=>o.setPhoneNumber(e))}),o.hasPhone?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:n[2]||(n[2]=e=>o.storePhone()),class:"btn animate__animated animate__fadeInUp"}," Сохранить ")):(0,r.kq)("",!0)]))],64)}t(7658);var s=t(2543),o=t(5511),u=t(2227),m=t(4677),h={name:"InputAndSavePhone",components:{Loader:o.Z,InputPhoneNumber:s.Z},data(){return{phoneNumber:"",toast:(0,m.pm)(),loading:!1}},methods:{setPhoneNumber(e){this.phoneNumber=e},formattingPhoneNumber(){return"+"===this.phoneNumber[0]?this.phoneNumber.slice(1):this.phoneNumber},async storePhone(){this.loading=!0,await(0,u.Ch)(this.formattingPhoneNumber(),this.$store.state.inspection.driver_id),this.loading=!1,this.$router.push({name:"step-driver"})}},computed:{hasPhone(){return 12===this.phoneNumber.length}}},d=t(89);const l=(0,d.Z)(h,[["render",a]]);var p=l}}]);
//# sourceMappingURL=481.01b9a876.js.map