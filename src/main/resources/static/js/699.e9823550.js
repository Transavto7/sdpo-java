"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[699],{2419:function(t,e,a){a.d(e,{NO:function(){return l},QL:function(){return d},TQ:function(){return c},af:function(){return o},o:function(){return _}});var n=a(1857),s=a(8791),i=a(7625);async function o(){return await axios.post("device/photo").then((({data:t})=>t)).catch(n.i)}async function c(){return await axios.get("device/video/size").then((({data:t})=>t)).catch(n.i)}async function l(t){return await axios.post("device/media",{driver_id:t}).then((({data:t})=>t)).catch(n.i)}async function d(){return await axios.post("device/media/stop").then((async({data:t})=>(i.Z.state.temp.photo=i.Z.state.inspection.photo,i.Z.state.temp.video=i.Z.state.inspection.video,await(0,s.SX)(),t))).catch(n.i)}async function _(){return await axios.post("device/video/test").then((({data:t})=>t)).catch(n.i)}},8791:function(t,e,a){a.d(e,{Eq:function(){return i},SX:function(){return o}});var n=a.p+"media/alert.1cca9e8e.ogg",s=a(7625);function i(){new Audio(n).play()}async function o(){await c();let t=5;s.Z.state.waitRecordMedia=!0,s.Z.state.timerRecordMedia=setInterval((()=>{t--,console.log("осталось "+t),t<1&&c()}),1e3)}async function c(){s.Z.state.waitRecordMedia&&(s.Z.state.waitRecordMedia=!1,await clearInterval(s.Z.state.timerRecordMedia))}},4575:function(t,e,a){a.d(e,{S:function(){return i},g:function(){return o}});var n=a(1076),s=a(1857);async function i(){return await n.Z.post("device/printer").then((({data:t})=>t)).catch(s.i)}async function o(t,e){return await n.Z.post("/device/printer/qr",{driver:t,type:e}).then((({data:t})=>t)).catch(s.i)}},2756:function(t,e,a){a.d(e,{i:function(){return s}});var n=a(1857);async function s(){return await axios.post("device/thermometer").then((({data:t})=>t)).catch(n.i)}},5611:function(t,e,a){a.d(e,{Xi:function(){return c},lm:function(){return o},qb:function(){return i},vX:function(){return s}});var n=a(1857);async function s(){return await axios.post("device/tonometer").then((({data:t})=>t)).catch(n.i)}async function i(){return await axios.post("device/tonometer/disable").then((({data:t})=>t)).catch(n.i)}async function o(t="connect"){return await axios.post("device/tonometer/connect",{status:t}).then((({data:t})=>t)).catch(n.i)}async function c(){return await axios.post("device/scan").then((({data:t})=>t)).catch((t=>{console.log(t)}))}},5508:function(t,e,a){a.r(e),a.d(e,{default:function(){return Ze}});var n=a(3396),s=a(7139);const i={class:"admin"},o={class:"admin__tabs"};function c(t,e,a,c,l,d){const _=(0,n.up)("main-settings"),r=(0,n.up)("tonometer"),m=(0,n.up)("password"),u=(0,n.up)("logo"),p=(0,n.up)("testing");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",o,[(0,n._)("button",{class:(0,s.C_)(["admin__tab animate__animated animate__fadeInDown d-1",{active:"main"===l.selected}]),onClick:e[0]||(e[0]=t=>l.selected="main")}," Основные настройки ",2),(0,n._)("button",{class:(0,s.C_)(["admin__tab animate__animated animate__fadeInDown d-2",{active:"password"===l.selected}]),onClick:e[1]||(e[1]=t=>l.selected="password")}," Настройки пароля ",2),(0,n._)("button",{class:(0,s.C_)(["admin__tab animate__animated animate__fadeInDown d-3",{active:"tonometer"===l.selected}]),onClick:e[2]||(e[2]=t=>l.selected="tonometer")}," Настройки тонометра ",2),(0,n._)("button",{class:(0,s.C_)(["admin__tab animate__animated animate__fadeInDown d-3",{active:"logo"===l.selected}]),onClick:e[3]||(e[3]=t=>l.selected="logo")}," Смена логотипа ",2),(0,n._)("button",{class:(0,s.C_)(["admin__tab animate__animated animate__fadeInDown d-4",{active:"testing"===l.selected}]),onClick:e[4]||(e[4]=t=>l.selected="testing")}," Тестирование ",2)]),"main"===l.selected?((0,n.wg)(),(0,n.j4)(_,{key:0})):(0,n.kq)("",!0),"tonometer"===l.selected?((0,n.wg)(),(0,n.j4)(r,{key:1})):(0,n.kq)("",!0),"password"===l.selected?((0,n.wg)(),(0,n.j4)(m,{key:2})):(0,n.kq)("",!0),"logo"===l.selected?((0,n.wg)(),(0,n.j4)(u,{key:3})):(0,n.kq)("",!0),"testing"===l.selected?((0,n.wg)(),(0,n.j4)(p,{key:4})):(0,n.kq)("",!0)])}const l={class:"admin__testing"},d=["disabled"],_=["disabled"],r=["disabled"],m=["disabled"],u=["disabled"],p=["disabled"],v={key:0,class:"admin__loading animate__animated animate__fadeInUp"},h=(0,n._)("div",{class:"lds-ring"},[(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div")],-1),w={key:1,class:"admin__testing-result"},y=["src"],b={key:1,class:"admin__testing-video animate__animated animate__fadeInUp"},g=(0,n._)("video",{autoplay:"autoplay",controls:""},[(0,n._)("source",{src:"http://localhost:8080/video",type:"video/mp4"})],-1),f=[g],k={key:2,class:"admin__testing-temp animate__animated animate__fadeInUp"},U=(0,n._)("span",null,"°C",-1),C={key:3,class:"admin__testing-temp animate__animated animate__fadeInUp"},I={key:4,class:"admin__testing-pressure animate__animated animate__fadeInUp"},D={class:"admin__testing-pressure-item"},x=(0,n._)("span",null,"Систолическое давление",-1),q={class:"admin__testing-pressure-item"},Z=(0,n._)("span",null,"Диастолическое давление",-1),z={class:"admin__testing-pressure-item"},V=(0,n._)("span",null,"Пульс",-1);function $(t,e,a,i,o,c){return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("button",{disabled:"loading"===o.show,onClick:e[0]||(e[0]=t=>c.photo()),class:"btn blue tab animate__animated animate__fadeInUp"},"Тестовый снимок",8,d),(0,n._)("button",{disabled:"loading"===o.show,onClick:e[1]||(e[1]=t=>c.video()),class:"btn blue tab animate__animated animate__fadeInUp d-1"},"Тестовое видео",8,_),(0,n._)("button",{disabled:"loading"===o.show,onClick:e[2]||(e[2]=t=>c.thermometer()),class:"btn blue tab animate__animated animate__fadeInUp d-2"},"Тест пирометра",8,r),(0,n._)("button",{disabled:"loading"===o.show,onClick:e[3]||(e[3]=t=>c.alcometer()),class:"btn blue tab animate__animated animate__fadeInUp d-3"},"Тест алкометра",8,m),(0,n._)("button",{disabled:"loading"===o.show,onClick:e[4]||(e[4]=t=>c.printer()),class:"btn blue tab animate__animated animate__fadeInUp d-4"},"Тестовая печать",8,u),(0,n._)("button",{disabled:"loading"===o.show,onClick:e[5]||(e[5]=t=>c.tonometer()),class:"btn blue tab animate__animated animate__fadeInUp d-5"},"Тест тонометра",8,p),"loading"===o.show?((0,n.wg)(),(0,n.iD)("div",v,[h,(0,n.Uk)(" Загрузка ")])):((0,n.wg)(),(0,n.iD)("div",w,["image"===o.show?((0,n.wg)(),(0,n.iD)("img",{key:0,class:"animate__animated animate__fadeInUp",src:o.image},null,8,y)):(0,n.kq)("",!0),"video"===o.show?((0,n.wg)(),(0,n.iD)("div",b,f)):(0,n.kq)("",!0),"temp"===o.show?((0,n.wg)(),(0,n.iD)("div",k,[(0,n.Uk)((0,s.zw)(o.temp)+" ",1),U])):(0,n.kq)("",!0),"alcometer"===o.show?((0,n.wg)(),(0,n.iD)("div",C,(0,s.zw)(void 0===o.alcometerPpm?"Не удалось получить результат":o.alcometerPpm+" ‰"),1)):(0,n.kq)("",!0),"pressure"===o.show?((0,n.wg)(),(0,n.iD)("div",I,[(0,n._)("div",D,[x,(0,n.Uk)(" "+(0,s.zw)(o.pressure?.systolic?o.pressure.systolic+" мм. рт.ст":"Результатов нет"),1)]),(0,n._)("div",q,[Z,(0,n.Uk)(" "+(0,s.zw)(o.pressure?.diastolic?o.pressure.diastolic+" мм. рт.ст":"Результатов нет"),1)]),(0,n._)("div",z,[V,(0,n.Uk)(" "+(0,s.zw)(o.pressure?.pulse?o.pressure.pulse+" уд/мин":"Результатов нет"),1)])])):(0,n.kq)("",!0)]))])}var S=a(2419),P=a(5611),L=a(2756),R=a(6700),M=a(4575),X={data(){return{show:"",image:null,video:null,temp:null,alcometerPpm:null,pressure:null,timeout:0,loading:!1,interval:null}},methods:{async photo(){this.show="loading",clearInterval(this.interval),this.image=await(0,S.af)(),this.show="",this.image&&setTimeout((()=>{this.show="image"}),2e3)},async video(){this.show="loading",clearInterval(this.interval),this.video=await(0,S.o)(),this.show="",this.video&&(this.show="video")},async thermometer(){this.show="loading",clearInterval(this.interval),this.interval=setInterval((async()=>{this.temp=await(0,L.i)(),"next"!==this.temp&&(this.show="temp",clearInterval(this.interval))}),1e3)},async alcometer(){this.show="loading",clearInterval(this.interval),this.interval=setInterval((async()=>{const t=await(0,R.pe)();"next"!==t&&(this.alcometerPpm=Number(t)||0,this.show="alcometer",clearInterval(this.interval))}),1e3)},async printer(){this.show="loading",this.alcometerPpm=await(0,M.S)(),this.show=""},async tonometer(){this.show="loading",clearInterval(this.interval),this.interval=setInterval((async()=>{const t=await(0,P.vX)();"next"!==t&&(this.pressure=t,clearInterval(this.interval),this.show="pressure")}),1e3)}}},T=a(89);const j=(0,T.Z)(X,[["render",$]]);var F=j;const A={key:0,class:"admin__loading animate__animated animate__fadeInUp"},E=(0,n._)("div",{class:"lds-ring"},[(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div")],-1),H={key:1,class:"admin__tonometer"},Q={class:"admin__tonometer-card animate__animated animate__fadeInUp d-1"},Y=(0,n._)("div",{class:"admin__tonometer-card-title"}," Информация ",-1),B=["disabled"],K={class:"admin__tonometer-devices animate__animated animate__fadeInUp d-3"},N=["disabled","onClick"];function O(t,e,a,i,o,c){return o.result?((0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("div",Q,[Y,(0,n._)("p",null,"Подключенный тонометр: "+(0,s.zw)(c.config.main.tonometer_mac||"-"),1),(0,n._)("button",{disabled:o.connecting,class:(0,s.C_)([{red:o.connecting},"btn small blue"]),style:{width:"100%","margin-top":"10px"},onClick:e[0]||(e[0]=(...t)=>c.connect&&c.connect(...t))},"Подключить",10,B)]),(0,n._)("div",K,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.result?.devices,(t=>((0,n.wg)(),(0,n.iD)("button",{class:"admin__tonometer-device",disabled:t.address===c.config.main.tonometer_mac,key:t.address,onClick:e=>c.save(t.address)},[(0,n.Uk)((0,s.zw)(t.address||"Неизвестный адрес")+" ",1),t.name?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)(" - "+(0,s.zw)(t.name),1)],64)):(0,n.kq)("",!0)],8,N)))),128))])])):((0,n.wg)(),(0,n.iD)("div",A,[E,(0,n.Uk)(" Загрузка ")]))}var W=a(4457),G=a(4677),J={data(){return{result:null,scan_task:null,connect_task:null,toast:(0,G.pm)(),connecting:!1}},computed:{config(){return this.$store.state.config}},methods:{async getDevices(){this.scan_task=setInterval((async()=>{this.result=await(0,P.Xi)()}),1e3)},async save(t){await(0,W.Tc)(t),this.config.main.tonometer_mac=t,this.toast.success("Настройки тонометра сохранены")},async connect(){this.connecting=!0,this.connect_task=setInterval((async()=>{let t=await(0,P.lm)();"set"===t&&(this.connected=!0,this.connecting=!1,this.config.main.tonometer_connect=!0,clearInterval(this.connect_task))}),1e3)}},mounted(){this.getDevices()},unmounted(){clearInterval(this.scan_task),clearInterval(this.connect_task),(0,P.lm)("stop")}};const tt=(0,T.Z)(J,[["render",O]]);var et=tt,at=a(9242);const nt={class:"admin__password"},st={class:"password-form"},it=(0,n._)("div",{class:"password-form__title animate__animated animate__fadeInDown"}," Введите новый пароль ",-1),ot={class:"password-form__input animate__animated animate__fadeIn d-1"},ct={class:"number-buttons",ref:"numbers"},lt=(0,n._)("i",{class:"ri-close-fill"},null,-1),dt=[lt],_t=(0,n._)("i",{class:"ri-delete-back-line"},null,-1),rt=[_t];function mt(t,e,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",nt,[(0,n._)("div",st,[it,(0,n._)("div",ot,[(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":e[0]||(e[0]=t=>i.password=t)},null,512),[[at.nr,i.password]])]),(0,n._)("div",ct,[(0,n._)("button",{class:"number-buttons__item",onClick:e[1]||(e[1]=t=>i.password+="1")},"1"),(0,n._)("button",{class:"number-buttons__item",onClick:e[2]||(e[2]=t=>i.password+="2")},"2"),(0,n._)("button",{class:"number-buttons__item",onClick:e[3]||(e[3]=t=>i.password+="3")},"3"),(0,n._)("button",{class:"number-buttons__item",onClick:e[4]||(e[4]=t=>i.password+="4")},"4"),(0,n._)("button",{class:"number-buttons__item",onClick:e[5]||(e[5]=t=>i.password+="5")},"5"),(0,n._)("button",{class:"number-buttons__item",onClick:e[6]||(e[6]=t=>i.password+="6")},"6"),(0,n._)("button",{class:"number-buttons__item",onClick:e[7]||(e[7]=t=>i.password+="7")},"7"),(0,n._)("button",{class:"number-buttons__item",onClick:e[8]||(e[8]=t=>i.password+="8")},"8"),(0,n._)("button",{class:"number-buttons__item",onClick:e[9]||(e[9]=t=>i.password+="9")},"9"),(0,n._)("button",{class:"number-buttons__item",onClick:e[10]||(e[10]=t=>i.password="")},dt),(0,n._)("button",{class:"number-buttons__item",onClick:e[11]||(e[11]=t=>i.password+="0")},"0"),(0,n._)("button",{class:"number-buttons__item",onClick:e[12]||(e[12]=t=>i.password=i.password.slice(0,-1))},rt)],512),i.password.length>3?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e[13]||(e[13]=(...t)=>o.save&&o.save(...t)),class:"btn animate__animated animate__fadeInUp"},"Сохранить")):(0,n.kq)("",!0)])])}var ut={data(){return{password:"",toast:(0,G.pm)()}},methods:{async save(){await(0,W.vW)(this.password),this.password="",this.toast.success("Пароль успешно изменен"),this.$store.state.config.password=this.password}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((t,e)=>{t.classList.add("animate__animated"),t.classList.add("animate__fadeInUp"),t.style.setProperty("animation-delay",.2+.05*e+"s")}))}};const pt=(0,T.Z)(ut,[["render",mt]]);var vt=pt;const ht={class:"admin__system"},wt={class:"admin__system-card animate__animated animate__fadeInUp d-1"},yt=(0,n._)("div",{class:"admin__system-card__title"}," Основные настройки ",-1),bt={class:"admin__system-card__item"},gt=(0,n._)("span",null,"Информация о водителе",-1),ft={class:"switch"},kt=(0,n._)("div",{class:"slider round"},null,-1),Ut={class:"admin__system-card__item"},Ct=(0,n._)("span",null,"Переход в начало",-1),It={class:"switch"},Dt=(0,n._)("div",{class:"slider round"},null,-1),xt={class:"admin__system-card__item"},qt=(0,n._)("span",null,[(0,n.Uk)("Задержка перехода "),(0,n._)("br"),(0,n.Uk)(" на начальный экран")],-1),Zt={class:"admin__system-card__item"},zt=(0,n._)("span",null,[(0,n.Uk)("Задержка перед "),(0,n._)("br"),(0,n.Uk)(" повторным прохождением "),(0,n._)("br"),(0,n.Uk)(' при статусе "Не идентифицирован" '),(0,n._)("br"),(0,n.Uk)("(в миллисекундах)")],-1),Vt={class:"admin__system-card animate__animated animate__fadeInUp d-4"},$t=(0,n._)("div",{class:"admin__system-card__title"}," Камера ",-1),St={class:"admin__system-card__item"},Pt=(0,n._)("span",null,"Качество",-1),Lt=["value"],Rt={class:"admin__system-card__item"},Mt=(0,n._)("span",null,"Видео",-1),Xt={class:"switch"},Tt=(0,n._)("div",{class:"slider round"},null,-1),jt={class:"admin__system-card__item"},Ft=(0,n._)("span",null,"Фото",-1),At={class:"switch"},Et=(0,n._)("div",{class:"slider round"},null,-1),Ht={class:"admin__system-card__item"},Qt=(0,n._)("span",null,"Фото водителя",-1),Yt={class:"switch"},Bt=(0,n._)("div",{class:"slider round"},null,-1),Kt={class:"admin__system-card animate__animated animate__fadeInUp d-5"},Nt=(0,n._)("div",{class:"admin__system-card__title"}," Принтер ",-1),Ot={class:"admin__system-card__item"},Wt=(0,n._)("span",null,"Печать",-1),Gt={class:"switch"},Jt=(0,n._)("div",{class:"slider round"},null,-1),te={class:"admin__system-card__item"},ee=(0,n._)("span",null,"Количество",-1),ae={class:"admin__system-card__item"},ne=(0,n._)("span",null,"Печать маркировки осмотра",-1),se={class:"switch"},ie=(0,n._)("div",{class:"slider round"},null,-1),oe={class:"admin__system-card block animate__animated animate__fadeInUp d-6"},ce={class:"admin__system-card__title"},le={class:"admin__system-card__item"},de=(0,n._)("span",null,"Адрес",-1),_e={class:"admin__system-card__item"},re=(0,n._)("span",null,"Токен",-1),me={class:"admin__system-footer animate__animated animate__fadeInUp d-7"};function ue(t,e,a,i,o,c){return(0,n.wg)(),(0,n.iD)("div",ht,[(0,n._)("div",wt,[yt,(0,n._)("div",bt,[gt,(0,n._)("label",ft,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>c.system.driver_info=t)},null,512),[[at.e8,c.system.driver_info]]),kt])]),(0,n._)("div",Ut,[Ct,(0,n._)("label",It,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=t=>c.system.auto_start=t)},null,512),[[at.e8,c.system.auto_start]]),Dt])]),(0,n._)("div",xt,[qt,(0,n.wy)((0,n._)("input",{min:"10000",class:"medium",type:"number","onUpdate:modelValue":e[2]||(e[2]=t=>c.system.delay_before_redirect_to_main_page=t)},null,512),[[at.nr,c.system.delay_before_redirect_to_main_page]])]),(0,n._)("div",Zt,[zt,(0,n.wy)((0,n._)("input",{min:"1000",class:"medium",type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>c.system.delay_before_retry_inspection=t)},null,512),[[at.nr,c.system.delay_before_retry_inspection]])])]),(0,n._)("div",Vt,[$t,(0,n._)("div",St,[Pt,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>c.system.camera_dimension=t)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.videoSizes,(t=>((0,n.wg)(),(0,n.iD)("option",{key:t,value:t},(0,s.zw)(t),9,Lt)))),128))],512),[[at.bM,c.system.camera_dimension]])]),(0,n._)("div",Rt,[Mt,(0,n._)("label",Xt,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>c.system.camera_video=t)},null,512),[[at.e8,c.system.camera_video]]),Tt])]),(0,n._)("div",jt,[Ft,(0,n._)("label",At,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=t=>c.system.camera_photo=t)},null,512),[[at.e8,c.system.camera_photo]]),Et])]),(0,n._)("div",Ht,[Qt,(0,n._)("label",Yt,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=t=>c.system.driver_photo=t)},null,512),[[at.e8,c.system.driver_photo]]),Bt])])]),(0,n._)("div",Kt,[Nt,(0,n._)("div",Ot,[Wt,(0,n._)("label",Gt,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=t=>c.system.printer_write=t)},null,512),[[at.e8,c.system.printer_write]]),Jt])]),(0,n._)("div",te,[ee,(0,n.wy)((0,n._)("input",{min:"1",class:"small",type:"number","onUpdate:modelValue":e[9]||(e[9]=t=>c.system.print_count=t)},null,512),[[at.nr,c.system.print_count]])]),(0,n._)("div",ae,[ne,(0,n._)("label",se,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=t=>c.system.print_qr_check=t)},null,512),[[at.e8,c.system.print_qr_check]]),ie])])]),(0,n._)("div",oe,[(0,n._)("div",ce,[(0,n.Uk)(" Настройки API "),(0,n._)("div",{class:(0,s.C_)(["connection-status",{active:c.connection}])},[(0,n._)("span",null,(0,s.zw)(c.connection),1)],2)]),(0,n._)("div",le,[de,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>c.connectionConfig.url=t)},null,512),[[at.nr,c.connectionConfig.url]])]),(0,n._)("div",_e,[re,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>c.connectionConfig.token=t)},null,512),[[at.nr,c.connectionConfig.token]])])]),(0,n._)("div",me,[(0,n._)("button",{onClick:e[13]||(e[13]=(...t)=>c.save&&c.save(...t)),class:"btn blue mr-2"},"Сохранить"),(0,n._)("button",{onClick:e[14]||(e[14]=(...t)=>c.sync&&c.sync(...t)),class:"btn blue"},"Получить настройки")])])}var pe=a(2227),ve={data(){return{toast:(0,G.pm)(),videoSizes:[]}},async mounted(){this.videoSizes=await(0,S.TQ)()},methods:{async save(){await(0,W.hR)(this.system),await(0,W.XP)(this.connectionConfig.url,this.connectionConfig.token),this.$store.state.point=await(0,pe.F8)(),this.toast.success("Настройки сохранены")},async sync(){await(0,W.Z$)(),this.toast.success("Настройки получены!")}},computed:{system(){return this.$store.state.config?.system||{}},config(){return this.$store.state.config?.main||{}},connectionConfig(){return this.$store.state.config?.connection||{}},connection(){return this.$store.state.connection||!1}}};const he=(0,T.Z)(ve,[["render",ue]]);var we=he;const ye={class:"admin__logo"},be={class:"input-file"},ge=(0,n._)("span",null,"Выберите файл",-1),fe={key:0,class:"preview-image"},ke=["src"];function Ue(t,e,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",ye,[(0,n._)("label",be,[(0,n._)("input",{type:"file",onChange:e[0]||(e[0]=(...t)=>o.onFileChange&&o.onFileChange(...t))},null,32),ge]),o.logo?((0,n.wg)(),(0,n.iD)("div",fe,[(0,n._)("img",{src:o.logo},null,8,ke),(0,n._)("button",{onClick:e[1]||(e[1]=(...t)=>o.deleteLogo&&o.deleteLogo(...t)),class:"btn small"},"Удалить")])):(0,n.kq)("",!0)])}var Ce={data(){return{toast:(0,G.pm)()}},methods:{async onFileChange(t){const e=t.target.files[0],a=await this.getBase64(e);this.$store.state.config.main.logo=a,await(0,pe.Sx)(a),this.toast.success("Логотип успешно установлен")},getBase64(t){return new Promise(((e,a)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>{e(n.result)},n.onerror=t=>{console.log("Error: ",t)}}))},async deleteLogo(){this.$store.state.config.main.logo="",await(0,pe.Sx)(""),this.toast.success("Логотип успешно удален")}},computed:{logo(){return this.$store.state.config?.main?.logo}}};const Ie=(0,T.Z)(Ce,[["render",Ue]]);var De=Ie,xe={components:{Testing:F,Password:vt,MainSettings:we,Logo:De,Tonometer:et},mounted(){(0,W.ri)()},unmounted(){(0,W.ri)()},data(){return{selected:"main"}}};const qe=(0,T.Z)(xe,[["render",c]]);var Ze=qe}}]);
//# sourceMappingURL=699.e9823550.js.map