"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[83],{2419:function(t,e,s){s.d(e,{NO:function(){return o},TQ:function(){return r},af:function(){return i},o:function(){return c}});var n=s(7625),a=s(4677);(0,a.pm)();async function i(){return await axios.post("device/photo").then((({data:t})=>t)).catch(l)}async function r(){return await axios.get("device/video/size").then((({data:t})=>t)).catch(l)}async function o(t){return await axios.post("device/media",{driver_id:t}).then((({data:t})=>t)).catch(l)}async function c(){return await axios.post("device/video/test").then((({data:t})=>t)).catch(l)}function l(t){t.response&&(n.Z.$state.loseConnect=!0),console.log(t)}},5564:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var n=s(3396),a=s(7139),i=s.p+"img/alco_guide.a6a48b74.png",r=s.p+"img/alco_guide_2.a5bbcd2d.png";const o={class:"step-5__outer"},c={class:"step-5"},l=(0,n._)("h3",{class:"animate__animated animate__fadeInDown"},"Проверка на алкоголь",-1),d={class:"step-5__items"},u=(0,n._)("div",{class:"step-5__item animate__animated animate__fadeInUp d-1"},[(0,n._)("span",null,"1"),(0,n._)("img",{style:{"padding-right":"20px"},width:"100",src:i}),(0,n.Uk)(" Проверьте, что вставлена воронка ")],-1),p=(0,n._)("div",{class:"step-5__item animate__animated animate__fadeInUp d-2"},[(0,n._)("span",null,"2"),(0,n._)("img",{width:"100",src:r}),(0,n.Uk)(" Держите алкотестер на расстоянии 2-3 см от рта ")],-1),_={class:"step-5__text animate__animated animate__fadeInUp d-2"},h=(0,n._)("br",null,null,-1),m=(0,n._)("br",null,null,-1),v=(0,n._)("br",null,null,-1),f=(0,n._)("br",null,null,-1),b=(0,n._)("br",null,null,-1),y=(0,n._)("p",{class:"alert red"},[(0,n._)("i",{class:"ri-alarm-warning-fill"}),(0,n.Uk)(" НЕ ПРИКАСАТЬСЯ К АЛКОТЕСТЕРУ ГУБАМИ ")],-1),g={class:"step-buttons"};function k(t,e,s,i,r,k){return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",c,[l,(0,n._)("div",d,[u,p,(0,n._)("div",_,[(0,n.Uk)(" Дождитесь ГОТОВ на экране алкометра"),h,m,(0,n.Uk)(" Начните дуть с умеренной силой до окончания"),v,(0,n.Uk)(" звукового сигнала."),f,b,(0,n.Uk)(" Дуйте "+(0,a.zw)(k.status),1)])]),y]),(0,n._)("div",g,[(0,n._)("button",{onClick:e[0]||(e[0]=t=>k.prevStep()),class:"btn opacity blue"},"Назад"),JSON.parse(k.system.alcometer_skip)?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e[1]||(e[1]=t=>k.nextStep()),class:"btn"},"Продолжить")):(0,n.kq)("",!0)])])}s(7658);var w=s(6700),I=s(2419),x={data(){return{interval:null,seconds:5}},methods:{async saveWebCam(){if(JSON.parse(this.system.camera_photo)&&!this.inspection.photo||JSON.parse(this.system.camera_video)&&!this.inspection.video){const t=await(0,I.NO)(this.$store.state.inspection.driver_id);this.inspection.photo=t?.photo,this.inspection.video=t?.video}},async nextStep(){this.$router.push({name:"step-sleep"})},async prevStep(){this.$router.push({name:"step-thermometer"})}},async mounted(){this.saveWebCam(),this.timerInterval=setInterval((()=>{this.seconds--,this.seconds<1&&clearInterval(this.timerInterval)}),1e3),this.requestInterval=setInterval((async()=>{const t=await(0,w.p)();void 0!==t&&null!==t&&"next"!==t&&"retry"!==t&&(this.inspection.alcometer_result=Number(t)||0,this.nextStep())}),1e3)},unmounted(){clearInterval(this.requestInterval),clearInterval(this.timerInterval)},computed:{inspection(){return this.$store.state.inspection},system(){return this.$store.state.config?.system||{}},status(){return 5==this.seconds?"через "+this.seconds+" секунд":1==this.seconds?"через "+this.seconds+" секунду":this.seconds<1?" прямо сейчас!":"через "+this.seconds+" секунды"}}},U=s(89);const S=(0,U.Z)(x,[["render",k]]);var C=S}}]);
//# sourceMappingURL=83.06fc7d43.js.map