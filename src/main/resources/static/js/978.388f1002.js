"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[978],{8791:function(t,e,a){a.d(e,{Eq:function(){return s},SX:function(){return o}});var n=a.p+"media/alert.1cca9e8e.ogg",i=a(7625);function s(){new Audio(n).play()}async function o(){await r();let t=5;i.Z.state.waitRecordMedia=!0,i.Z.state.timerRecordMedia=setInterval((()=>{t--,console.log("осталось "+t),t<1&&r()}),1e3)}async function r(){i.Z.state.waitRecordMedia&&(i.Z.state.waitRecordMedia=!1,await clearInterval(i.Z.state.timerRecordMedia))}},5511:function(t,e,a){a.d(e,{Z:function(){return c}});var n=a(3396);const i={key:0,class:"admin__loading animate__animated animate__fadeInUp",style:{"z-index":"3"}},s=(0,n._)("div",{class:"lds-ring"},[(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div")],-1);function o(t,e,a,o,r,l){return a.loading?((0,n.wg)(),(0,n.iD)("div",i,[s,(0,n.Uk)(" Загрузка ")])):(0,n.kq)("",!0)}var r={props:{loading:{type:Boolean,default:!1}}},l=a(89);const d=(0,l.Z)(r,[["render",o]]);var c=d},5530:function(t,e,a){a.r(e),a.d(e,{default:function(){return B}});a(7658);var n=a(3396),i=a(7139);const s={key:0,class:"step-result"},o=(0,n._)("h3",{class:"animate__animated animate__fadeInDown"},"Результаты осмотра",-1),r={class:"step-result__cards"},l={key:0,class:"step-result__card animate__animated animate__fadeInUp d-1"},d=(0,n._)("span",null,"Давление",-1),c={key:1,class:"step-result__card animate__animated animate__fadeInUp d-2"},_=(0,n._)("span",null,"Пульс",-1),u={key:2,class:"step-result__card animate__animated animate__fadeInUp d-2"},m=(0,n._)("span",null,"Количество промилле",-1),p={key:3,class:"step-result__card animate__animated animate__fadeInUp d-2"},y=(0,n._)("span",null,"Температура тела",-1),h={key:4,class:"step-result__card animate__animated animate__fadeInUp d-2"},w=(0,n._)("span",null,"Сонливость",-1),v={key:5,class:"step-result__card animate__animated animate__fadeInUp d-2"},g=(0,n._)("span",null,"Самочувствие",-1),k={class:"step-result__footer"},f={class:"step-result__text animate__animated animate__fadeInUp"},b=(0,n._)("br",null,null,-1),R={key:0,class:"animate__animated animate__fadeInUp"},U={class:"step-result__buttons"};function I(t,e,a,I,q,D){const P=(0,n.up)("loader"),C=(0,n.up)("result-repeat");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(P,{loading:q.loading,"onUpdate:loading":e[0]||(e[0]=t=>q.loading=t)},null,8,["loading"]),(0,n.Wm)(C,{visible:D.showRetryModal,"onUpdate:visible":e[1]||(e[1]=t=>D.showRetryModal=t),"message-content":D.getComment,"onUpdate:messageContent":e[2]||(e[2]=t=>D.getComment=t),onAccept:e[3]||(e[3]=t=>D.redirectRepeat())},null,8,["visible","message-content"]),q.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",s,[o,(0,n._)("div",r,[D.system.tonometer_visible?((0,n.wg)(),(0,n.iD)("div",l,[d,(0,n.Uk)(" "+(0,i.zw)(D.inspection.hasOwnProperty("tonometer")?D.inspection.tonometer:"Неизвестно"),1)])):(0,n.kq)("",!0),D.system.tonometer_visible?((0,n.wg)(),(0,n.iD)("div",c,[_,(0,n.Uk)(" "+(0,i.zw)(D.inspection.hasOwnProperty("pulse")?D.inspection.pulse:"Неизвестно"),1)])):(0,n.kq)("",!0),D.system.alcometer_visible?((0,n.wg)(),(0,n.iD)("div",u,[m,(0,n.Uk)(" "+(0,i.zw)(D.inspection.hasOwnProperty("alcometer_result")?D.inspection.alcometer_result+" ‰":"Неизвестно"),1)])):(0,n.kq)("",!0),D.system.thermometer_visible?((0,n.wg)(),(0,n.iD)("div",p,[y,(0,n.Uk)(" "+(0,i.zw)(D.inspection.hasOwnProperty("t_people")?D.inspection.t_people+" °C":"Неизвестно"),1)])):(0,n.kq)("",!0),D.system.question_sleep?((0,n.wg)(),(0,n.iD)("div",h,[w,(0,n.Uk)(" "+(0,i.zw)(D.inspection.hasOwnProperty("sleep_status")?D.getSleepStatus(D.inspection.sleep_status):"Неизвестно"),1)])):(0,n.kq)("",!0),D.system.question_helth?((0,n.wg)(),(0,n.iD)("div",v,[g,(0,n.Uk)(" "+(0,i.zw)(D.inspection.hasOwnProperty("people_status")?D.getPeopleStatus(D.inspection.people_status):"Неизвестно"),1)])):(0,n.kq)("",!0)]),(0,n._)("div",k,[(0,n._)("span",f,[(0,n.Uk)((0,i.zw)(q.result.admitted||"ожидание ответа"),1),b,"Допущен"===q.result.admitted?((0,n.wg)(),(0,n.iD)("p",R," Счастливого пути! ")):(0,n.kq)("",!0)]),(0,n._)("div",U,[(0,n._)("button",{onClick:e[4]||(e[4]=e=>t.$router.push("/")),class:"btn blue animate__animated animate__fadeInUp"},"В начало"),this.admitted&&this.canRetryPrint?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e[5]||(e[5]=t=>D.replayPrint()),class:"btn opacity animate__animated animate__fadeInUp"},"Повтор печати ")):(0,n.kq)("",!0),D.connection&&this.admitted&&this.canRetryPrintQR?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:e[6]||(e[6]=t=>D.replayPrintQr()),class:"btn opacity animate__animated animate__fadeInUp"},"Повтор печати QR ")):(0,n.kq)("",!0)])])]))],64)}var q=a(6509);const D={key:1,class:"approval animate__animated animate__fadeInRight"},P=(0,n._)("div",{class:"not-identify__title"},[(0,n._)("h3",null,"Не идентифицирован")],-1),C={class:"approval__content"},M={class:"not-identify__content"};function $(t,e,a,s,o,r){return(0,n.wg)(),(0,n.iD)(n.HY,null,[a.visible?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:e[0]||(e[0]=(...t)=>r.closeModal&&r.closeModal(...t)),class:"medics__overlay animate__animated animate__fadeIn"})):(0,n.kq)("",!0),a.visible?((0,n.wg)(),(0,n.iD)("div",D,[P,(0,n._)("div",C,[(0,n._)("div",M,(0,i.zw)(this.messageContent),1),(0,n._)("button",{onClick:e[1]||(e[1]=(...t)=>r.accept&&r.accept(...t)),class:"btn approval__button-submit animate__animated animate__fadeInUp"},"В начало осмотра ")])])):(0,n.kq)("",!0)],64)}var S=a(8791),T={props:{visible:{type:Boolean,require:!0},messageContent:{type:String,require:!0,default:""}},methods:{closeModal(){this.$emit("close-modal")},accept(){this.closeModal(),this.$emit("accept")}},watch:{visible:function(t){t&&(0,S.Eq)()}}},Z=a(89);const z=(0,Z.Z)(T,[["render",$]]);var O=z,Q=a(5511),A=a(4457),H={components:{Loader:Q.Z,ResultRepeat:O},data(){return{backTimeout:null,result:{},conclusion:{admitted:"",comments:""},notIdentified:"Не идентифицирован",loading:!1}},async mounted(){this.$data.loading=!0;let t=this,e=async function(){t.$store.state.waitRecordMedia?setTimeout(e,1e3):(t.loading=!1,await t.save(),t.autoStart&&(t.backTimeout=t.setTimeoutAndRedirect()))};setTimeout(e,1e3)},unmounted(){clearTimeout(this.backTimeout)},methods:{getSleepStatus(t){return"Да"===t?"Выспались":"Не выспались"},getPeopleStatus(t){return"Да"===t?"Хорошее":"Плохое"},async save(){this.result=await(0,q._u)(),this.conclusion.admitted=this.result.admitted??"",this.conclusion.comments=this.result.comments??""},async replayPrint(){await(0,q.Jw)()},async replayPrintQr(){await(0,q.Cg)()},redirectHome(){"step-result"===this.$route.name&&this.$router.push("/")},redirectRepeat(){"step-result"===this.$route.name&&this.$router.push({name:"step-retry"})},setTimeoutAndRedirect(){return this.result.admitted===this.notIdentified?setTimeout(this.redirectRepeat,this.system.delay_before_retry_inspection):setTimeout(this.redirectHome,5e3)}},computed:{autoStart(){return this.system.auto_start},admitted(){return"Допущен"===this.result?.admitted},showRetryModal(){return this.result.admitted===this.notIdentified},getComment(){return this.result.comments??""},inspection(){return this.$store.state.inspection},system(){return this.$store.state.config?.system||{}},canRetryPrint(){return(0,A.Gw)("printer_write")},canRetryPrintQR(){return(0,A.Gw)("print_qr_check")},connection(){return this.$store.state.connection||!1}}};const x=(0,Z.Z)(H,[["render",I]]);var B=x}}]);
//# sourceMappingURL=978.388f1002.js.map