"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[550],{3550:function(t,s,i){i.r(s),i.d(s,{default:function(){return E}});var e=i(3396),n=i(7139),r=i(9242);const o={class:"home"},a={class:"driver-form"},d={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},_={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},c={class:"driver-form__input"},l={class:"number-buttons",ref:"numbers"},u=(0,e._)("i",{class:"ri-close-fill"},null,-1),m=[u],b=(0,e._)("i",{class:"ri-delete-back-line"},null,-1),v=[b],p={key:3,class:"driver-form__not-found animate__animated animate__fadeInUp"};function w(t,s,i,u,b,w){const h=(0,e.up)("medic-select");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(h),(0,e._)("div",o,[(0,e._)("div",a,[w.inspection.driver_fio?((0,e.wg)(),(0,e.iD)("div",d,(0,n.zw)(w.inspection.driver_fio),1)):((0,e.wg)(),(0,e.iD)("div",_," Введите ваш идентификатор ")),(0,e._)("div",c,[(0,e.wy)((0,e._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":s[0]||(s[0]=t=>b.driver_id=t),onInput:s[1]||(s[1]=(...t)=>w.checkDriver&&w.checkDriver(...t))},null,544),[[r.nr,b.driver_id]])]),(0,e._)("div",l,[(0,e._)("button",{class:"number-buttons__item",onClick:s[2]||(s[2]=t=>b.driver_id+="1")},"1"),(0,e._)("button",{class:"number-buttons__item",onClick:s[3]||(s[3]=t=>b.driver_id+="2")},"2"),(0,e._)("button",{class:"number-buttons__item",onClick:s[4]||(s[4]=t=>b.driver_id+="3")},"3"),(0,e._)("button",{class:"number-buttons__item",onClick:s[5]||(s[5]=t=>b.driver_id+="4")},"4"),(0,e._)("button",{class:"number-buttons__item",onClick:s[6]||(s[6]=t=>b.driver_id+="5")},"5"),(0,e._)("button",{class:"number-buttons__item",onClick:s[7]||(s[7]=t=>b.driver_id+="6")},"6"),(0,e._)("button",{class:"number-buttons__item",onClick:s[8]||(s[8]=t=>b.driver_id+="7")},"7"),(0,e._)("button",{class:"number-buttons__item",onClick:s[9]||(s[9]=t=>b.driver_id+="8")},"8"),(0,e._)("button",{class:"number-buttons__item",onClick:s[10]||(s[10]=t=>b.driver_id+="9")},"9"),(0,e._)("button",{class:"number-buttons__item",onClick:s[11]||(s[11]=t=>b.driver_id="")},m),(0,e._)("button",{class:"number-buttons__item",onClick:s[12]||(s[12]=t=>b.driver_id+="0")},"0"),(0,e._)("button",{class:"number-buttons__item",onClick:s[13]||(s[13]=t=>b.driver_id=b.driver_id.slice(0,-1))},v)],512),w.inspection.driver_id&&!b.error?((0,e.wg)(),(0,e.iD)("button",{key:2,onClick:s[14]||(s[14]=(...t)=>w.start&&w.start(...t)),class:"btn animate__animated animate__fadeInUp"},"начать осмотр")):b.error?((0,e.wg)(),(0,e.iD)("div",p,(0,n.zw)(b.error),1)):(0,e.kq)("",!0)])])],64)}i(7658);var h=i(6509),k=i(4677);const f={key:1,class:"medics animate__animated animate__fadeInRight"},g={key:0,class:"medics__form"},C=(0,e._)("div",{class:"login-form__title"}," Введите пароль ",-1),y={class:"login-form__input"},D={class:"number-buttons",ref:"numbers"},$=(0,e._)("i",{class:"ri-close-fill"},null,-1),I=[$],q=(0,e._)("i",{class:"ri-delete-back-line"},null,-1),z=[q],H={class:"medics__form-selected"},U={key:1,class:"medics__select"},Y={key:0,class:"medics__town"},L={class:"medics__point"},K=["onClick"];function M(t,s,i,o,a,d){return(0,e.wg)(),(0,e.iD)(e.HY,null,[d.visible?((0,e.wg)(),(0,e.iD)("div",{key:0,onClick:s[0]||(s[0]=s=>t.$store.state.selectingMedic=!1),class:"medics__overlay animate__animated animate__fadeIn"})):(0,e.kq)("",!0),d.visible?((0,e.wg)(),(0,e.iD)("div",f,["login"===a.status?((0,e.wg)(),(0,e.iD)("div",g,[C,(0,e._)("div",y,[(0,e.wy)((0,e._)("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>a.password=t)},null,512),[[r.nr,a.password]])]),(0,e._)("div",D,[(0,e._)("button",{class:"number-buttons__item",onClick:s[2]||(s[2]=t=>a.password+="1")},"1"),(0,e._)("button",{class:"number-buttons__item",onClick:s[3]||(s[3]=t=>a.password+="2")},"2"),(0,e._)("button",{class:"number-buttons__item",onClick:s[4]||(s[4]=t=>a.password+="3")},"3"),(0,e._)("button",{class:"number-buttons__item",onClick:s[5]||(s[5]=t=>a.password+="4")},"4"),(0,e._)("button",{class:"number-buttons__item",onClick:s[6]||(s[6]=t=>a.password+="5")},"5"),(0,e._)("button",{class:"number-buttons__item",onClick:s[7]||(s[7]=t=>a.password+="6")},"6"),(0,e._)("button",{class:"number-buttons__item",onClick:s[8]||(s[8]=t=>a.password+="7")},"7"),(0,e._)("button",{class:"number-buttons__item",onClick:s[9]||(s[9]=t=>a.password+="8")},"8"),(0,e._)("button",{class:"number-buttons__item",onClick:s[10]||(s[10]=t=>a.password+="9")},"9"),(0,e._)("button",{class:"number-buttons__item",onClick:s[11]||(s[11]=t=>a.password="")},I),(0,e._)("button",{class:"number-buttons__item",onClick:s[12]||(s[12]=t=>a.password+="0")},"0"),(0,e._)("button",{class:"number-buttons__item",onClick:s[13]||(s[13]=t=>a.password=a.password.slice(0,-1))},z)],512),(0,e._)("div",H,(0,n.zw)(d.medic.name||"Сотрудник не выбран"),1)])):((0,e.wg)(),(0,e.iD)("div",U,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.towns,((t,s)=>((0,e.wg)(),(0,e.iD)("div",{key:s},[t?((0,e.wg)(),(0,e.iD)("div",Y,(0,n.zw)(t),1)):(0,e.kq)("",!0),t?((0,e.wg)(!0),(0,e.iD)(e.HY,{key:1},(0,e.Ko)(a.medics[t],((t,s)=>((0,e.wg)(),(0,e.iD)("div",{key:s},[(0,e._)("div",L,(0,n.zw)(s),1),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t,(t=>((0,e.wg)(),(0,e.iD)("button",{key:t.id,class:"medics__item",onClick:s=>d.select(t)},(0,n.zw)(t.name),9,K)))),128))])))),128)):(0,e.kq)("",!0)])))),128))]))])):(0,e.kq)("",!0)],64)}var P={data(){return{medics:{},towns:[],status:"login",password:""}},async mounted(){this.medics=await(0,h.oP)(),this.towns=Object.keys(this.medics).sort()},methods:{login(){this.password===this.config?.medic_password&&(this.password="",this.status="select")},async select(t){this.$store.state.config.main.selected_medic={name:t.name,id:t.id,eds:t.eds},this.status="login",await(0,h.sl)(this.medic)}},computed:{medic(){return this.$store.state.config?.main?.selected_medic||{}},config(){return this.$store.state.config?.main},visible(){return this.$store.state.selectingMedic}},watch:{password:function(t){this.login()}}},S=i(89);const V=(0,S.Z)(P,[["render",M]]);var Z=V,j={name:"Home",components:{MedicSelect:Z},data(){return{driver_id:"",error:"",toast:(0,k.pm)(),loading:!1}},methods:{async start(){const t=await(0,h.L$)(this.driver_id);if(!t)return this.driver_id="",void this.toast.error("Водитель с указаным ID не найден");this.$store.state.inspection.driver_id=t.hash_id,this.$store.state.inspection.driver_fio=t.fio,this.$router.push({name:"step-driver"})},async checkDriver(){if(this.$store.state.inspection={},this.error=null,!(this.driver_id.length<6)){this.loading=!0;try{const t=await(0,h.L$)(this.driver_id);t?(this.$store.state.inspection.driver_id=t.hash_id,this.$store.state.inspection.driver_fio=t.fio,this.$store.state.driver=t,this.error=null):(this.$store.state.inspection={},this.error="Водитель не найден")}catch(t){console.log(t.response?.data?.message),this.error=t.response?.data?.message||"Неизвестная ошибка",this.$store.state.inspection={}}this.loading=!1}}},watch:{driver_id:function(t){this.checkDriver()}},computed:{config(){return this.$store.state.config},inspection(){return this.$store.state.inspection}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((t,s)=>{t.classList.add("animate__animated"),t.classList.add("animate__fadeInUp"),t.style.setProperty("animation-delay",.6+.05*s+"s")}))}};const A=(0,S.Z)(j,[["render",w]]);var E=A}}]);
//# sourceMappingURL=550.5a7d93ad.js.map