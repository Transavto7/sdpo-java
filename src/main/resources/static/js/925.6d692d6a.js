"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[925],{5925:function(e,s,i){i.r(s),i.d(s,{default:function(){return J}});var t=i(3396),n=i(7139),r=i(9242);const o={class:"home"},a={class:"driver-form"},l={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},d={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},_={class:"driver-form__input"},c={class:"number-buttons",ref:"numbers"},m=(0,t._)("i",{class:"ri-close-fill"},null,-1),u=[m],p=(0,t._)("i",{class:"ri-delete-back-line"},null,-1),v=[p],b={key:2,class:"login__approval-card animate__animated animate__fadeInUp"},k={key:4,class:"driver-form__not-found animate__animated animate__fadeInUp"};function h(e,s,i,m,p,h){const w=(0,t.up)("medic-select"),g=(0,t.up)("approval-modal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(w),(0,t.Wm)(g,{visible:p.visibleApprovalDoc,"onUpdate:visible":s[0]||(s[0]=e=>p.visibleApprovalDoc=e),onCloseModal:s[1]||(s[1]=e=>p.visibleApprovalDoc=!1)},null,8,["visible"]),(0,t._)("div",o,[(0,t._)("div",a,[h.inspection.driver_fio?((0,t.wg)(),(0,t.iD)("div",l,(0,n.zw)(h.inspection.driver_fio),1)):((0,t.wg)(),(0,t.iD)("div",d," Введите ваш идентификатор ")),(0,t._)("div",_,[(0,t.wy)((0,t._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":s[2]||(s[2]=e=>p.driver_id=e),onInput:s[3]||(s[3]=(...e)=>h.checkDriver&&h.checkDriver(...e))},null,544),[[r.nr,p.driver_id]])]),(0,t._)("div",c,[(0,t._)("button",{class:"number-buttons__item",onClick:s[4]||(s[4]=e=>p.driver_id+="1")},"1"),(0,t._)("button",{class:"number-buttons__item",onClick:s[5]||(s[5]=e=>p.driver_id+="2")},"2"),(0,t._)("button",{class:"number-buttons__item",onClick:s[6]||(s[6]=e=>p.driver_id+="3")},"3"),(0,t._)("button",{class:"number-buttons__item",onClick:s[7]||(s[7]=e=>p.driver_id+="4")},"4"),(0,t._)("button",{class:"number-buttons__item",onClick:s[8]||(s[8]=e=>p.driver_id+="5")},"5"),(0,t._)("button",{class:"number-buttons__item",onClick:s[9]||(s[9]=e=>p.driver_id+="6")},"6"),(0,t._)("button",{class:"number-buttons__item",onClick:s[10]||(s[10]=e=>p.driver_id+="7")},"7"),(0,t._)("button",{class:"number-buttons__item",onClick:s[11]||(s[11]=e=>p.driver_id+="8")},"8"),(0,t._)("button",{class:"number-buttons__item",onClick:s[12]||(s[12]=e=>p.driver_id+="9")},"9"),(0,t._)("button",{class:"number-buttons__item",onClick:s[13]||(s[13]=e=>p.driver_id="")},u),(0,t._)("button",{class:"number-buttons__item",onClick:s[14]||(s[14]=e=>p.driver_id+="0")},"0"),(0,t._)("button",{class:"number-buttons__item",onClick:s[15]||(s[15]=e=>p.driver_id=p.driver_id.slice(0,-1))},v)],512),h.hasDriver?((0,t.wg)(),(0,t.iD)("div",b,[(0,t.wy)((0,t._)("input",{type:"checkbox","onUpdate:modelValue":s[16]||(s[16]=e=>p.processingApproval=e)},null,512),[[r.e8,p.processingApproval]]),(0,t.Uk)(),(0,t._)("p",null,[(0,t.Uk)("Даю согласие на "),(0,t._)("ins",{onClick:s[17]||(s[17]=e=>p.visibleApprovalDoc=!0)}," обработку персональных данных ")])])):(0,t.kq)("",!0),h.hasDriver&&p.processingApproval?((0,t.wg)(),(0,t.iD)("button",{key:3,onClick:s[18]||(s[18]=(...e)=>h.start&&h.start(...e)),class:"btn animate__animated animate__fadeInUp"},"начать осмотр")):p.error?((0,t.wg)(),(0,t.iD)("div",k,(0,n.zw)(p.error),1)):(0,t.kq)("",!0)])])],64)}i(7658);var w=i(6509),g=i(4677);const f={key:1,class:"medics animate__animated animate__fadeInRight"},I={key:0,class:"medics__form"},D=(0,t._)("div",{class:"login-form__title"}," Введите пароль ",-1),L={class:"login-form__input"},y={class:"number-buttons",ref:"numbers"},C=(0,t._)("i",{class:"ri-close-fill"},null,-1),$=[C],A=(0,t._)("i",{class:"ri-delete-back-line"},null,-1),M=[A],q={class:"medics__form-selected"},U={key:1,class:"medics__select"},H={key:0,class:"medics__town"},V={class:"medics__point"},z=["onClick"];function P(e,s,i,o,a,l){return(0,t.wg)(),(0,t.iD)(t.HY,null,[l.visible?((0,t.wg)(),(0,t.iD)("div",{key:0,onClick:s[0]||(s[0]=s=>e.$store.state.selectingMedic=!1),class:"medics__overlay animate__animated animate__fadeIn"})):(0,t.kq)("",!0),l.visible?((0,t.wg)(),(0,t.iD)("div",f,["login"===a.status?((0,t.wg)(),(0,t.iD)("div",I,[D,(0,t._)("div",L,[(0,t.wy)((0,t._)("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>a.password=e)},null,512),[[r.nr,a.password]])]),(0,t._)("div",y,[(0,t._)("button",{class:"number-buttons__item",onClick:s[2]||(s[2]=e=>a.password+="1")},"1"),(0,t._)("button",{class:"number-buttons__item",onClick:s[3]||(s[3]=e=>a.password+="2")},"2"),(0,t._)("button",{class:"number-buttons__item",onClick:s[4]||(s[4]=e=>a.password+="3")},"3"),(0,t._)("button",{class:"number-buttons__item",onClick:s[5]||(s[5]=e=>a.password+="4")},"4"),(0,t._)("button",{class:"number-buttons__item",onClick:s[6]||(s[6]=e=>a.password+="5")},"5"),(0,t._)("button",{class:"number-buttons__item",onClick:s[7]||(s[7]=e=>a.password+="6")},"6"),(0,t._)("button",{class:"number-buttons__item",onClick:s[8]||(s[8]=e=>a.password+="7")},"7"),(0,t._)("button",{class:"number-buttons__item",onClick:s[9]||(s[9]=e=>a.password+="8")},"8"),(0,t._)("button",{class:"number-buttons__item",onClick:s[10]||(s[10]=e=>a.password+="9")},"9"),(0,t._)("button",{class:"number-buttons__item",onClick:s[11]||(s[11]=e=>a.password="")},$),(0,t._)("button",{class:"number-buttons__item",onClick:s[12]||(s[12]=e=>a.password+="0")},"0"),(0,t._)("button",{class:"number-buttons__item",onClick:s[13]||(s[13]=e=>a.password=a.password.slice(0,-1))},M)],512),(0,t._)("div",q,(0,n.zw)(l.medic.name||"Сотрудник не выбран"),1)])):((0,t.wg)(),(0,t.iD)("div",U,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.towns,((e,s)=>((0,t.wg)(),(0,t.iD)("div",{key:s},[e?((0,t.wg)(),(0,t.iD)("div",H,(0,n.zw)(e),1)):(0,t.kq)("",!0),e?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)(a.medics[e],((e,s)=>((0,t.wg)(),(0,t.iD)("div",{key:s},[(0,t._)("div",V,(0,n.zw)(s),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,(e=>((0,t.wg)(),(0,t.iD)("button",{key:e.id,class:"medics__item",onClick:s=>l.select(e)},(0,n.zw)(e.name),9,z)))),128))])))),128)):(0,t.kq)("",!0)])))),128))]))])):(0,t.kq)("",!0)],64)}var Y={data(){return{medics:{},towns:[],status:"login",password:""}},async mounted(){this.medics=await(0,w.oP)(),this.towns=Object.keys(this.medics).sort()},methods:{login(){this.password===this.config?.medic_password&&(this.password="",this.status="select")},async select(e){this.$store.state.config.main.selected_medic={name:e.name,id:e.id,eds:e.eds},this.status="login",await(0,w.sl)(this.medic)}},computed:{medic(){return this.$store.state.config?.main?.selected_medic||{}},config(){return this.$store.state.config?.main},visible(){return this.$store.state.selectingMedic}},watch:{password:function(e){this.login()}}},X=i(89);const K=(0,X.Z)(Y,[["render",P]]);var Z=K;const R={key:1,class:"approval animate__animated animate__fadeInRight"},S=(0,t._)("div",{class:"approval__title"}," Cогласие на обработку персональных данных ",-1),W=(0,t._)("div",{class:"approval__content"},[(0,t._)("div",null,' Что такое Lorem Ipsum? Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum. Что такое Lorem Ipsum? Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum. Что такое Lorem Ipsum? Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum. Что такое Lorem Ipsum? Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов. Lorem Ipsum не только успешно пережил без заметных изменений пять веков, но и перешагнул в электронный дизайн. Его популяризации в новое время послужили публикация листов Letraset с образцами Lorem Ipsum в 60-х годах и, в более недавнее время, программы электронной вёрстки типа Aldus PageMaker, в шаблонах которых используется Lorem Ipsum. ')],-1),j=[S,W];function x(e,s,i,n,r,o){return(0,t.wg)(),(0,t.iD)(t.HY,null,[i.visible?((0,t.wg)(),(0,t.iD)("div",{key:0,onClick:s[0]||(s[0]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"medics__overlay animate__animated animate__fadeIn"})):(0,t.kq)("",!0),i.visible?((0,t.wg)(),(0,t.iD)("div",R,j)):(0,t.kq)("",!0)],64)}var B={props:{visible:{type:Boolean,require:!0}},methods:{closeModal(){this.$emit("close-modal")}}};const E=(0,X.Z)(B,[["render",x]]);var O=E,F={name:"Home",components:{MedicSelect:Z,ApprovalModal:O},data(){return{driver_id:"",error:"",toast:(0,g.pm)(),loading:!1,processingApproval:!1,visibleApprovalDoc:!1}},methods:{async start(){const e=await(0,w.L$)(this.driver_id);if(!e)return this.driver_id="",void this.toast.error("Водитель с указаным ID не найден");this.$store.state.inspection.driver_id=e.hash_id,this.$store.state.inspection.driver_fio=e.fio,this.$router.push({name:"step-driver"})},async checkDriver(){if(this.$store.state.inspection={},this.error=null,!(this.driver_id.length<6)){this.loading=!0;try{const e=await(0,w.L$)(this.driver_id);e?(this.$store.state.inspection.driver_id=e.hash_id,this.$store.state.inspection.driver_fio=e.fio,this.$store.state.driver=e,this.error=null):(this.$store.state.inspection={},this.error="Водитель не найден")}catch(e){console.log(e.response?.data?.message),this.error=e.response?.data?.message||"Неизвестная ошибка",this.$store.state.inspection={}}this.loading=!1}}},watch:{driver_id:function(e){this.checkDriver(),this.hasDriver||(this.processingApproval=!1)}},computed:{config(){return this.$store.state.config},inspection(){return this.$store.state.inspection},hasDriver(){return this.inspection.driver_id&&!this.error}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((e,s)=>{e.classList.add("animate__animated"),e.classList.add("animate__fadeInUp"),e.style.setProperty("animation-delay",.6+.05*s+"s")}))}};const G=(0,X.Z)(F,[["render",h]]);var J=G}}]);
//# sourceMappingURL=925.6d692d6a.js.map