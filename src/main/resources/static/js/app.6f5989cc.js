(function(){"use strict";var e={6509:function(e,t,n){n.d(t,{F8:function(){return l},L$:function(){return r},Sx:function(){return d},_u:function(){return c},oP:function(){return p},oX:function(){return u},xv:function(){return m}});var i=n(7625),o=n(4311),a=n(4677);const s=(0,a.pm)();async function r(e){return await o.Z.post(`inspection/${e}`).then((({data:e})=>e?.data?.message)).catch(f)}async function c(e=i.Z.state.inspection){return i.Z.state.medic?.id&&(e.user_id=i.Z.state.medic.id),await o.Z.post("inspection/save",e).then((({data:e})=>e)).catch(f)}async function u(e){return await o.Z.post("api/check",{address:e}).then((({data:e})=>e)).catch((e=>{}))}async function l(){return await o.Z.get("api/pv").then((({data:e})=>e)).catch((e=>{console.log(e)}))}async function p(){return await o.Z.get("api/medics").then((({data:e})=>e)).catch((e=>{console.log(e)}))}async function m(){o.Z.post("exit").then((({data:e})=>{})).catch((e=>{console.log(e)})),window.location.reload()}async function d(e){return await o.Z.post("api/logo",{logo:e}).then((({data:e})=>e)).catch((e=>{console.log(e)}))}function f(e){const t=e.response?.data;if(t?.message)s.error(t.message);else switch(e?.response?.status){case 400:s.error("Ошибка авторизации запроса");default:s.error("Неизвестная ошибка запроса")}console.log(e)}},4457:function(e,t,n){n.d(t,{Tc:function(){return l},XP:function(){return u},hR:function(){return c},ri:function(){return s},vW:function(){return r}});var i=n(7625),o=n(4311),a=n(6509);async function s(){await o.Z.post("/setting/load").then((({data:e})=>{i.Z.state.config=e})).catch((e=>{console.log(e)})),i.Z.state.point=await(0,a.F8)()}async function r(e){await o.Z.post("/setting/password",{password:e}).catch((e=>{console.log(e)}))}async function c(e){await o.Z.post("/setting/system",e).catch((e=>{console.log(e)}))}async function u(e,t){await o.Z.post("/setting/api",{address:e,token:t}).catch((e=>{console.log(e)}))}async function l(e){await o.Z.post("/setting/tonometer",{address:e}).catch((e=>{console.log(e)}))}},6171:function(e,t,n){n(7658);var i=n(9242),o=n(3396),a=n(7139);const s={class:"footer"},r=(0,o._)("span",null,"СДПО 2.0.21",-1);function c(e,t,n,c,u,l){const p=(0,o.up)("navigation"),m=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(p),(0,o.Wm)(i.uT,{name:"fade"},{default:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1}),(0,o._)("div",s,[(0,o.Uk)((0,a.zw)(l.point||"Незвестный пункт выпуска")+" ",1),r])],64)}var u=n.p+"img/logo.957d00d6.png";const l={class:"nav"},p={class:"nav__logo animate__animated animate__fadeInDown"},m=["src"],d={key:1,src:u,alt:""},f={key:0,class:"nav__info animate__animated animate__fadeInDown"},h={key:1,class:"nav__buttons"},_={key:2,class:"nav__buttons"},v=(0,o._)("i",{class:"ri-fullscreen-line"},null,-1),g=[v],b={key:3,class:"nav__buttons"},y=(0,o._)("i",{class:"ri-tools-fill"},null,-1),w=[y],k={key:0,class:"step-progress animate__animated animate__fadeInDown"},Z=(0,o._)("i",{class:"ri-check-fill"},null,-1),D=[Z],O=(0,o._)("i",{class:"ri-check-fill"},null,-1),q=[O],N=(0,o._)("i",{class:"ri-check-fill"},null,-1),C=[N],x=(0,o._)("i",{class:"ri-check-fill"},null,-1),S=[x],E=(0,o._)("i",{class:"ri-check-fill"},null,-1),R=[E],$=(0,o._)("i",{class:"ri-check-fill"},null,-1),I=[$],j=(0,o._)("i",{class:"ri-check-fill"},null,-1),F=[j],P=(0,o._)("i",{class:"ri-check-fill"},null,-1),T=[P];function A(e,t,n,i,s,r){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o._)("div",p,[r.logo?((0,o.wg)(),(0,o.iD)("img",{key:0,src:r.logo,alt:""},null,8,m)):((0,o.wg)(),(0,o.iD)("img",d))]),r.currentRouter.includes("/step/")?((0,o.wg)(),(0,o.iD)("div",f,[(0,o.Uk)((0,a.zw)(r.inspection.driver_fio)+" ",1),(0,o._)("span",null,(0,a.zw)(r.inspection.driver_id),1)])):(0,o.kq)("",!0),["/help","/login"].includes(r.currentRouter)||r.currentRouter.includes("/step/")?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/")),class:"btn opacity blue animate__animated animate__fadeInDown d-1"},"В начало")])):r.currentRouter.includes("/admin")?((0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("button",{onClick:t[1]||(t[1]=e=>r.requestFullScreen()),class:"btn icon animate__animated animate__fadeInDown d-1"},g),(0,o._)("button",{onClick:t[2]||(t[2]=e=>r.close()),class:"btn opacity animate__animated animate__fadeInDown d-1"}," Закрыть "),(0,o._)("button",{onClick:t[3]||(t[3]=e=>r.logout()),class:"btn opacity blue animate__animated animate__fadeInDown d-2"},"Выйти")])):((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("button",{onClick:t[4]||(t[4]=e=>r.medic.selecting=!0),class:"btn opacity animate__animated animate__fadeInDown"},"Мед работник"),(0,o._)("button",{onClick:t[5]||(t[5]=t=>e.$router.push("/help")),class:"btn opacity animate__animated animate__fadeInDown d-2"},"Помощь"),(0,o._)("button",{onClick:t[6]||(t[6]=t=>e.$router.push("/login")),class:"btn icon animate__animated animate__fadeInDown d-3"},w)]))]),r.currentRouter.includes("/step/")?((0,o.wg)(),(0,o.iD)("div",k,[JSON.parse(r.system.driver_info)?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=1}])},D,2)):(0,o.kq)("",!0),JSON.parse(r.system.type_ride)?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=2}])},q,2)):(0,o.kq)("",!0),JSON.parse(r.system.tonometer_visible)?((0,o.wg)(),(0,o.iD)("div",{key:2,class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=3}])},C,2)):(0,o.kq)("",!0),JSON.parse(r.system.thermometer_visible)?((0,o.wg)(),(0,o.iD)("div",{key:3,class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=4}])},S,2)):(0,o.kq)("",!0),JSON.parse(r.system.alcometer_visible)?((0,o.wg)(),(0,o.iD)("div",{key:4,class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=5}])},R,2)):(0,o.kq)("",!0),JSON.parse(r.system.question_sleep)?((0,o.wg)(),(0,o.iD)("div",{key:5,class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=6}])},I,2)):(0,o.kq)("",!0),JSON.parse(r.system.question_helth)?((0,o.wg)(),(0,o.iD)("div",{key:6,class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=7}])},F,2)):(0,o.kq)("",!0),(0,o._)("div",{class:(0,a.C_)(["step-progress__item",{active:r.pageNumber>=8}])},T,2)])):(0,o.kq)("",!0)],64)}var J=n(6509),L={data(){return{}},methods:{close:J.xv,requestFullScreen(){document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},computed:{currentRouter(){return this.$route.path},pageNumber(){const e=this.$route.path.split("/");return e[e.length-1]},logout(){this.$store.state.admin=!1,this.$router.push("/")},system(){return this.$store.state.config?.system||{}},inspection(){return this.$store.state.inspection},medic(){return this.$store.state.medic},logo(){return this.$store.state.config?.main?.logo}}},z=n(89);const U=(0,z.Z)(L,[["render",A]]);var W=U,M={name:"App",components:{Navigation:W},computed:{point(){return this.$store.state.point}}};const B=(0,z.Z)(M,[["render",c]]);var X=B,Y=n(7625),H=n(4311),K=n(2483);const G=[{path:"",name:"home",component:()=>n.e(802).then(n.bind(n,802))},{path:"/help",component:()=>n.e(610).then(n.bind(n,6610))},{path:"/login",component:()=>n.e(820).then(n.bind(n,5820))},{path:"/admin",component:()=>n.e(664).then(n.bind(n,5664))},{path:"/step/1",component:()=>n.e(159).then(n.bind(n,4159)),name:"step-1",meta:{visible:"driver_info",next:"step-2",prev:"home",number:1}},{path:"/step/2",component:()=>n.e(806).then(n.bind(n,3806)),name:"step-2",meta:{visible:"type_ride",next:"step-3",prev:"step-1",number:2}},{path:"/step/3",component:()=>n.e(826).then(n.bind(n,5826)),name:"step-3",meta:{visible:"tonometer_visible",next:"step-4",prev:"step-2",number:3}},{path:"/step/4",component:()=>n.e(363).then(n.bind(n,3408)),name:"step-4",meta:{visible:"thermometer_visible",next:"step-5",prev:"step-3",number:4}},{path:"/step/5",component:()=>n.e(579).then(n.bind(n,6774)),name:"step-5",meta:{visible:"alcometer_visible",next:"step-6",prev:"step-4",number:5}},{path:"/step/6",component:()=>n.e(48).then(n.bind(n,1048)),name:"step-6",meta:{visible:"question_sleep",next:"step-7",prev:"step-5",number:6}},{path:"/step/7",component:()=>n.e(754).then(n.bind(n,9754)),name:"step-7",meta:{visible:"question_helth",next:"step-8",prev:"step-6",number:7}},{path:"/step/8",component:()=>n.e(486).then(n.bind(n,4486)),name:"step-8",meta:{next:"home",prev:"step-7",number:8}}];var Q=n(4677),V=(n(343),n(4457));H.Z.defaults.baseURL="http://localhost:8080/",window.axios=H.Z,(0,V.ri)();const ee=(0,K.p7)({history:(0,K.PO)(),routes:G,mode:"history",scrollBehavior(e,t,n){return n||{top:0,left:0}}});ee.beforeEach(((e,t,n)=>{if(e.path.includes("/step/")){if(!Y.Z.state.inspection?.driver_id)return ee.push({name:"home"});if(e.meta?.visible&&Y.Z.state.config?.system&&!JSON.parse(Y.Z.state.config.system[e.meta.visible]))return t.meta?.number>e.meta.number?ee.push({name:e.meta.prev}):ee.push({name:e.meta.next})}return e.path.includes("/admin/")&&!Y.Z.state.admin?ee.push({name:"home"}):("home"===e.name&&(Y.Z.state.inspection={}),n())})),setInterval((async()=>{Y.Z.state.config?.main?.url&&(Y.Z.state.connection=await(0,J.oX)(Y.Z.state.config.main.url))}),5e3),(0,i.ri)(X).use(Y.Z).use(Q.ZP,{position:"top-center",timeout:2500}).use(ee).mount("#app")},7625:function(e,t,n){var i=n(65),o=n(4677);const a=(0,o.pm)(),s=(0,i.MT)({state(){return{inspection:{},config:{},admin:!1,connection:!1,point:"",medic:{selecting:!1,id:null,name:null}}},getters:{url:e=>{if(e.config?.main?.url)return e.config.main.url;throw a.error("Ошибка конфигурации. URL адрес не указан."),new Error("Error configuration API url")}}});t["Z"]=s}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,a){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],o=e[l][1],a=e[l][2];for(var r=!0,c=0;c<i.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(r=!1,a<s&&(s=a));if(r){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[i,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{48:"6b2e28ae",159:"75460f80",363:"3bebe260",486:"a2fcb13a",579:"d8c3c18a",610:"a43daf7b",664:"0282246c",754:"ecbfc58b",802:"c8dee0fa",806:"955d3455",820:"65c58e25",826:"45429c0a"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="sdpo-frontend:";n.l=function(i,o,a,s){if(e[i])e[i].push(o);else{var r,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var p=u[l];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==t+a){r=p;break}}r||(c=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+a),r.src=i),e[i]=[o];var m=function(t,n){r.onerror=r.onload=null,clearTimeout(d);var o=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),c&&document.head.appendChild(r)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={143:0};n.f.j=function(t,i){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var a=new Promise((function(n,i){o=e[t]=[n,i]}));i.push(o[2]=a);var s=n.p+n.u(t),r=new Error,c=function(i){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",r.name="ChunkLoadError",r.type=a,r.request=s,o[1](r)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,s=i[0],r=i[1],c=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(c)var l=c(n)}for(t&&t(i);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(l)},i=self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(6171)}));i=n.O(i)})();
//# sourceMappingURL=app.6f5989cc.js.map