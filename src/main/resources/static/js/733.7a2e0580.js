"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[733],{1733:function(s,t,e){e.r(t),e.d(t,{default:function(){return hs}});var a=e(3396),n=e(7139);const o={class:"admin"},i={class:"admin__tabs"};function c(s,t,e,c,r,d){const l=(0,a.up)("testing"),u=(0,a.up)("tonometer"),_=(0,a.up)("password");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",i,[(0,a._)("button",{class:(0,n.C_)(["admin__tab",{active:"main"===r.selected}]),onClick:t[0]||(t[0]=s=>r.selected="main")}," Основные настройки ",2),(0,a._)("button",{class:(0,n.C_)(["admin__tab",{active:"password"===r.selected}]),onClick:t[1]||(t[1]=s=>r.selected="password")}," Настройки пароля ",2),(0,a._)("button",{class:(0,n.C_)(["admin__tab",{active:"tonometer"===r.selected}]),onClick:t[2]||(t[2]=s=>r.selected="tonometer")}," Настройки танометра ",2),(0,a._)("button",{class:(0,n.C_)(["admin__tab",{active:"testing"===r.selected}]),onClick:t[3]||(t[3]=s=>r.selected="testing")}," Тестирование ",2)]),"testing"===r.selected?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.kq)("",!0),"tonometer"===r.selected?((0,a.wg)(),(0,a.j4)(u,{key:1})):(0,a.kq)("",!0),"password"===r.selected?((0,a.wg)(),(0,a.j4)(_,{key:2})):(0,a.kq)("",!0)])}const r={class:"admin__testing"},d=["disabled"],l=["disabled"],u=["disabled"],_=["disabled"],m={key:0,class:"admin__loading"},w=(0,a._)("div",{class:"lds-ring"},[(0,a._)("div"),(0,a._)("div"),(0,a._)("div"),(0,a._)("div")],-1),p={key:1,class:"admin__testing-result"},b=["src"],h={key:1,class:"admin__testing-video"},v=(0,a._)("video",{autoplay:"autoplay",controls:""},[(0,a._)("source",{src:"http://localhost:8080/video",type:"video/mp4"})],-1),g=[v],k={key:2,class:"admin__testing-temp"},f=(0,a._)("span",null,"°C",-1);function y(s,t,e,o,i,c){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("button",{disabled:"loading"===i.show,onClick:t[0]||(t[0]=s=>c.photo()),class:"btn blue"},"Тестовый снимок",8,d),(0,a._)("button",{disabled:"loading"===i.show,onClick:t[1]||(t[1]=s=>c.video()),class:"btn blue"},"Тестовое видео",8,l),(0,a._)("button",{disabled:"loading"===i.show,onClick:t[2]||(t[2]=s=>c.thermometer()),class:"btn blue"},"Изерить температуру",8,u),(0,a._)("button",{disabled:"loading"===i.show,onClick:t[3]||(t[3]=s=>c.alcometer()),class:"btn blue"},"Тест алкоголя",8,_),"loading"===i.show?((0,a.wg)(),(0,a.iD)("div",m,[w,(0,a.Uk)(" Загрузка ")])):((0,a.wg)(),(0,a.iD)("div",p,["image"===i.show?((0,a.wg)(),(0,a.iD)("img",{key:0,src:"data:image/jpg;base64,"+i.image64},null,8,b)):(0,a.kq)("",!0),"video"===i.show?((0,a.wg)(),(0,a.iD)("div",h,g)):(0,a.kq)("",!0),"temp"===i.show?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Uk)((0,n.zw)(i.temp)+" ",1),f])):(0,a.kq)("",!0)]))])}e(7625);var C=e(4677);const D=(0,C.pm)();async function q(){return await axios.post("device/photo").then((({data:s})=>s)).catch(z)}async function x(){return await axios.post("device/video").then((({data:s})=>s)).catch(z)}function z(s){const t=s.response?.data;if(t?.message)D.error(t.message);else switch(s?.response?.status){case 400:D.error("Ошибка авторизации запроса");default:D.error("Неизвестная ошибка запроса")}console.log(s)}const I=(0,C.pm)();async function U(){return await axios.post("device/scan").then((({data:s})=>s)).catch((async()=>{await Z(5e3)}))}async function j(s){return await axios.post(`device/tonometer/${s}`).then((({data:s})=>s)).catch(P)}async function Z(s){return new Promise((t=>setTimeout(t,s)))}function P(s){const t=s.response?.data;if(t?.message)I.error(t.message);else switch(s?.response?.status){case 400:I.error("Ошибка авторизации запроса");default:I.error("Неизвестная ошибка запроса")}console.log(s)}const T=(0,C.pm)();async function L(){return await axios.post("device/thermometer").then((({data:s})=>s)).catch($)}function $(s){const t=s.response?.data;if(t?.message)T.error(t.message);else switch(s?.response?.status){case 400:T.error("Ошибка авторизации запроса");case 500:T.error("Ошибка сервера");default:T.error("Неизвестная ошибка запроса")}console.log(s)}const A=(0,C.pm)();async function E(){return await axios.post("device/alcometer").then((({data:s})=>s)).catch(H)}function H(s){const t=s.response?.data;if(t?.message)A.error(t.message);else switch(s?.response?.status){case 400:A.error("Ошибка авторизации запроса");case 500:A.error("Ошибка сервера");default:A.error("Неизвестная ошибка запроса")}console.log(s)}var K={data(){return{show:"",image64:null,temp:null,timeout:0,loading:!1}},methods:{async photo(){this.show="loading",this.image64=await q(),this.show="",this.image64&&(this.show="image")},async video(){this.show="loading";const s=await x();this.show="",s.duration&&(this.show="video")},async thermometer(){this.show="loading",this.temp=await L(),this.show="",this.temp&&(this.show="temp")},async alcometer(){await E()}}},S=e(89);const V=(0,S.Z)(K,[["render",y]]);var Y=V;const B={key:0,class:"admin__loading"},F=(0,a._)("div",{class:"lds-ring"},[(0,a._)("div"),(0,a._)("div"),(0,a._)("div"),(0,a._)("div")],-1),G={key:1,class:"admin__tonometer"},J={class:"admin__tonometer-card"},M=(0,a._)("div",{class:"admin__tonometer-card-title"}," Информация ",-1),N={class:"admin__tonometer-devices"},O=["onClick"];function Q(s,t,e,o,i,c){return i.result?((0,a.wg)(),(0,a.iD)("div",G,[(0,a._)("div",J,[M,(0,a._)("p",null,"Имя устройства: "+(0,n.zw)(i.result?.main?.name||"Неизвестное устройство"),1),(0,a._)("p",null,"Адрес устройства: "+(0,n.zw)(i.result?.main?.address||"Неизвестный адрес"),1),(0,a._)("p",null,"Подключенный тонометр: "+(0,n.zw)(i.connected||"-"),1)]),(0,a._)("div",N,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.result?.devices,(s=>((0,a.wg)(),(0,a.iD)("button",{class:"admin__tonometer-device",key:s.address,onClick:t=>c.connect(s.address)},(0,n.zw)(s.name||"Неизвестное устройство")+" - "+(0,n.zw)(s.address||"Неизвестный адрес"),9,O)))),128))])])):((0,a.wg)(),(0,a.iD)("div",B,[F,(0,a.Uk)(" Загрузка ")]))}var R={data(){return{result:null,connected:"",task:null}},methods:{async getDevices(){this.task=setInterval((async()=>{this.result=await U()}),1e3)},async connect(s){const t=await j(s);console.log(t)}},mounted(){this.getDevices()},unmounted(){clearInterval(this.task)}};const W=(0,S.Z)(R,[["render",Q]]);var X=W,ss=e(9242);const ts={class:"admin__password"},es={class:"password-form"},as=(0,a._)("div",{class:"password-form__title animate__animated animate__fadeInDown"}," Введите новый пароль ",-1),ns={class:"password-form__input animate__animated animate__fadeIn d-1"},os={class:"number-buttons",ref:"numbers"},is=(0,a._)("i",{class:"ri-close-fill"},null,-1),cs=[is],rs=(0,a._)("i",{class:"ri-delete-back-line"},null,-1),ds=[rs];function ls(s,t,e,n,o,i){return(0,a.wg)(),(0,a.iD)("div",ts,[(0,a._)("div",es,[as,(0,a._)("div",ns,[(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=s=>o.password=s)},null,512),[[ss.nr,o.password]])]),(0,a._)("div",os,[(0,a._)("button",{class:"number-buttons__item",onClick:t[1]||(t[1]=s=>o.password+="1")},"1"),(0,a._)("button",{class:"number-buttons__item",onClick:t[2]||(t[2]=s=>o.password+="2")},"2"),(0,a._)("button",{class:"number-buttons__item",onClick:t[3]||(t[3]=s=>o.password+="3")},"3"),(0,a._)("button",{class:"number-buttons__item",onClick:t[4]||(t[4]=s=>o.password+="4")},"4"),(0,a._)("button",{class:"number-buttons__item",onClick:t[5]||(t[5]=s=>o.password+="5")},"5"),(0,a._)("button",{class:"number-buttons__item",onClick:t[6]||(t[6]=s=>o.password+="6")},"6"),(0,a._)("button",{class:"number-buttons__item",onClick:t[7]||(t[7]=s=>o.password+="7")},"7"),(0,a._)("button",{class:"number-buttons__item",onClick:t[8]||(t[8]=s=>o.password+="8")},"8"),(0,a._)("button",{class:"number-buttons__item",onClick:t[9]||(t[9]=s=>o.password+="9")},"9"),(0,a._)("button",{class:"number-buttons__item",onClick:t[10]||(t[10]=s=>o.password="")},cs),(0,a._)("button",{class:"number-buttons__item",onClick:t[11]||(t[11]=s=>o.password+="0")},"0"),(0,a._)("button",{class:"number-buttons__item",onClick:t[12]||(t[12]=s=>o.password=o.password.slice(0,-1))},ds)],512),o.password.length>3?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[13]||(t[13]=(...s)=>i.save&&i.save(...s)),class:"btn animate__animated animate__fadeInUp"},"Сохранить")):(0,a.kq)("",!0)])])}var us=e(4457),_s={data(){return{password:"",toast:(0,C.pm)()}},methods:{async save(){await(0,us.v)(this.password),this.password="",this.toast.success("Пароль успешно изменен")}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((s,t)=>{s.classList.add("animate__animated"),s.classList.add("animate__fadeInUp"),s.style.setProperty("animation-delay",.2+.05*t+"s")}))}};const ms=(0,S.Z)(_s,[["render",ls]]);var ws=ms,ps={components:{Testing:Y,Tonometer:X,Password:ws},data(){return{selected:"main"}}};const bs=(0,S.Z)(ps,[["render",c]]);var hs=bs}}]);
//# sourceMappingURL=733.7a2e0580.js.map