"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[942],{4951:function(e,t,n){n.d(t,{J:function(){return r},V:function(){return l}});var a=n(7625),i=n(1076),s=n(1857),o=n(4677);(0,o.pm)();async function r(e){return await i.Z.post(`employees/inspection/${e}`).then((({data:e})=>e))}async function l(e=a.Z.state.inspection){return await i.Z.post("employees/inspection/save",e).then((({data:e})=>e)).catch(s.i)}},8791:function(e,t,n){n.d(t,{Eq:function(){return s},SX:function(){return o}});var a=n.p+"media/alert.1cca9e8e.ogg",i=n(7625);function s(){new Audio(a).play()}async function o(){await r();let e=5;i.Z.state.waitRecordMedia=!0,i.Z.state.timerRecordMedia=setInterval((()=>{e--,console.log("осталось "+e),e<1&&r()}),1e3)}async function r(){i.Z.state.waitRecordMedia&&(i.Z.state.waitRecordMedia=!1,await clearInterval(i.Z.state.timerRecordMedia))}},1387:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(3396),i=n(7139);const s={key:1,class:"approval animate__animated animate__fadeInRight"},o=(0,a._)("div",{class:"not-identify__title"},[(0,a._)("h3",null,"Не идентифицирован")],-1),r={class:"approval__content"},l={class:"not-identify__content"};function d(e,t,n,d,c,u){return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.visible?((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>u.closeModal&&u.closeModal(...e)),class:"medics__overlay animate__animated animate__fadeIn"})):(0,a.kq)("",!0),n.visible?((0,a.wg)(),(0,a.iD)("div",s,[o,(0,a._)("div",r,[(0,a._)("div",l,(0,i.zw)(this.messageContent),1),(0,a._)("button",{onClick:t[1]||(t[1]=(...e)=>u.accept&&u.accept(...e)),class:"btn approval__button-submit animate__animated animate__fadeInUp"},"В начало осмотра ")])])):(0,a.kq)("",!0)],64)}var c=n(8791),u={props:{visible:{type:Boolean,require:!0},messageContent:{type:String,require:!0,default:""}},methods:{closeModal(){this.$emit("close-modal")},accept(){this.closeModal(),this.$emit("accept")}},watch:{visible:function(e){e&&(0,c.Eq)()}}},_=n(89);const m=(0,_.Z)(u,[["render",d]]);var p=m},5511:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(3396);const i={key:0,class:"admin__loading animate__animated animate__fadeInUp",style:{"z-index":"3"}},s=(0,a._)("div",{class:"lds-ring"},[(0,a._)("div"),(0,a._)("div"),(0,a._)("div"),(0,a._)("div")],-1);function o(e,t,n,o,r,l){return n.loading?((0,a.wg)(),(0,a.iD)("div",i,[s,(0,a.Uk)(" Загрузка ")])):(0,a.kq)("",!0)}var r={props:{loading:{type:Boolean,default:!1}}},l=n(89);const d=(0,l.Z)(r,[["render",o]]);var c=d},1532:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});n(7658);var a=n(3396),i=n(7139);const s={style:{display:"flex"}},o={key:0,class:"step-result"},r={style:{"text-align":"center"}},l={class:"step-result__header_with_result animate__animated animate__fadeInDown"},d={class:"step-result__text animate__animated animate__fadeInUp"},c=(0,a._)("br",null,null,-1),u={class:"step-result__cards"},_={key:0,class:"step-result__card animate__animated animate__fadeInUp d-1"},m=(0,a._)("span",null,"Давление",-1),p={key:1,class:"step-result__card animate__animated animate__fadeInUp d-2"},h=(0,a._)("span",null,"Пульс",-1),y={key:2,class:"step-result__card animate__animated animate__fadeInUp d-2"},v=(0,a._)("span",null,"Количество промилле",-1),f={key:3,class:"step-result__card animate__animated animate__fadeInUp d-2"},w=(0,a._)("span",null,"Температура тела",-1),g={class:"step-result__footer"},k={class:"step-result__buttons"};function b(e,t,n,b,U,R){const I=(0,a.up)("loader"),Z=(0,a.up)("result-repeat");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(I,{loading:U.loading,"onUpdate:loading":t[0]||(t[0]=e=>U.loading=e)},null,8,["loading"]),(0,a.Wm)(Z,{visible:R.showRetryModal,"onUpdate:visible":t[1]||(t[1]=e=>R.showRetryModal=e),"message-content":R.getComment,"onUpdate:messageContent":t[2]||(t[2]=e=>R.getComment=e),onAccept:t[3]||(t[3]=e=>R.redirectRepeat())},null,8,["visible","message-content"]),(0,a._)("div",s,[U.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",r,[(0,a._)("h3",l,[(0,a.Uk)("Результаты осмотра: "),(0,a._)("span",d,[(0,a.Uk)((0,i.zw)(U.result.admitted||"ожидание ответа"),1),c])]),(0,a._)("div",u,[R.system.tonometer_visible&&R.inspection.hasOwnProperty("tonometer")?((0,a.wg)(),(0,a.iD)("div",_,[m,(0,a.Uk)(" "+(0,i.zw)(R.inspection.hasOwnProperty("tonometer")?R.inspection.tonometer:"Неизвестно"),1)])):(0,a.kq)("",!0),R.system.tonometer_visible&&R.inspection.hasOwnProperty("pulse")?((0,a.wg)(),(0,a.iD)("div",p,[h,(0,a.Uk)(" "+(0,i.zw)(R.inspection.hasOwnProperty("pulse")?R.inspection.pulse:"Неизвестно"),1)])):(0,a.kq)("",!0),R.system.alcometer_visible&&R.inspection.hasOwnProperty("alcometer_result")?((0,a.wg)(),(0,a.iD)("div",y,[v,(0,a.Uk)(" "+(0,i.zw)(R.inspection.hasOwnProperty("alcometer_result")?R.inspection.alcometer_result+" ‰":"Неизвестно"),1)])):(0,a.kq)("",!0),R.system.thermometer_visible&&R.inspection.hasOwnProperty("t_people")?((0,a.wg)(),(0,a.iD)("div",f,[w,(0,a.Uk)(" "+(0,i.zw)(R.inspection.hasOwnProperty("t_people")?R.inspection.t_people+" °C":"Неизвестно"),1)])):(0,a.kq)("",!0)])]),(0,a._)("div",g,[(0,a._)("div",k,[(0,a._)("button",{onClick:t[4]||(t[4]=t=>e.$router.push("/")),class:"btn blue animate__animated animate__fadeInUp"},"В начало")])])]))])],64)}var U=n(1387),R=n(5511),I=n(4951),Z={components:{Loader:R.Z,ResultRepeat:U.Z},data(){return{backTimeout:null,result:{},conclusion:{admitted:"",comments:""},notIdentified:"Не идентифицирован",loading:!1,feedback:null,phrase:""}},async mounted(){this.$data.loading=!0;let e=this,t=async function(){e.$store.state.waitRecordMedia?setTimeout(t,1e3):(e.loading=!1,await e.save(),e.autoStart&&(e.backTimeout=e.setTimeoutAndRedirect()))};setTimeout(t,1e3)},unmounted(){clearTimeout(this.backTimeout)},methods:{async save(){this.result=await(0,I.V)(),this.conclusion.admitted=this.result.admitted??"",this.conclusion.comments=this.result.comments??""},redirectHome(){"step-result-employee"===this.$route.name&&this.$router.push("/")},redirectRepeat(){"step-result-employee"===this.$route.name&&this.$router.push({name:"step-retry"})},setTimeoutAndRedirect(){return this.result.admitted===this.notIdentified?setTimeout(this.redirectRepeat,this.system.delay_before_retry_inspection):setTimeout(this.redirectHome,this.system.delay_before_redirect_to_main_page)}},computed:{autoStart(){return this.system.auto_start},admitted(){return"Допущен"===this.result?.admitted},showRetryModal(){return this.result.admitted===this.notIdentified},getComment(){return this.result.comments??""},inspection(){return this.$store.state.inspection},system(){return this.$store.state.config?.system||{}},connection(){return this.$store.state.connection||!1}}},M=n(89);const $=(0,M.Z)(Z,[["render",b]]);var q=$}}]);
//# sourceMappingURL=942.7b403d97.js.map