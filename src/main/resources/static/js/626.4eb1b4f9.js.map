{"version":3,"file":"js/626.4eb1b4f9.js","mappings":"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","sources":["webpack://sdpo-frontend/./src/helpers/camera.js","webpack://sdpo-frontend/./src/helpers/media.js","webpack://sdpo-frontend/./src/components/InputPhoneNumber.vue","webpack://sdpo-frontend/./src/components/InputPhoneNumber.vue?1225","webpack://sdpo-frontend/./src/components/common/Loader.vue","webpack://sdpo-frontend/./src/components/common/Loader.vue?f04c","webpack://sdpo-frontend/./src/pages/Home.vue","webpack://sdpo-frontend/./src/components/MedicSelect.vue","webpack://sdpo-frontend/./src/components/MedicSelect.vue?5be2","webpack://sdpo-frontend/./src/pages/Home.vue?b9ed","webpack://sdpo-frontend/./src/pages/driver/InputAndSavePhone.vue","webpack://sdpo-frontend/./src/pages/driver/InputAndSavePhone.vue?f03b"],"sourcesContent":["import {defaultError} from \"@/helpers/http-errors\";\nimport {startWaitTimerRecordMedia} from \"@/helpers/media\";\nimport store from \"@/store\";\n\nexport async function makePhoto() {\n    return await axios.post(`device/photo`).then(({ data }) => {\n        return data;\n    }).catch(defaultError);\n}\n\nexport async function getSizes() {\n    return await axios.get(`device/video/size`).then(({ data }) => {\n        return data;\n    }).catch(defaultError);\n}\n\n\nexport async function makeMedia(driver_id) {\n    return await axios.post(`device/media`, {\n        driver_id,\n    }).then(({data}) => {\n        return data;\n    }).catch(defaultError);\n}\n\nexport async function stopMedia() {\n    return await axios.post(`device/media/stop`).then(async ({data}) => {\n        store.state.temp.photo = store.state.inspection.photo;\n        store.state.temp.video = store.state.inspection.video;\n        await startWaitTimerRecordMedia()\n        return data;\n    }).catch(defaultError);\n}\n\nexport async function makeVideoTest() {\n    return await axios.post(`device/video/test`).then(({ data }) => {\n        return data;\n    }).catch(defaultError);\n}","import alertPath from \"@/assets/audio/alert.ogg\";\nimport store from \"@/store\";\n\nexport function playAlert() {\n    (new Audio(alertPath)).play();\n}\n\nexport async function startWaitTimerRecordMedia() {\n    await stopWaitTimerRecordMedia();\n    let seconds = 5;\n    store.state.waitRecordMedia = true\n\n    store.state.timerRecordMedia = setInterval(() => {\n        seconds--;\n        console.log('осталось ' + seconds)\n        if (seconds < 1) {\n            stopWaitTimerRecordMedia()\n        }\n    }, 1000);\n}\n\nexport async function stopWaitTimerRecordMedia() {\n    if (store.state.waitRecordMedia) {\n        store.state.waitRecordMedia = false\n        await clearInterval(store.state.timerRecordMedia);\n    }\n\n}","<script>\nimport InputNumber from \"@/components/InputNumber\";\n\nexport default {\n  name: \"InputPhoneNumber\",\n  components: {InputNumber},\n  props: {\n    maskInput: {\n      type: String,\n      default: () => {\n        return '+7 ... ... .. ..';\n      }\n    },\n    placeholder: {\n      type: String,\n      default: () => {\n        return '.'\n      }\n    }\n  },\n  data() {\n    return {\n      originNumber: '',\n      maskNumber: '',\n      mask: this.maskInput\n    }\n  },\n  methods: {\n    pushIntoNumber(char) {\n      if (!this.isMaxLengthReached()) {\n        if (!(this.originNumber.length === 0 && char === '8'))\n          this.originNumber += char;\n      }\n    },\n    popIntoNumber() {\n      this.originNumber = this.originNumber.slice(0, -1)\n    },\n    clearNumber() {\n      this.originNumber = '';\n    },\n\n    countOccurrences() {\n      let count = 0;\n      for (let i = 0; i < this.mask.length; i++) {\n        if (this.mask.charAt(i) === this.placeholder) {\n          count++;\n        }\n      }\n      return count;\n    },\n\n    isMaxLengthReached() {\n      return this.originNumber.length === this.countOccurrences();\n    },\n    replaceAt(string, index, replacement) {\n      return string.substr(0, index) + replacement + string.substr(index + replacement.length);\n    },\n    setMaskNumber() {\n      let tmpNumber = this.originNumber;\n      let resNumber = this.mask;\n      Array.from(tmpNumber).forEach(value => {\n        resNumber = this.replaceAt(resNumber, resNumber.indexOf('.'), value)\n      })\n      this.maskNumber = resNumber.split('.').join('');\n      this.$emit('acceptOn', this.maskNumber.split(' ').join(''));\n    }\n  },\n  watch: {\n    originNumber: function () {\n      this.setMaskNumber();\n    }\n  },\n  mounted() {\n    this.setMaskNumber()\n  }\n}\n</script>\n<template>\n  <div class=\"number-form\">\n      <div class=\"number-form__title animate__animated animate__fadeInDown d-2\">\n        Введите личный номер телефона\n      </div>\n      <div class=\"number-form__input\">\n        <input type=\"text\" class=\"animate__animated animate__fadeIn d-5\"\n               style=\"letter-spacing: 4px;\"\n               v-model=\"maskNumber\"/>\n      </div>\n\n      <input-number\n          @pushIntoNumber=\"(char) => pushIntoNumber(char)\"\n          @popIntoNumber=\"() => popIntoNumber()\"\n          @clearNumber=\"() => clearNumber()\"\n      />\n  </div>\n</template>\n","import { render } from \"./InputPhoneNumber.vue?vue&type=template&id=2bfaaf7f\"\nimport script from \"./InputPhoneNumber.vue?vue&type=script&lang=js\"\nexport * from \"./InputPhoneNumber.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nexport default {\n  props: {\n    loading: {\n      type: Boolean,\n      default: false,\n    }\n  },\n}\n</script>\n<template>\n  <div v-if=\"loading\" class=\"admin__loading animate__animated animate__fadeInUp\" style=\"z-index: 3\">\n    <div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n    Загрузка\n  </div>\n</template>\n","import { render } from \"./Loader.vue?vue&type=template&id=1380ac7d\"\nimport script from \"./Loader.vue?vue&type=script&lang=js\"\nexport * from \"./Loader.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport {getDriver, savePhone} from '@/helpers/api/api';\nimport {useToast} from \"vue-toastification\";\nimport MedicSelect from '@/components/MedicSelect.vue';\nimport InputPersonalNumberForm from \"@/components/InputPersonalNumberForm\";\nimport InputPhoneNumber from \"@/components/InputPhoneNumber\";\nimport InputAndSavePhone from \"@/pages/driver/InputAndSavePhone\";\nimport store from \"@/store\";\nimport {getSettings} from \"@/helpers/settings\";\nimport {makeMedia, stopMedia} from \"@/helpers/camera\";\n\nexport default {\n  name: 'Home',\n  components: {InputAndSavePhone, InputPhoneNumber, MedicSelect, InputPersonalNumberForm},\n  data() {\n    return {\n      driver_id: '',\n      error: '',\n      toast: useToast(),\n      loading: false,\n    }\n  },\n  methods: {\n    async start() {\n      const driver = await getDriver(this.driver_id);\n      if (!driver) {\n        this.driver_id = '';\n        this.toast.error('Водитель с указаным ID не найден');\n        return;\n      }\n\n      this.$store.state.videoRecording = true;\n      const data = await makeMedia(driver.hash_id);\n      this.$store.state.inspection.photo = data?.photo;\n      this.$store.state.inspection.video = data?.video;\n      console.log(\"start media\")\n\n      this.$store.state.inspection.driver_id = driver.hash_id;\n      this.$store.state.inspection.driver_fio = driver.fio;\n\n      // TODO сделать страницу подтверждения номера телефона\n      if (this.needSetNumberPhone) {\n        this.$router.push('/number-phone/add/')\n      } else {\n        this.$router.push({name: 'step-driver'});\n      }\n    },\n\n    updateDriverId(inputPassword) {\n      this.driver_id = inputPassword;\n    },\n\n    async checkDriver() {\n      this.$store.state.inspection = {};\n      this.error = null;\n\n      if (this.driver_id.length < 6) {\n        return;\n      }\n\n      this.loading = true;\n      try {\n        const driver = await getDriver(this.driver_id);\n        if (driver) {\n          this.$store.state.inspection.driver_id = driver.hash_id;\n          this.$store.state.inspection.driver_fio = driver.fio;\n          this.$store.state.driver = driver;\n          this.error = null;\n        } else {\n          this.$store.state.inspection = {};\n          this.error = 'Водитель не найден';\n        }\n      } catch (error) {\n        console.log(error.response?.data?.message);\n        this.error = error.response?.data?.message || 'Неизвестная ошибка';\n        this.$store.state.inspection = {};\n      }\n\n      this.loading = false;\n    }\n  },\n  watch: {\n    driver_id: function (val) {\n      this.checkDriver();\n    }\n  },\n  computed: {\n    terminalIsLocked() {\n      if (!store.state.connection) {\n        if (this.system.max_inspection_in_offline_mod - this.$store.state.config?.dynamic?.count_inspections <= 0) return true;\n\n        let lastOnline = this.$store.state.config?.dynamic?.last_online || new Date();\n        return (((new Date()) - Date.parse(lastOnline)) / 8.64e7 > this.system.delay_day_in_offline_mod)\n      }\n      return false;\n    },\n    terminalIsBlocked() {\n      return this.$store.state.config.main?.terminal_is_blocked;\n    },\n    system() {\n      return this.$store.state.config?.system || {};\n    },\n    config() {\n      return this.$store.state.config;\n    },\n    inspection() {\n      return this.$store.state.inspection;\n    },\n    hasDriver() {\n      return this.inspection.driver_id && !this.error\n    },\n    hasPhoneNumber() {\n      return this.$store.state.driver.phone && !this.error\n    },\n    needSetNumberPhone() {\n      return this.hasDriver\n          && !this.hasPhoneNumber\n          && store.state.connection !== undefined;\n    }\n  },\n  async mounted() {\n    await stopMedia();\n  }\n}\n</script>\n\n<template>\n  <medic-select/>\n  <div class=\"home\">\n    <div v-if=\"terminalIsLocked\" style=\"width: 100%; justify-content: center; display: flex\">\n      <div class=\"driver-form__not-found animate__animated animate__fadeInUp\">\n        Работа терминала приостановлена.\n        Проверьте подключение к интернету\n      </div>\n    </div>\n    <div v-else-if=\"terminalIsBlocked\" style=\"width: 100%; justify-content: center; display: flex\">\n      <div class=\"driver-form__not-found animate__animated animate__fadeInUp\">\n        Работа терминала заблокирована.\n        Обратитесь к администратору.\n      </div>\n    </div>\n    <div v-else class=\"driver-form\">\n      <div v-if=\"inspection.driver_fio\" class=\"driver-form__title animate__animated animate__fadeInDown d-2\">\n        {{ inspection.driver_fio }}\n      </div>\n      <div v-else class=\"driver-form__title animate__animated animate__fadeInDown d-2\">\n        Введите ваш идентификатор\n      </div>\n      <div class=\"driver-form__input\">\n        <input type=\"number\"\n               class=\"animate__animated animate__fadeIn d-5\"\n               v-model=\"driver_id\"\n               @input=\"checkDriver\"/>\n      </div>\n\n      <input-personal-number-form\n          @password=\" (inputPassword) => updateDriverId(inputPassword)\"\n      />\n      <button v-if=\"hasDriver\"\n              @click=\"start\"\n              class=\"btn animate__animated animate__fadeInUp\">\n        начать осмотр\n      </button>\n      <div v-else-if=\"error\"\n           class=\"driver-form__not-found animate__animated animate__fadeInUp\">{{ error }}\n      </div>\n    </div>\n  </div>\n</template>","<script>\nimport {getMedics, saveMedic} from '@/helpers/api/api';\nimport InputPersonalNumberForm from \"@/components/InputPersonalNumberForm\";\n\nexport default {\n  components: {InputPersonalNumberForm},\n\n  data() {\n    return {\n      medics: {},\n      towns: [],\n      status: \"login\",\n      password: '',\n    }\n  },\n  async mounted() {\n    this.medics = await getMedics();\n    this.towns = Object.keys(this.medics).sort();\n  },\n  methods: {\n    updatePassword(inputPassword) {\n        this.password = inputPassword;\n    },\n    login() {\n      if (this.password !== this.config?.medic_password) {\n        return;\n      }\n\n      this.password = '';\n      this.status = 'select';\n    },\n    async select(user) {\n      this.$store.state.config.main.selected_medic = {\n        name: user.name,\n        id: user.id,\n        eds: user.eds,\n        validity_eds_start: user.validity_eds_start ?? null,\n        validity_eds_end: user.validity_eds_end ?? null,\n      }\n\n      this.status = 'login';\n      await saveMedic(this.medic);\n    }\n  },\n  computed: {\n    medic() {\n      return this.$store.state.config?.main?.selected_medic || {};\n    },\n    config() {\n      return this.$store.state.config?.main;\n    },\n    visible() {\n      return this.$store.state.selectingMedic;\n    }\n  },\n  watch: {\n    password: function (val) {\n      this.login();\n    }\n  },\n}\n</script>\n\n<template>\n  <div v-if=\"visible\"\n       @click=\"$store.state.selectingMedic = false\"\n       class=\"medics__overlay animate__animated animate__fadeIn\">\n  </div>\n\n  <div v-if=\"visible\" class=\"medics animate__animated animate__fadeInRight\">\n    <div v-if=\"status === 'login'\" class=\"medics__form\">\n      <div class=\"login-form__title\">\n        Введите пароль\n      </div>\n\n      <div class=\"login-form__input\">\n        <input type=\"password\" v-model=\"password\"/>\n      </div>\n\n      <input-personal-number-form\n          @password=\" (inputPassword) => updatePassword(inputPassword)\"\n      />\n\n      <div class=\"medics__form-selected\">\n        {{ medic.name || 'Сотрудник не выбран' }}\n      </div>\n    </div>\n\n    <div v-else class=\"medics__select\">\n      <div v-for=\"(name, index) in towns\" :key=\"index\">\n        <div v-if=\"name\" class=\"medics__town\">\n          {{ name }}\n        </div>\n        <div v-if=\"name\" v-for=\"(point, name) in medics[name]\" :key=\"name\">\n          <div class=\"medics__point\">\n            {{ name }}\n          </div>\n\n          <button v-for=\"user in point\" :key=\"user.id\" class=\"medics__item\" @click=\"select(user)\">\n            {{ user.name }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>","import { render } from \"./MedicSelect.vue?vue&type=template&id=19305d96\"\nimport script from \"./MedicSelect.vue?vue&type=script&lang=js\"\nexport * from \"./MedicSelect.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Home.vue?vue&type=template&id=1f381c58\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport InputPhoneNumber from \"@/components/InputPhoneNumber\";\nimport Loader from \"@/components/common/Loader\";\nimport {savePhone} from '@/helpers/api/api';\n\nimport {useToast} from \"vue-toastification\";\n\n\nexport default {\n  name: \"InputAndSavePhone\",\n  components: {Loader, InputPhoneNumber},\n  data() {\n    return {\n      phoneNumber: '',\n      toast: useToast(),\n      loading: false,\n    }\n  },\n  methods: {\n    setPhoneNumber(phoneNumber) {\n      this.phoneNumber = phoneNumber;\n    },\n    formattingPhoneNumber() {\n      if (this.phoneNumber[0] === '+')\n        return this.phoneNumber.slice(1)\n      return this.phoneNumber\n    },\n    async storePhone() {\n      this.loading = true\n      await savePhone(this.formattingPhoneNumber(), this.$store.state.inspection.driver_id)\n      this.loading = false\n      this.$router.push({name: 'step-driver'});\n    }\n  },\n  computed: {\n    hasPhone() {\n      return this.phoneNumber.length === 12;\n    }\n  }\n}\n</script>\n<template>\n  <loader v-model:loading=\"loading\"/>\n  <div v-if=\"!this.loading\" class=\"input-save-phone\">\n    <input-phone-number\n        @acceptOn=\"(phoneNumber) => setPhoneNumber(phoneNumber)\"/>\n    <button v-if=\"hasPhone\" @click=\"storePhone()\" class=\"btn animate__animated animate__fadeInUp\">\n      Сохранить\n    </button>\n  </div>\n</template>\n\n<style scoped>\n\n</style>","import { render } from \"./InputAndSavePhone.vue?vue&type=template&id=05b0f260\"\nimport script from \"./InputAndSavePhone.vue?vue&type=script&lang=js\"\nexport * from \"./InputAndSavePhone.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/baarme/develop/java/sdpo-java/src/main/frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["async","makePhoto","axios","post","then","data","catch","defaultError","getSizes","get","makeMedia","driver_id","stopMedia","store","startWaitTimerRecordMedia","makeVideoTest","playAlert","Audio","alertPath","play","stopWaitTimerRecordMedia","seconds","setInterval","console","log","clearInterval","class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","type","style","$data","maskNumber","$event","_createVNode","_component_input_number","onPushIntoNumber","_cache","char","$options","pushIntoNumber","onPopIntoNumber","popIntoNumber","onClearNumber","clearNumber","name","components","InputNumber","props","maskInput","String","default","placeholder","originNumber","mask","this","methods","isMaxLengthReached","length","slice","countOccurrences","count","i","charAt","replaceAt","string","index","replacement","substr","setMaskNumber","tmpNumber","resNumber","Array","from","forEach","value","indexOf","split","join","$emit","watch","mounted","__exports__","render","$props","loading","Boolean","_hoisted_6","_component_medic_select","terminalIsLocked","_hoisted_4","terminalIsBlocked","_hoisted_5","_hoisted_7","_hoisted_8","inspection","driver_fio","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","onInput","args","checkDriver","_component_input_personal_number_form","onPassword","inputPassword","updateDriverId","hasDriver","onClick","start","error","_hoisted_12","visible","_ctx","$store","state","selectingMedic","status","password","updatePassword","medic","_Fragment","_renderList","towns","key","medics","point","user","id","select","InputPersonalNumberForm","getMedics","Object","keys","sort","login","config","medic_password","main","selected_medic","eds","validity_eds_start","validity_eds_end","saveMedic","computed","val","InputAndSavePhone","InputPhoneNumber","MedicSelect","toast","useToast","driver","getDriver","videoRecording","hash_id","photo","video","fio","needSetNumberPhone","$router","push","response","message","system","max_inspection_in_offline_mod","dynamic","count_inspections","lastOnline","last_online","Date","parse","delay_day_in_offline_mod","terminal_is_blocked","hasPhoneNumber","phone","undefined","_component_loader","_component_input_phone_number","onAcceptOn","phoneNumber","setPhoneNumber","hasPhone","storePhone","Loader","formattingPhoneNumber","savePhone"],"sourceRoot":""}