"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[886],{2136:function(t,n,e){e.d(n,{Z:function(){return h}});var s=e(3396);const i={class:"number-buttons",ref:"numbers"},r=(0,s._)("i",{class:"ri-close-fill"},null,-1),a=[r],o=(0,s._)("i",{class:"ri-delete-back-line"},null,-1),d=[o];function l(t,n,e,r,o,l){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("button",{class:"number-buttons__item",onClick:n[0]||(n[0]=t=>l.pushCharIntoPassword("1"))},"1"),(0,s._)("button",{class:"number-buttons__item",onClick:n[1]||(n[1]=t=>l.pushCharIntoPassword("2"))},"2"),(0,s._)("button",{class:"number-buttons__item",onClick:n[2]||(n[2]=t=>l.pushCharIntoPassword("3"))},"3"),(0,s._)("button",{class:"number-buttons__item",onClick:n[3]||(n[3]=t=>l.pushCharIntoPassword("4"))},"4"),(0,s._)("button",{class:"number-buttons__item",onClick:n[4]||(n[4]=t=>l.pushCharIntoPassword("5"))},"5"),(0,s._)("button",{class:"number-buttons__item",onClick:n[5]||(n[5]=t=>l.pushCharIntoPassword("6"))},"6"),(0,s._)("button",{class:"number-buttons__item",onClick:n[6]||(n[6]=t=>l.pushCharIntoPassword("7"))},"7"),(0,s._)("button",{class:"number-buttons__item",onClick:n[7]||(n[7]=t=>l.pushCharIntoPassword("8"))},"8"),(0,s._)("button",{class:"number-buttons__item",onClick:n[8]||(n[8]=t=>l.pushCharIntoPassword("9"))},"9"),(0,s._)("button",{class:"number-buttons__item",onClick:n[9]||(n[9]=t=>l.clearPassword())},a),(0,s._)("button",{class:"number-buttons__item",onClick:n[10]||(n[10]=t=>l.pushCharIntoPassword("0"))},"0"),(0,s._)("button",{class:"number-buttons__item",onClick:n[11]||(n[11]=t=>l.extractLastCharIntoPassword())},d)],512)}var u={data(){return{password:""}},methods:{pushCharIntoPassword(t){this.password+=t},extractLastCharIntoPassword(){this.password=this.password.slice(0,-1)},clearPassword(){this.password=""},emitPass(){this.$emit("password",this.password)}},watch:{password:function(){this.emitPass()}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((t,n)=>{t.classList.add("animate__animated"),t.classList.add("animate__fadeInUp"),t.style.setProperty("animation-delay",.6+.05*n+"s")}))}},c=e(89);const _=(0,c.Z)(u,[["render",l]]);var h=_},886:function(t,n,e){e.r(n),e.d(n,{default:function(){return Y}});var s=e(3396);function i(t,n,e,i,r,a){const o=(0,s.up)("print-login"),d=(0,s.up)("print-index"),l=(0,s.up)("loader");return(0,s.wg)(),(0,s.iD)(s.HY,null,[this.login?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(o,{key:0,onSuccessAuth:n[0]||(n[0]=t=>a.setDriver(t))})),this.login&&!this.hasQuery?((0,s.wg)(),(0,s.j4)(d,{key:1,onPrint:n[1]||(n[1]=t=>a.printQuery(t)),inspection:r.inspections,"onUpdate:inspection":n[2]||(n[2]=t=>r.inspections=t)},null,8,["inspection"])):(0,s.kq)("",!0),(0,s.Uk)(" /> "),(0,s.Wm)(l,{loading:r.loading,"onUpdate:loading":n[3]||(n[3]=t=>r.loading=t)},null,8,["loading"])],64)}var r=e(7139),a=e(9242);const o={class:"home"},d={class:"driver-form"},l={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},u={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},c={class:"driver-form__input"},_={key:2,class:"driver-form__not-found animate__animated animate__fadeInUp"};function h(t,n,e,i,h,m){const p=(0,s.up)("input-personal-number-form");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",d,[h.driver.driver_fio?((0,s.wg)(),(0,s.iD)("div",l,(0,r.zw)(h.driver.driver_fio),1)):((0,s.wg)(),(0,s.iD)("div",u," Введите ваш идентификатор ")),(0,s._)("div",c,[(0,s.wy)((0,s._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":n[0]||(n[0]=t=>h.driver_id=t),onInput:n[1]||(n[1]=(...t)=>m.checkDriver&&m.checkDriver(...t))},null,544),[[a.nr,h.driver_id]])]),(0,s.Wm)(p,{onPassword:n[2]||(n[2]=t=>m.updateDriverId(t))}),h.error?((0,s.wg)(),(0,s.iD)("div",_,(0,r.zw)(h.error),1)):(0,s.kq)("",!0)])])}var m=e(2136),p=e(6509),v=e(4677),w={components:{InputPersonalNumberForm:m.Z},data(){return{driver_id:"",driver:{},error:"",toast:(0,v.pm)(),loading:!1}},methods:{async start(){this.$emit("success-auth",this.driver.hash_id)},updateDriverId(t){this.driver_id=t},async checkDriver(){if(this.error=null,!(this.driver_id.length<6)){this.loading=!0;try{const t=await(0,p.L$)(this.driver_id);t?(this.driver=t,this.error=null,await this.start()):this.error="Водитель не найден"}catch(t){this.error=t.response?.data?.message||"Неизвестная ошибка"}this.loading=!1}}},watch:{driver_id:function(t){this.checkDriver(),this.hasDriver||(this.processingApproval=!1)}},computed:{config(){return this.$store.state.config},hasDriver(){return this.driver.driver_id&&!this.error}},mounted(){}},b=e(89);const f=(0,b.Z)(w,[["render",h]]);var I=f;const g={class:"last-inspection"},k={class:"last-inspection__header"},y={class:"last-inspection_body"},D={class:"content-block__calendar"},C={key:0,class:"content-block__table"},P=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Время"),(0,s._)("th",null,"Дата"),(0,s._)("th",null,"Тип осмотра"),(0,s._)("th")])],-1),q=(0,s._)("td",null,[(0,s._)("a",{class:"btn icon"},[(0,s._)("i",{class:"ri-printer-fill"})])],-1),U={key:1},L=(0,s._)("div",{class:"driver-form__not-found animate__animated animate__fadeInUp"},"Ранее осмотры не проводились",-1),x=[L];function Z(t,n,e,i,a,o){const d=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",k,[(0,s._)("h1",null,(0,r.zw)(a.name),1)]),(0,s._)("div",y,[(0,s._)("div",D,[(0,s.Wm)(d,{modelValue:a.date,"onUpdate:modelValue":n[0]||(n[0]=t=>a.date=t),inline:"","auto-apply":"","disable-year-select":!0,"disabled-times":"",locale:"ru","hide-navigation":["month","time","hours","seconds"],"min-date":o.firstDayLastMonth,"max-date":o.dateNow,"prevent-min-max-navigation":""},null,8,["modelValue","min-date","max-date"])]),o.hasInspections?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("table",null,[P,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.lastInspections,(t=>((0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,(0,r.zw)(t.time),1),(0,s._)("td",null,(0,r.zw)(t.date),1),(0,s._)("td",null,(0,r.zw)(t.type),1),q])))),256))])])])):(0,s.kq)("",!0),o.hasInspections?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",U,x))])])}var z=e(7190),V={name:"PrintIndex",components:{VueDatePicker:z.Z},data(){return{date:new Date,name:"Иванов Иван Иванович",lastInspections:[{time:"00:00:00",date:"01-02-2021 ",type:"Предрейсовый/предсменный"},{time:"00:00:00",date:"02-03-2022",type:"Предрейсовый/предсменный"},{time:"00:00:00",date:"03-04-2023",type:"Другой"}]}},methods:{print(t){}},watch:{},computed:{dateNow(){return new Date},firstDayLastMonth(){let t=new Date;return t.setMonth(t.getMonth()-1,1),t},hasInspections(){return this.lastInspections.length>0}},mounted(){}};const A=(0,b.Z)(V,[["render",Z]]);var R=A;const $={key:0,class:"admin__loading animate__animated animate__fadeInUp"},M=(0,s._)("div",{class:"lds-ring"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div"),(0,s._)("div")],-1);function Q(t,n,e,i,r,a){return e.loading?((0,s.wg)(),(0,s.iD)("div",$,[M,(0,s.Uk)(" Загрузка ")])):(0,s.kq)("",!0)}var N={props:{loading:{type:Boolean,default:!1}}};const W=(0,b.Z)(N,[["render",Q]]);var j=W,H={components:{Loader:j,PrintIndex:R,PrintLogin:I},data(){return{driverId:null,inspection:{},inspections:{},print:!1,driverIdRequest:null,errorAuthentication:!1,loading:!1}},methods:{getInspections(){},confirmPrint(){},printQuery(t){this.inspection=t},setDriver(t){this.driverId=t},setDriverIdRequest(t){this.driverIdRequest=t}},watch:{driverIdRequest:()=>{(void 0).errorAuthentication=(void 0).driverId!==(void 0).driverIdRequest},driverId:()=>{(void 0).getInspections()}},computed:{login(){return null!==this.driverId},hasQuery(){return!1}}};const S=(0,b.Z)(H,[["render",i]]);var Y=S}}]);
//# sourceMappingURL=886.0004969b.js.map