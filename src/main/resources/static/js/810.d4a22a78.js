"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[810],{4575:function(t,e,n){n.d(e,{S:function(){return s},g:function(){return r}});var a=n(1076),i=n(1857);async function s(){return await a.Z.post("device/printer").then((({data:t})=>t)).catch(i.i)}async function r(t,e){return await a.Z.post("/device/printer/qr",{driver:t,type:e}).then((({data:t})=>t)).catch(i.i)}},5511:function(t,e,n){n.d(e,{Z:function(){return l}});var a=n(3396);const i={key:0,class:"admin__loading animate__animated animate__fadeInUp",style:{"z-index":"3"}},s=(0,a._)("div",{class:"lds-ring"},[(0,a._)("div"),(0,a._)("div"),(0,a._)("div"),(0,a._)("div")],-1);function r(t,e,n,r,d,c){return n.loading?((0,a.wg)(),(0,a.iD)("div",i,[s,(0,a.Uk)(" Загрузка ")])):(0,a.kq)("",!0)}var d={props:{loading:{type:Boolean,default:!1}}},c=n(89);const o=(0,c.Z)(d,[["render",r]]);var l=o},9993:function(t,e,n){n.r(e),n.d(e,{default:function(){return z}});var a=n(3396);function i(t,e,n,i,s,r){const d=(0,a.up)("print-qr-login"),c=(0,a.up)("select-qr");return(0,a.wg)(),(0,a.iD)(a.HY,null,[this.visibleNumPad?((0,a.wg)(),(0,a.j4)(d,{key:0,type:this.selectTab,onSuccessAuth:e[0]||(e[0]=t=>r.print(t))},null,8,["type"])):(0,a.kq)("",!0),this.visibleNumPad?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:1,onSelect:e[1]||(e[1]=t=>r.setTab(t))}))],64)}n(7658);var s=n(5511),r=n(4677),d=n(4575),c=n(7139),o=n(9242);const l={class:"home"},u={class:"driver-form"},h={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},m={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},_={class:"driver-form__input"},p={key:3,class:"driver-form__not-found animate__animated animate__fadeInUp"};function v(t,e,n,i,s,r){const d=(0,a.up)("input-personal-number-form");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",u,[r.hasInstance?((0,a.wg)(),(0,a.iD)("div",h,(0,c.zw)(r.title),1)):((0,a.wg)(),(0,a.iD)("div",m," Введите ваш идентификатор ")),(0,a._)("div",_,[(0,a.wy)((0,a._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":e[0]||(e[0]=t=>s.hash_id=t)},null,512),[[o.nr,s.hash_id]])]),(0,a.Wm)(d,{onPassword:e[1]||(e[1]=t=>r.updateHashId(t))}),r.hasInstance?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:e[2]||(e[2]=(...t)=>r.start&&r.start(...t)),class:"btn animate__animated animate__fadeInUp"}," Печать ")):(0,a.kq)("",!0),s.error?((0,a.wg)(),(0,a.iD)("div",p,(0,c.zw)(s.error),1)):(0,a.kq)("",!0)])])}var f=n(9775),g=n(2227),w={name:"PrintQrNumPad",components:{InputPersonalNumberForm:f.Z},props:{type:String},data(){return{hash_id:"",instance:null,error:"",toast:(0,r.pm)(),loading:!1}},methods:{async start(){this.$emit("success-auth",this.instance.hash_id)},updateHashId(t){this.hash_id=t},async checkInstance(){if(this.error=null,this.instance=null,!(this.hash_id.length<6)){this.loading=!0;try{let t=null;switch(this.type){case"driverId":t=await(0,g.L$)(this.hash_id);break;case"carId":t=await(0,g.KO)(this.hash_id);break;default:return}t?(this.instance=t,this.error=null):this.error=("123"===this.instance?"Водитель":"Автомобиль")+" не найден"}catch(t){this.error=t.response?.data?.message||"Неизвестная ошибка"}this.loading=!1}}},watch:{hash_id:function(){this.checkInstance()}},computed:{title(){switch(this.type){case"driverId":return this.instance.fio;case"carId":return this.instance.gos_number;default:return}},hasInstance(){return null!==this.instance}}},b=n(89);const k=(0,b.Z)(w,[["render",v]]);var y=k,I=n.p+"img/busQR.cc984633.svg",D=n.p+"img/driverQR.1bd9383a.svg";const P={class:"print-selection"},Z=(0,a._)("img",{width:"300",src:I},null,-1),q=(0,a._)("label",{style:{"margin-top":"15px"}},"QR инспекции автомобиля",-1),N=[Z,q],Q={class:"tab"},T=(0,a._)("label",{style:{"margin-top":"15px"}},"QR осмотра водителя",-1);function U(t,e,n,i,s,r){return(0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("div",{class:"tab animate__animated animate__fadeInUp d-1",onClick:e[0]||(e[0]=t=>r.selectBus())},N),(0,a._)("div",Q,[(0,a._)("img",{width:"300",src:D,onClick:e[1]||(e[1]=t=>r.selectDriver())}),T])])}var C={methods:{selectBus(){this.$emit("select","carId")},selectDriver(){this.$emit("select","driverId")}}};const S=(0,b.Z)(C,[["render",U]]);var $=S,R={components:{SelectQr:$,PrintQrLogin:y,Loader:s.Z},data(){return{toast:(0,r.pm)(),loading:!1,visibleNumPad:!1,selectTab:""}},methods:{print(t){(0,d.g)(t,this.selectTab),this.toast.success("Задание на печать отправлено"),setTimeout((()=>{this.$router.push("/")}),5e3)},setTab(t){this.showNumPad(),this.selectTab=t},showNumPad(){this.visibleNumPad=!0}},computed:{login(){return null!==this.driver}}};const x=(0,b.Z)(R,[["render",i]]);var z=x}}]);
//# sourceMappingURL=810.d4a22a78.js.map