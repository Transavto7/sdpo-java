"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[806],{2419:function(e,t,a){a.d(t,{NO:function(){return d},QL:function(){return c},TQ:function(){return _},af:function(){return l},o:function(){return o}});var s=a(1857),n=a(8791),i=a(7625);async function l(){return await axios.post("device/photo").then((({data:e})=>e)).catch(s.i)}async function _(){return await axios.get("device/video/size").then((({data:e})=>e)).catch(s.i)}async function d(e){return await axios.post("device/media",{driver_id:e}).then((({data:e})=>e)).catch(s.i)}async function c(e){return await axios.post("device/media/stop",{driver_id:e}).then((async({data:e})=>(i.Z.state.temp.photo=i.Z.state.inspection.photo,i.Z.state.temp.video=i.Z.state.inspection.video,await(0,n.SX)(),e))).catch(s.i)}async function o(){return await axios.post("device/video/test").then((({data:e})=>e)).catch(s.i)}},8791:function(e,t,a){a.d(t,{Eq:function(){return i},SX:function(){return l}});var s=a.p+"media/alert.1cca9e8e.ogg",n=a(7625);function i(){new Audio(s).play()}async function l(){await _();let e=5;n.Z.state.waitRecordMedia=!0,n.Z.state.timerRecordMedia=setInterval((()=>{e--,console.log("осталось "+e),e<1&&_()}),1e3)}async function _(){n.Z.state.waitRecordMedia&&(n.Z.state.waitRecordMedia=!1,await clearInterval(n.Z.state.timerRecordMedia))}},4575:function(e,t,a){a.d(t,{S:function(){return i},g:function(){return l}});var s=a(4161),n=a(1857);async function i(){return await s.Z.post("device/printer").then((({data:e})=>e)).catch(n.i)}async function l(e,t){return await s.Z.post("/device/printer/qr",{driver:e,type:t}).then((({data:e})=>e)).catch(n.i)}},2756:function(e,t,a){a.d(t,{i:function(){return n}});var s=a(1857);async function n(){return await axios.post("device/thermometer").then((({data:e})=>e)).catch(s.i)}},5611:function(e,t,a){a.d(t,{Xi:function(){return _},lm:function(){return l},qb:function(){return i},vX:function(){return n}});var s=a(1857);async function n(){return await axios.post("device/tonometer").then((({data:e})=>e)).catch(s.i)}async function i(){return await axios.post("device/tonometer/disable").then((({data:e})=>e)).catch(s.i)}async function l(e="connect"){return await axios.post("device/tonometer/connect",{status:e}).then((({data:e})=>e)).catch(s.i)}async function _(){return await axios.post("device/scan").then((({data:e})=>e)).catch((e=>{console.log(e)}))}},3714:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ts}});var s=a(3396),n=a(7139);const i={class:"admin"},l={class:"admin__tabs"};function _(e,t,a,_,d,c){const o=(0,s.up)("testing"),r=(0,s.up)("tonometer"),m=(0,s.up)("password"),u=(0,s.up)("main-settings"),p=(0,s.up)("print"),h=(0,s.up)("queue-to-send"),v=(0,s.up)("logo");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",l,[(0,s._)("button",{class:(0,n.C_)(["admin__tab animate__animated animate__fadeInDown d-1",{active:"main"===d.selected}]),onClick:t[0]||(t[0]=e=>d.selected="main")}," Основные настройки ",2),(0,s._)("button",{class:(0,n.C_)(["admin__tab animate__animated animate__fadeInDown d-2",{active:"password"===d.selected}]),onClick:t[1]||(t[1]=e=>d.selected="password")}," Настройки пароля ",2),(0,s._)("button",{class:(0,n.C_)(["admin__tab animate__animated animate__fadeInDown d-3",{active:"tonometer"===d.selected}]),onClick:t[2]||(t[2]=e=>d.selected="tonometer")}," Настройки тонометра ",2),(0,s._)("button",{class:(0,n.C_)(["admin__tab animate__animated animate__fadeInDown d-4",{active:"print"===d.selected}]),onClick:t[3]||(t[3]=e=>d.selected="print")}," Настройка печати ",2),(0,s._)("button",{class:(0,n.C_)(["admin__tab animate__animated animate__fadeInDown d-3",{active:"logo"===d.selected}]),onClick:t[4]||(t[4]=e=>d.selected="logo")}," Смена логотипа ",2),(0,s._)("button",{class:(0,n.C_)(["admin__tab animate__animated animate__fadeInDown d-3",{active:"queue_to_send"===d.selected}]),onClick:t[5]||(t[5]=e=>d.selected="queue_to_send")}," Очередь на отправку ",2),(0,s._)("button",{class:(0,n.C_)(["admin__tab animate__animated animate__fadeInDown d-4",{active:"testing"===d.selected}]),onClick:t[6]||(t[6]=e=>d.selected="testing")}," Тестирование ",2)]),"testing"===d.selected?((0,s.wg)(),(0,s.j4)(o,{key:0})):(0,s.kq)("",!0),"tonometer"===d.selected?((0,s.wg)(),(0,s.j4)(r,{key:1})):(0,s.kq)("",!0),"password"===d.selected?((0,s.wg)(),(0,s.j4)(m,{key:2})):(0,s.kq)("",!0),"main"===d.selected?((0,s.wg)(),(0,s.j4)(u,{key:3})):(0,s.kq)("",!0),"print"===d.selected?((0,s.wg)(),(0,s.j4)(p,{key:4})):(0,s.kq)("",!0),"queue_to_send"===d.selected?((0,s.wg)(),(0,s.j4)(h,{key:5})):(0,s.kq)("",!0),"logo"===d.selected?((0,s.wg)(),(0,s.j4)(v,{key:6})):(0,s.kq)("",!0)])}const d={class:"admin__testing"},c=["disabled"],o=["disabled"],r=["disabled"],m=["disabled"],u=["disabled"],p=["disabled"],h={key:0,class:"admin__loading animate__animated animate__fadeInUp"},v=(0,s._)("div",{class:"lds-ring"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div"),(0,s._)("div")],-1),y={key:1,class:"admin__testing-result"},w=["src"],b={key:1,class:"admin__testing-video animate__animated animate__fadeInUp"},g=(0,s._)("video",{autoplay:"autoplay",controls:""},[(0,s._)("source",{src:"http://localhost:8080/video",type:"video/mp4"})],-1),f=[g],k={key:2,class:"admin__testing-temp animate__animated animate__fadeInUp"},U=(0,s._)("span",null,"°C",-1),I={key:3,class:"admin__testing-temp animate__animated animate__fadeInUp"},C={key:4,class:"admin__testing-pressure animate__animated animate__fadeInUp"},S={class:"admin__testing-pressure-item"},D=(0,s._)("span",null,"Систолическое давление",-1),x={class:"admin__testing-pressure-item"},q=(0,s._)("span",null,"Диастолическое давление",-1),V={class:"admin__testing-pressure-item"},z=(0,s._)("span",null,"Пульс",-1);function Z(e,t,a,i,l,_){return(0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("button",{disabled:"loading"===l.show,onClick:t[0]||(t[0]=e=>_.photo()),class:"btn blue tab animate__animated animate__fadeInUp"},"Тестовый снимок",8,c),(0,s._)("button",{disabled:"loading"===l.show,onClick:t[1]||(t[1]=e=>_.video()),class:"btn blue tab animate__animated animate__fadeInUp d-1"},"Тестовое видео",8,o),(0,s._)("button",{disabled:"loading"===l.show,onClick:t[2]||(t[2]=e=>_.thermometer()),class:"btn blue tab animate__animated animate__fadeInUp d-2"},"Тест пирометра",8,r),(0,s._)("button",{disabled:"loading"===l.show,onClick:t[3]||(t[3]=e=>_.alcometer()),class:"btn blue tab animate__animated animate__fadeInUp d-3"},"Тест алкометра",8,m),(0,s._)("button",{disabled:"loading"===l.show,onClick:t[4]||(t[4]=e=>_.printer()),class:"btn blue tab animate__animated animate__fadeInUp d-4"},"Тестовая печать",8,u),(0,s._)("button",{disabled:"loading"===l.show,onClick:t[5]||(t[5]=e=>_.tonometer()),class:"btn blue tab animate__animated animate__fadeInUp d-5"},"Тест тонометра",8,p),"loading"===l.show?((0,s.wg)(),(0,s.iD)("div",h,[v,(0,s.Uk)(" Загрузка ")])):((0,s.wg)(),(0,s.iD)("div",y,["image"===l.show?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"animate__animated animate__fadeInUp",src:l.image},null,8,w)):(0,s.kq)("",!0),"video"===l.show?((0,s.wg)(),(0,s.iD)("div",b,f)):(0,s.kq)("",!0),"temp"===l.show?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Uk)((0,n.zw)(l.temp)+" ",1),U])):(0,s.kq)("",!0),"alcometer"===l.show?((0,s.wg)(),(0,s.iD)("div",I,(0,n.zw)(void 0===l.alcometerPpm?"Не удалось получить результат":l.alcometerPpm+" ‰"),1)):(0,s.kq)("",!0),"pressure"===l.show?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("div",S,[D,(0,s.Uk)(" "+(0,n.zw)(l.pressure?.systolic?l.pressure.systolic+" мм. рт.ст":"Результатов нет"),1)]),(0,s._)("div",x,[q,(0,s.Uk)(" "+(0,n.zw)(l.pressure?.diastolic?l.pressure.diastolic+" мм. рт.ст":"Результатов нет"),1)]),(0,s._)("div",V,[z,(0,s.Uk)(" "+(0,n.zw)(l.pressure?.pulse?l.pressure.pulse+" уд/мин":"Результатов нет"),1)])])):(0,s.kq)("",!0)]))])}var $=a(2419),L=a(5611),P=a(2756),N=a(6700),M=a(4575),T={data(){return{show:"",image:null,video:null,temp:null,alcometerPpm:null,pressure:null,timeout:0,loading:!1,interval:null}},methods:{async photo(){this.show="loading",clearInterval(this.interval),this.image=await(0,$.af)(),this.show="",this.image&&setTimeout((()=>{this.show="image"}),2e3)},async video(){this.show="loading",clearInterval(this.interval),this.video=await(0,$.o)(),this.show="",this.video&&(this.show="video")},async thermometer(){this.show="loading",clearInterval(this.interval),this.interval=setInterval((async()=>{this.temp=await(0,P.i)(),"next"!==this.temp&&(this.show="temp",clearInterval(this.interval))}),1e3)},async alcometer(){this.show="loading",clearInterval(this.interval),this.interval=setInterval((async()=>{const e=await(0,N.pe)();"next"!==e&&(this.alcometerPpm=Number(e)||0,this.show="alcometer",clearInterval(this.interval))}),1e3)},async printer(){this.show="loading",this.alcometerPpm=await(0,M.S)(),this.show=""},async tonometer(){this.show="loading",clearInterval(this.interval),this.interval=setInterval((async()=>{const e=await(0,L.vX)();"next"!==e&&(this.pressure=e,clearInterval(this.interval),this.show="pressure")}),1e3)}}},F=a(89);const R=(0,F.Z)(T,[["render",Z]]);var X=R;const j={key:0,class:"admin__loading animate__animated animate__fadeInUp"},E=(0,s._)("div",{class:"lds-ring"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div"),(0,s._)("div")],-1),H={key:1,class:"admin__tonometer"},Y={class:"admin__tonometer-card animate__animated animate__fadeInUp d-1"},B=(0,s._)("div",{class:"admin__tonometer-card-title"}," Информация ",-1),Q=["disabled"],A={class:"admin__tonometer-devices animate__animated animate__fadeInUp d-3"},K=["disabled","onClick"];function O(e,t,a,i,l,_){return l.result?((0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("div",Y,[B,(0,s._)("p",null,"Подключенный тонометр: "+(0,n.zw)(_.config.main.tonometer_mac||"-"),1),(0,s._)("button",{disabled:l.connecting,class:(0,n.C_)([{red:l.connecting},"btn small blue"]),style:{width:"100%","margin-top":"10px"},onClick:t[0]||(t[0]=(...e)=>_.connect&&_.connect(...e))},"Подключить",10,Q)]),(0,s._)("div",A,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.result?.devices,(e=>((0,s.wg)(),(0,s.iD)("button",{class:"admin__tonometer-device",disabled:e.address===_.config.main.tonometer_mac,key:e.address,onClick:t=>_.save(e.address)},[(0,s.Uk)((0,n.zw)(e.address||"Неизвестный адрес")+" ",1),e.name?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)(" - "+(0,n.zw)(e.name),1)],64)):(0,s.kq)("",!0)],8,K)))),128))])])):((0,s.wg)(),(0,s.iD)("div",j,[E,(0,s.Uk)(" Загрузка ")]))}var W=a(4457),G=a(4677),J={data(){return{result:null,scan_task:null,connect_task:null,toast:(0,G.pm)(),connecting:!1}},computed:{config(){return this.$store.state.config}},methods:{async getDevices(){this.scan_task=setInterval((async()=>{this.result=await(0,L.Xi)()}),1e3)},async save(e){await(0,W.Tc)(e),this.config.main.tonometer_mac=e,this.toast.success("Настройки тонометра сохранены")},async connect(){this.connecting=!0,this.connect_task=setInterval((async()=>{let e=await(0,L.lm)();"set"===e&&(this.connected=!0,this.connecting=!1,this.config.main.tonometer_connect=!0,clearInterval(this.connect_task))}),1e3)}},mounted(){this.getDevices()},unmounted(){clearInterval(this.scan_task),clearInterval(this.connect_task),(0,L.lm)("stop")}};const ee=(0,F.Z)(J,[["render",O]]);var te=ee,ae=a(9242);const se={class:"admin__password"},ne={class:"password-form"},ie=(0,s._)("div",{class:"password-form__title animate__animated animate__fadeInDown"}," Введите новый пароль ",-1),le={class:"password-form__input animate__animated animate__fadeIn d-1"},_e={class:"number-buttons",ref:"numbers"},de=(0,s._)("i",{class:"ri-close-fill"},null,-1),ce=[de],oe=(0,s._)("i",{class:"ri-delete-back-line"},null,-1),re=[oe];function me(e,t,a,n,i,l){return(0,s.wg)(),(0,s.iD)("div",se,[(0,s._)("div",ne,[ie,(0,s._)("div",le,[(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=e=>i.password=e)},null,512),[[ae.nr,i.password]])]),(0,s._)("div",_e,[(0,s._)("button",{class:"number-buttons__item",onClick:t[1]||(t[1]=e=>i.password+="1")},"1"),(0,s._)("button",{class:"number-buttons__item",onClick:t[2]||(t[2]=e=>i.password+="2")},"2"),(0,s._)("button",{class:"number-buttons__item",onClick:t[3]||(t[3]=e=>i.password+="3")},"3"),(0,s._)("button",{class:"number-buttons__item",onClick:t[4]||(t[4]=e=>i.password+="4")},"4"),(0,s._)("button",{class:"number-buttons__item",onClick:t[5]||(t[5]=e=>i.password+="5")},"5"),(0,s._)("button",{class:"number-buttons__item",onClick:t[6]||(t[6]=e=>i.password+="6")},"6"),(0,s._)("button",{class:"number-buttons__item",onClick:t[7]||(t[7]=e=>i.password+="7")},"7"),(0,s._)("button",{class:"number-buttons__item",onClick:t[8]||(t[8]=e=>i.password+="8")},"8"),(0,s._)("button",{class:"number-buttons__item",onClick:t[9]||(t[9]=e=>i.password+="9")},"9"),(0,s._)("button",{class:"number-buttons__item",onClick:t[10]||(t[10]=e=>i.password="")},ce),(0,s._)("button",{class:"number-buttons__item",onClick:t[11]||(t[11]=e=>i.password+="0")},"0"),(0,s._)("button",{class:"number-buttons__item",onClick:t[12]||(t[12]=e=>i.password=i.password.slice(0,-1))},re)],512),i.password.length>3?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[13]||(t[13]=(...e)=>l.save&&l.save(...e)),class:"btn animate__animated animate__fadeInUp"},"Сохранить")):(0,s.kq)("",!0)])])}var ue={data(){return{password:"",toast:(0,G.pm)()}},methods:{async save(){await(0,W.vW)(this.password),this.password="",this.toast.success("Пароль успешно изменен"),this.$store.state.config.password=this.password}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((e,t)=>{e.classList.add("animate__animated"),e.classList.add("animate__fadeInUp"),e.style.setProperty("animation-delay",.2+.05*t+"s")}))}};const pe=(0,F.Z)(ue,[["render",me]]);var he=pe;const ve={class:"admin__system"},ye={class:"admin__system-card animate__animated animate__fadeInUp d-1"},we=(0,s._)("div",{class:"admin__system-card__title"}," Основные настройки ",-1),be={class:"admin__system-card__item"},ge=(0,s._)("span",null,"Информация о водителе",-1),fe={class:"switch"},ke=(0,s._)("div",{class:"slider round"},null,-1),Ue={class:"admin__system-card__item"},Ie=(0,s._)("span",null,"Проверять номер телефона",-1),Ce={class:"switch"},Se=(0,s._)("div",{class:"slider round"},null,-1),De={class:"admin__system-card__item"},xe=(0,s._)("span",null,"Тип осмотра",-1),qe={class:"switch"},Ve=(0,s._)("div",{class:"slider round"},null,-1),ze={class:"admin__system-card__item"},Ze=(0,s._)("span",null,"Вопрос о сне",-1),$e={class:"switch"},Le=(0,s._)("div",{class:"slider round"},null,-1),Pe={class:"admin__system-card__item"},Ne=(0,s._)("span",null,"вопрос о самочувствии",-1),Me={class:"switch"},Te=(0,s._)("div",{class:"slider round"},null,-1),Fe={class:"admin__system-card__item"},Re=(0,s._)("span",null,"Ручной режим",-1),Xe={class:"switch"},je=(0,s._)("div",{class:"slider round"},null,-1),Ee={class:"admin__system-card__item"},He=(0,s._)("span",null,"Переход в начало",-1),Ye={class:"switch"},Be=(0,s._)("div",{class:"slider round"},null,-1),Qe={class:"admin__system-card__item"},Ae=(0,s._)("span",null,[(0,s.Uk)("Задержка перехода "),(0,s._)("br"),(0,s.Uk)(" на начальный экран")],-1),Ke={class:"admin__system-card__item"},Oe=(0,s._)("span",null,[(0,s.Uk)("Задержка перед "),(0,s._)("br"),(0,s.Uk)(" повторным прохождением "),(0,s._)("br"),(0,s.Uk)(' при статусе "Не идентифицирован" '),(0,s._)("br"),(0,s.Uk)("(в миллисекундах)")],-1),We={class:"admin__system-card animate__animated animate__fadeInUp d-2"},Ge=(0,s._)("div",{class:"admin__system-card__title"}," Алкометр ",-1),Je={class:"admin__system-card__item"},et=(0,s._)("span",null,"Пропуск",-1),tt={class:"switch"},at=(0,s._)("div",{class:"slider round"},null,-1),st={class:"admin__system-card__item"},nt=(0,s._)("span",null,"включен",-1),it={class:"switch"},lt=(0,s._)("div",{class:"slider round"},null,-1),_t={class:"admin__system-card__item"},dt=(0,s._)("span",null,"Быстрый режим",-1),ct={class:"switch"},ot=(0,s._)("div",{class:"slider round"},null,-1),rt={class:"admin__system-card__item"},mt=(0,s._)("span",null,[(0,s.Uk)("Количественный замер "),(0,s._)("br"),(0,s.Uk)(" при положительном тесте")],-1),ut={class:"switch"},pt=(0,s._)("div",{class:"slider round"},null,-1),ht={class:"admin__system-card animate__animated animate__fadeInUp d-4"},vt=(0,s._)("div",{class:"admin__system-card__title"}," Камера ",-1),yt={class:"admin__system-card__item"},wt=(0,s._)("span",null,"Качество",-1),bt=["value"],gt={class:"admin__system-card__item"},ft=(0,s._)("span",null,"Видео",-1),kt={class:"switch"},Ut=(0,s._)("div",{class:"slider round"},null,-1),It={class:"admin__system-card__item"},Ct=(0,s._)("span",null,"Фото",-1),St={class:"switch"},Dt=(0,s._)("div",{class:"slider round"},null,-1),xt={class:"admin__system-card__item"},qt=(0,s._)("span",null,"Фото водителя",-1),Vt={class:"switch"},zt=(0,s._)("div",{class:"slider round"},null,-1),Zt={class:"admin__system-card animate__animated animate__fadeInUp d-5"},$t=(0,s._)("div",{class:"admin__system-card__title"}," Принтер ",-1),Lt={class:"admin__system-card__item"},Pt=(0,s._)("span",null,"Печать",-1),Nt={class:"switch"},Mt=(0,s._)("div",{class:"slider round"},null,-1),Tt={class:"admin__system-card__item"},Ft=(0,s._)("span",null,"Количество",-1),Rt={class:"admin__system-card__item"},Xt=(0,s._)("span",null,"Печать маркировки осмотра",-1),jt={class:"switch"},Et=(0,s._)("div",{class:"slider round"},null,-1),Ht={class:"admin__system-card animate__animated animate__fadeInUp d-3"},Yt=(0,s._)("div",{class:"admin__system-card__title"}," Тонометр ",-1),Bt={class:"admin__system-card__item"},Qt=(0,s._)("span",null,"Пропуск",-1),At={class:"switch"},Kt=(0,s._)("div",{class:"slider round"},null,-1),Ot={class:"admin__system-card__item"},Wt=(0,s._)("span",null,"включен",-1),Gt={class:"switch"},Jt=(0,s._)("div",{class:"slider round"},null,-1),ea={class:"admin__system-card animate__animated animate__fadeInUp d-6"},ta=(0,s._)("div",{class:"admin__system-card__title"}," Термометр ",-1),aa={class:"admin__system-card__item"},sa=(0,s._)("span",null,"Пропуск",-1),na={class:"switch"},ia=(0,s._)("div",{class:"slider round"},null,-1),la={class:"admin__system-card__item"},_a=(0,s._)("span",null,"включен",-1),da={class:"switch"},ca=(0,s._)("div",{class:"slider round"},null,-1),oa={class:"admin__system-card block animate__animated animate__fadeInUp d-6"},ra={class:"admin__system-card__title"},ma={class:"admin__system-card__item"},ua=(0,s._)("span",null,"Адрес",-1),pa={class:"admin__system-card__item"},ha=(0,s._)("span",null,"Токен",-1),va={class:"admin__system-footer animate__animated animate__fadeInUp d-7"};function ya(e,t,a,i,l,_){return(0,s.wg)(),(0,s.iD)("div",ve,[(0,s._)("div",ye,[we,(0,s._)("div",be,[ge,(0,s._)("label",fe,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>_.system.driver_info=e)},null,512),[[ae.e8,_.system.driver_info]]),ke])]),(0,s._)("div",Ue,[Ie,(0,s._)("label",Ce,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>_.system.check_phone_number=e)},null,512),[[ae.e8,_.system.check_phone_number]]),Se])]),(0,s._)("div",De,[xe,(0,s._)("label",qe,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>_.system.type_ride=e)},null,512),[[ae.e8,_.system.type_ride]]),Ve])]),(0,s._)("div",ze,[Ze,(0,s._)("label",$e,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>_.system.question_sleep=e)},null,512),[[ae.e8,_.system.question_sleep]]),Le])]),(0,s._)("div",Pe,[Ne,(0,s._)("label",Me,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>_.system.question_helth=e)},null,512),[[ae.e8,_.system.question_helth]]),Te])]),(0,s._)("div",Fe,[Re,(0,s._)("label",Xe,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>_.system.manual_mode=e)},null,512),[[ae.e8,_.system.manual_mode]]),je])]),(0,s._)("div",Ee,[He,(0,s._)("label",Ye,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>_.system.auto_start=e)},null,512),[[ae.e8,_.system.auto_start]]),Be])]),(0,s._)("div",Qe,[Ae,(0,s.wy)((0,s._)("input",{min:"10000",class:"medium",type:"number","onUpdate:modelValue":t[7]||(t[7]=e=>_.system.delay_before_redirect_to_main_page=e)},null,512),[[ae.nr,_.system.delay_before_redirect_to_main_page]])]),(0,s._)("div",Ke,[Oe,(0,s.wy)((0,s._)("input",{min:"1000",class:"medium",type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>_.system.delay_before_retry_inspection=e)},null,512),[[ae.nr,_.system.delay_before_retry_inspection]])])]),(0,s._)("div",We,[Ge,(0,s._)("div",Je,[et,(0,s._)("label",tt,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>_.system.alcometer_skip=e)},null,512),[[ae.e8,_.system.alcometer_skip]]),at])]),(0,s._)("div",st,[nt,(0,s._)("label",it,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>_.system.alcometer_visible=e)},null,512),[[ae.e8,_.system.alcometer_visible]]),lt])]),(0,s._)("div",_t,[dt,(0,s._)("label",ct,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=e=>_.system.alcometer_fast=e)},null,512),[[ae.e8,_.system.alcometer_fast]]),ot])]),(0,s._)("div",rt,[mt,(0,s._)("label",ut,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>_.system.alcometer_retry=e)},null,512),[[ae.e8,_.system.alcometer_retry]]),pt])])]),(0,s._)("div",ht,[vt,(0,s._)("div",yt,[wt,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>_.system.camera_dimension=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.videoSizes,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,n.zw)(e),9,bt)))),128))],512),[[ae.bM,_.system.camera_dimension]])]),(0,s._)("div",gt,[ft,(0,s._)("label",kt,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=e=>_.system.camera_video=e)},null,512),[[ae.e8,_.system.camera_video]]),Ut])]),(0,s._)("div",It,[Ct,(0,s._)("label",St,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>_.system.camera_photo=e)},null,512),[[ae.e8,_.system.camera_photo]]),Dt])]),(0,s._)("div",xt,[qt,(0,s._)("label",Vt,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>_.system.driver_photo=e)},null,512),[[ae.e8,_.system.driver_photo]]),zt])])]),(0,s._)("div",Zt,[$t,(0,s._)("div",Lt,[Pt,(0,s._)("label",Nt,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=e=>_.system.printer_write=e)},null,512),[[ae.e8,_.system.printer_write]]),Mt])]),(0,s._)("div",Tt,[Ft,(0,s.wy)((0,s._)("input",{min:"1",class:"small",type:"number","onUpdate:modelValue":t[18]||(t[18]=e=>_.system.print_count=e)},null,512),[[ae.nr,_.system.print_count]])]),(0,s._)("div",Rt,[Xt,(0,s._)("label",jt,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=e=>_.system.print_qr_check=e)},null,512),[[ae.e8,_.system.print_qr_check]]),Et])])]),(0,s._)("div",Ht,[Yt,(0,s._)("div",Bt,[Qt,(0,s._)("label",At,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=e=>_.system.tonometer_skip=e)},null,512),[[ae.e8,_.system.tonometer_skip]]),Kt])]),(0,s._)("div",Ot,[Wt,(0,s._)("label",Gt,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=e=>_.system.tonometer_visible=e)},null,512),[[ae.e8,_.system.tonometer_visible]]),Jt])])]),(0,s._)("div",ea,[ta,(0,s._)("div",aa,[sa,(0,s._)("label",na,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[22]||(t[22]=e=>_.system.thermometer_skip=e)},null,512),[[ae.e8,_.system.thermometer_skip]]),ia])]),(0,s._)("div",la,[_a,(0,s._)("label",da,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=e=>_.system.thermometer_visible=e)},null,512),[[ae.e8,_.system.thermometer_visible]]),ca])])]),(0,s._)("div",oa,[(0,s._)("div",ra,[(0,s.Uk)(" Настройки API "),(0,s._)("div",{class:(0,n.C_)(["connection-status",{active:_.connection}])},[(0,s._)("span",null,(0,n.zw)(_.connection),1)],2)]),(0,s._)("div",ma,[ua,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[24]||(t[24]=e=>_.config.url=e)},null,512),[[ae.nr,_.config.url]])]),(0,s._)("div",pa,[ha,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>_.config.token=e)},null,512),[[ae.nr,_.config.token]])])]),(0,s._)("div",va,[(0,s._)("button",{onClick:t[26]||(t[26]=(...e)=>_.save&&_.save(...e)),class:"btn blue"},"Сохранить")])])}var wa=a(2227),ba={data(){return{toast:(0,G.pm)(),videoSizes:[]}},async mounted(){this.videoSizes=await(0,$.TQ)()},methods:{async save(){await(0,W.hR)(this.system),await(0,W.XP)(this.config.url,this.config.token),this.$store.state.point=await(0,wa.F8)(),this.toast.success("Настройки сохранены")}},computed:{system(){return this.$store.state.config?.system||{}},config(){return this.$store.state.config?.main||{}},connection(){return this.$store.state.connection||!1}}};const ga=(0,F.Z)(ba,[["render",ya]]);var fa=ga;const ka={class:"admin__logo"},Ua={class:"input-file"},Ia=(0,s._)("span",null,"Выберите файл",-1),Ca={key:0,class:"preview-image"},Sa=["src"];function Da(e,t,a,n,i,l){return(0,s.wg)(),(0,s.iD)("div",ka,[(0,s._)("label",Ua,[(0,s._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>l.onFileChange&&l.onFileChange(...e))},null,32),Ia]),l.logo?((0,s.wg)(),(0,s.iD)("div",Ca,[(0,s._)("img",{src:l.logo},null,8,Sa),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>l.deleteLogo&&l.deleteLogo(...e)),class:"btn small"},"Удалить")])):(0,s.kq)("",!0)])}var xa={data(){return{toast:(0,G.pm)()}},methods:{async onFileChange(e){const t=e.target.files[0],a=await this.getBase64(t);this.$store.state.config.main.logo=a,await(0,wa.Sx)(a),this.toast.success("Логотип успешно установлен")},getBase64(e){return new Promise(((t,a)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{t(s.result)},s.onerror=e=>{console.log("Error: ",e)}}))},async deleteLogo(){this.$store.state.config.main.logo="",await(0,wa.Sx)(""),this.toast.success("Логотип успешно удален")}},computed:{logo(){return this.$store.state.config?.main?.logo}}};const qa=(0,F.Z)(xa,[["render",Da]]);var Va=qa;const za={class:"stamp animate__animated animate__fadeInUp"},Za={class:"stamp__body"},$a={class:"template"},La=(0,s._)("div",{class:"template__header"},[(0,s._)("h2",null,"Предпросмотр печати")],-1),Pa={class:"template__content"},Na={class:"header"},Ma=(0,s._)("br",null,null,-1),Ta={class:"license"},Fa=(0,s._)("br",null,null,-1),Ra=(0,s._)("span",null,"Иванов Иван",-1),Xa=(0,s._)("br",null,null,-1),ja=(0,s._)("span",null,"прошел Предрейсовый/Предсменный",-1),Ea=(0,s._)("br",null,null,-1),Ha=(0,s._)("span",null,"медицинский осмотр",-1),Ya=(0,s._)("br",null,null,-1),Ba=(0,s._)("span",null,"к исполнению трудовых обязаностей ",-1),Qa=(0,s._)("br",null,null,-1),Aa=(0,s._)("span",null,"допущен",-1),Ka=(0,s._)("br",null,null,-1),Oa=(0,s._)("span",null,null,-1),Wa=(0,s._)("br",null,null,-1),Ga=(0,s._)("br",null,null,-1),Ja=(0,s._)("br",null,null,-1),es=(0,s._)("br",null,null,-1),ts=(0,s._)("br",null,null,-1),as={key:0,class:"animate__animated animate__fadeInUp d-7",style:{"margin-top":"15px",width:"100%"}},ss={class:"stampBox"},ns=(0,s._)("div",{class:"stampBox__header"},[(0,s._)("h2",null,"Выбор штампа")],-1),is={class:"stampBox__content"},ls=["onClick"],_s={class:"header"},ds=(0,s._)("br",null,null,-1),cs={class:"license"},os=(0,s._)("br",null,null,-1);function rs(e,t,a,i,l,_){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",za,[(0,s._)("div",Za,[(0,s._)("div",$a,[La,(0,s._)("div",Pa,[(0,s._)("span",Na,(0,n.zw)(_.isSelectedStamp?l.selectedStamp.stamp_head:'ООО "Трансавто-7"'),1),Ma,(0,s._)("span",Ta,(0,n.zw)(_.isSelectedStamp?l.selectedStamp.stamp_licence:""),1),Fa,Ra,Xa,ja,Ea,Ha,Ya,Ba,Qa,Aa,Ka,Oa,Wa,(0,s._)("span",null,(0,n.zw)(_.date),1),Ga,(0,s._)("span",null,(0,n.zw)(_.medic.name||""),1),Ja,(0,s._)("span",null,"ЭЦП "+(0,n.zw)(_.medic.eds||""),1),es,(0,s._)("span",null,(0,n.zw)(_.validity_period_eds),1),ts]),this.isSelectedStamp?((0,s.wg)(),(0,s.iD)("div",as,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>_.save&&_.save(...e)),class:"btn blue",style:{width:"100%"}},"Сохранить")])):(0,s.kq)("",!0)]),(0,s._)("div",ss,[ns,(0,s._)("div",is,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.stamps,(e=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["stampItem",{selected:_.stampEquals(e[0])}]),onClick:t=>_.selectStamp(e[0])},[(0,s._)("span",_s,(0,n.zw)(e[0].stamp_head),1),ds,(0,s._)("span",cs,(0,n.zw)(e[0].stamp_licence),1),os],10,ls)))),256))])])])])])}var ms={name:"Print",async mounted(){this.selectedStamp=await this.getStampFromLocalStorage(),this.stamps=await(0,wa.t2)()},data(){return{toast:(0,G.pm)(),stamps:[],selectedStamp:null}},methods:{async getStampFromLocalStorage(){return this.$store.state.config?.main?.selected_stamp??null},selectStamp(e){this.selectedStamp=e},setStampLocalStorage(e){this.$store.state.config.main.selected_stamp={stamp_head:e.stamp_head,stamp_licence:e.stamp_licence}},stampEquals(e){return null!==this.selectedStamp&&e.stamp_licence===this.selectedStamp.stamp_licence},async save(){this.isSelectedStamp?(await(0,wa.XN)(this.selectedStamp),this.setStampLocalStorage(this.selectedStamp),this.toast.success("Настройки сохранены")):this.toast.error("Штамп не выбран")},formatNumeric(e){return e<10?"0"+e:e}},computed:{isSelectedStamp(){return null!==this.selectedStamp},medic(){return this.$store.state.config?.main?.selected_medic||{}},date(){const e=new Date;return e.getFullYear()+"-"+this.formatNumeric(e.getMonth())+"-"+this.formatNumeric(e.getDay())+" "+this.formatNumeric(e.getHours())+":"+this.formatNumeric(e.getMinutes())+":"+this.formatNumeric(e.getSeconds())},validity_period_eds(){return this.medic.validity_eds_start&&this.medic.validity_eds_end?"Срок действия с "+this.medic.validity_eds_start+" по "+this.medic.validity_eds_end:""}}};const us=(0,F.Z)(ms,[["render",rs]]);var ps=us;const hs={class:"stamp animate__animated animate__fadeInUp"},vs={class:"stamp__body"},ys={class:"queue-to-send-box"},ws=(0,s._)("div",{class:"queue-to-send-box__header"},[(0,s._)("h2",null,"Очередь на отправку")],-1),bs={class:"queue-to-send-box__content"},gs={class:"header"},fs={class:""},ks={class:""},Us={class:"btn-control-group"},Is={class:"license btn opacity blue animate__animated animate__fadeInDown"},Cs={key:0},Ss=(0,s._)("i",{class:"ri-send-plane-fill"},null,-1),Ds={key:1},xs=(0,s._)("i",{class:"ri-reply-fill"},null,-1);function qs(e,t,a,i,l,_){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",hs,[(0,s._)("div",vs,[(0,s._)("div",ys,[ws,(0,s._)("div",bs,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.inspections,(e=>((0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["queue-item",{selected:!1}])},[(0,s._)("p",gs,(0,n.zw)(e.driver_fio),1),(0,s._)("p",fs,(0,n.zw)(e.driver_id),1),(0,s._)("p",ks,(0,n.zw)(e.created_at),1),(0,s._)("div",Us,[(0,s._)("button",Is,["UNSENT"===e.status_send?((0,s.wg)(),(0,s.iD)("span",Cs,[Ss,(0,s.Uk)(" Отправить ")])):((0,s.wg)(),(0,s.iD)("span",Ds,[xs,(0,s.Uk)(" Повторить ")]))])])])))),256))])])])])])}var Vs=a(4161);const zs=(0,G.pm)();async function Zs(){return await Vs.Z.get("api/inspection/local/").then((({data:e})=>e)).catch((e=>{zs.error("Ошибка получения списка осмотров. Подробности в консоли.."),console.log(e)}))}var $s={name:"QueueToSend",async mounted(){this.inspections=await Zs()},data(){return{toast:(0,G.pm)(),inspections:[]}},methods:{},computed:{}};const Ls=(0,F.Z)($s,[["render",qs]]);var Ps=Ls,Ns={components:{QueueToSend:Ps,Print:ps,Testing:X,Tonometer:te,Password:he,MainSettings:fa,Logo:Va},mounted(){(0,W.ri)()},data(){return{selected:"main"}}};const Ms=(0,F.Z)(Ns,[["render",_]]);var Ts=Ms}}]);
//# sourceMappingURL=806.6042dd4c.js.map