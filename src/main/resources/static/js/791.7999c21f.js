"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[791],{4575:function(t,n,e){e.d(n,{S:function(){return r},g:function(){return i}});var s=e(4161),a=e(1857);async function r(){return await s.Z.post("device/printer").then((({data:t})=>t)).catch(a.i)}async function i(t,n){return await s.Z.post("/device/printer/qr",{driver:t,type:n}).then((({data:t})=>t)).catch(a.i)}},7557:function(t,n,e){e.d(n,{Z:function(){return h}});var s=e(3396);const a={class:"number-buttons",ref:"numbers"},r=(0,s._)("i",{class:"ri-close-fill"},null,-1),i=[r],o=(0,s._)("i",{class:"ri-delete-back-line"},null,-1),u=[o];function c(t,n,e,r,o,c){return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("button",{class:"number-buttons__item",onClick:n[0]||(n[0]=t=>c.pushIntoNumber("1"))},"1"),(0,s._)("button",{class:"number-buttons__item",onClick:n[1]||(n[1]=t=>c.pushIntoNumber("2"))},"2"),(0,s._)("button",{class:"number-buttons__item",onClick:n[2]||(n[2]=t=>c.pushIntoNumber("3"))},"3"),(0,s._)("button",{class:"number-buttons__item",onClick:n[3]||(n[3]=t=>c.pushIntoNumber("4"))},"4"),(0,s._)("button",{class:"number-buttons__item",onClick:n[4]||(n[4]=t=>c.pushIntoNumber("5"))},"5"),(0,s._)("button",{class:"number-buttons__item",onClick:n[5]||(n[5]=t=>c.pushIntoNumber("6"))},"6"),(0,s._)("button",{class:"number-buttons__item",onClick:n[6]||(n[6]=t=>c.pushIntoNumber("7"))},"7"),(0,s._)("button",{class:"number-buttons__item",onClick:n[7]||(n[7]=t=>c.pushIntoNumber("8"))},"8"),(0,s._)("button",{class:"number-buttons__item",onClick:n[8]||(n[8]=t=>c.pushIntoNumber("9"))},"9"),(0,s._)("button",{class:"number-buttons__item",onClick:n[9]||(n[9]=t=>c.clearPassword())},i),(0,s._)("button",{class:"number-buttons__item",onClick:n[10]||(n[10]=t=>c.pushIntoNumber("0"))},"0"),(0,s._)("button",{class:"number-buttons__item",onClick:n[11]||(n[11]=t=>c.popIntoNumber())},u)],512)}var d={name:"InputNumber",methods:{pushIntoNumber(t){this.$emit("pushIntoNumber",t)},popIntoNumber(){this.$emit("popIntoNumber")},clearPassword(){this.$emit("clearNumber")}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((t,n)=>{t.classList.add("animate__animated"),t.classList.add("animate__fadeInUp"),t.style.setProperty("animation-delay",.6+.05*n+"s")}))}},l=e(89);const m=(0,l.Z)(d,[["render",c]]);var h=m},9775:function(t,n,e){e.d(n,{Z:function(){return c}});var s=e(3396);function a(t,n,e,a,r,i){const o=(0,s.up)("input-number");return(0,s.wg)(),(0,s.j4)(o,{onPushIntoNumber:n[0]||(n[0]=t=>i.pushCharIntoPassword(t)),onPopIntoNumber:n[1]||(n[1]=()=>i.extractLastCharIntoPassword()),onClearNumber:n[2]||(n[2]=()=>i.clearPassword())})}var r=e(7557),i={name:"InputPersonalNumberForm",components:{InputNumber:r.Z},data(){return{password:""}},methods:{pushCharIntoPassword(t){this.password+=t},extractLastCharIntoPassword(){this.password=this.password.slice(0,-1)},clearPassword(){this.password=""},emitPass(){this.$emit("password",this.password)}},watch:{password:function(){this.emitPass()}}},o=e(89);const u=(0,o.Z)(i,[["render",a]]);var c=u},5511:function(t,n,e){e.d(n,{Z:function(){return d}});var s=e(3396);const a={key:0,class:"admin__loading animate__animated animate__fadeInUp",style:{"z-index":"3"}},r=(0,s._)("div",{class:"lds-ring"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div"),(0,s._)("div")],-1);function i(t,n,e,i,o,u){return e.loading?((0,s.wg)(),(0,s.iD)("div",a,[r,(0,s.Uk)(" Загрузка ")])):(0,s.kq)("",!0)}var o={props:{loading:{type:Boolean,default:!1}}},u=e(89);const c=(0,u.Z)(o,[["render",i]]);var d=c},8246:function(t,n,e){e.r(n),e.d(n,{default:function(){return R}});var s=e(3396);function a(t,n,e,a,r,i){const o=(0,s.up)("print-qr-login"),u=(0,s.up)("select-qr");return(0,s.wg)(),(0,s.iD)(s.HY,null,[this.visibleNumPad?((0,s.wg)(),(0,s.j4)(o,{key:0,type:this.selectTab,onSuccessAuth:n[0]||(n[0]=t=>i.print(t))},null,8,["type"])):(0,s.kq)("",!0),this.visibleNumPad?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(u,{key:1,onSelect:n[1]||(n[1]=t=>i.setTab(t))}))],64)}e(7658);var r=e(5511),i=e(4677),o=e(4575),u=e(7139),c=e(9242);const d={class:"home"},l={class:"driver-form"},m={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},h={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},_={class:"driver-form__input"},p={key:3,class:"driver-form__not-found animate__animated animate__fadeInUp"};function b(t,n,e,a,r,i){const o=(0,s.up)("input-personal-number-form");return(0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",l,[i.hasInstance?((0,s.wg)(),(0,s.iD)("div",m,(0,u.zw)(i.title),1)):((0,s.wg)(),(0,s.iD)("div",h," Введите ваш идентификатор ")),(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":n[0]||(n[0]=t=>r.hash_id=t)},null,512),[[c.nr,r.hash_id]])]),(0,s.Wm)(o,{onPassword:n[1]||(n[1]=t=>i.updateHashId(t))}),i.hasInstance?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:n[2]||(n[2]=(...t)=>i.start&&i.start(...t)),class:"btn animate__animated animate__fadeInUp"}," Печать ")):(0,s.kq)("",!0),r.error?((0,s.wg)(),(0,s.iD)("div",p,(0,u.zw)(r.error),1)):(0,s.kq)("",!0)])])}var v=e(9775),f=e(6509),w={name:"PrintQrNumPad",components:{InputPersonalNumberForm:v.Z},props:{type:String},data(){return{hash_id:"",instance:null,error:"",toast:(0,i.pm)(),loading:!1}},methods:{async start(){this.$emit("success-auth",this.instance.hash_id)},updateHashId(t){this.hash_id=t},async checkInstance(){if(this.error=null,this.instance=null,!(this.hash_id.length<6)){this.loading=!0;try{let t=null;switch(this.type){case"driverId":t=await(0,f.L$)(this.hash_id);break;case"carId":t=await(0,f.KO)(this.hash_id);break;default:return}t?(this.instance=t,this.error=null):this.error=("123"===this.instance?"Водитель":"Автомобиль")+" не найден"}catch(t){this.error=t.response?.data?.message||"Неизвестная ошибка"}this.loading=!1}}},watch:{hash_id:function(){this.checkInstance()}},computed:{title(){switch(this.type){case"driverId":return this.instance.fio;case"carId":return this.instance.gos_number;default:return}},hasInstance(){return null!==this.instance}}},I=e(89);const g=(0,I.Z)(w,[["render",b]]);var k=g,N=e.p+"img/busQR.710d820e.svg",y=e.p+"img/driverQR.3492d7a3.svg";const P={class:"print-selection"},C=(0,s._)("img",{width:"300",src:N},null,-1),Z=(0,s._)("label",{style:{"margin-top":"15px"}},"QR инспекции автомобиля",-1),D=[C,Z],$={class:"tab"},q=(0,s._)("label",{style:{"margin-top":"15px"}},"QR осмотра водителя",-1);function L(t,n,e,a,r,i){return(0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("div",{class:"tab animate__animated animate__fadeInUp d-1",onClick:n[0]||(n[0]=t=>i.selectBus())},D),(0,s._)("div",$,[(0,s._)("img",{width:"300",src:y,onClick:n[1]||(n[1]=t=>i.selectDriver())}),q])])}var Q={methods:{selectBus(){this.$emit("select","carId")},selectDriver(){this.$emit("select","driverId")}}};const T=(0,I.Z)(Q,[["render",L]]);var U=T,S={components:{SelectQr:U,PrintQrLogin:k,Loader:r.Z},data(){return{toast:(0,i.pm)(),loading:!1,visibleNumPad:!1,selectTab:""}},methods:{print(t){(0,o.g)(t,this.selectTab),this.toast.success("Задание на печать отправлено"),setTimeout((()=>{this.$router.push("/")}),5e3)},setTab(t){this.showNumPad(),this.selectTab=t},showNumPad(){this.visibleNumPad=!0}},computed:{login(){return null!==this.driver}}};const x=(0,I.Z)(S,[["render",a]]);var R=x}}]);
//# sourceMappingURL=791.7999c21f.js.map