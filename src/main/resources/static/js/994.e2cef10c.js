"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[994],{4951:function(e,t,n){n.d(t,{J:function(){return r},V:function(){return u}});var s=n(7625),o=n(1076),a=n(1857),i=n(4677);(0,i.pm)();async function r(e){return await o.Z.post(`employees/inspection/${e}`).then((({data:e})=>e))}async function u(e=s.Z.state.inspection){return await o.Z.post("employees/inspection/save",e).then((({data:e})=>e)).catch(a.i)}},7557:function(e,t,n){n.d(t,{Z:function(){return p}});var s=n(3396);const o={class:"number-buttons",ref:"numbers"},a=(0,s._)("i",{class:"ri-close-fill"},null,-1),i=[a],r=(0,s._)("i",{class:"ri-delete-back-line"},null,-1),u=[r];function m(e,t,n,a,r,m){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("button",{class:"number-buttons__item",onClick:t[0]||(t[0]=e=>m.pushIntoNumber("1"))},"1"),(0,s._)("button",{class:"number-buttons__item",onClick:t[1]||(t[1]=e=>m.pushIntoNumber("2"))},"2"),(0,s._)("button",{class:"number-buttons__item",onClick:t[2]||(t[2]=e=>m.pushIntoNumber("3"))},"3"),(0,s._)("button",{class:"number-buttons__item",onClick:t[3]||(t[3]=e=>m.pushIntoNumber("4"))},"4"),(0,s._)("button",{class:"number-buttons__item",onClick:t[4]||(t[4]=e=>m.pushIntoNumber("5"))},"5"),(0,s._)("button",{class:"number-buttons__item",onClick:t[5]||(t[5]=e=>m.pushIntoNumber("6"))},"6"),(0,s._)("button",{class:"number-buttons__item",onClick:t[6]||(t[6]=e=>m.pushIntoNumber("7"))},"7"),(0,s._)("button",{class:"number-buttons__item",onClick:t[7]||(t[7]=e=>m.pushIntoNumber("8"))},"8"),(0,s._)("button",{class:"number-buttons__item",onClick:t[8]||(t[8]=e=>m.pushIntoNumber("9"))},"9"),(0,s._)("button",{class:"number-buttons__item",onClick:t[9]||(t[9]=e=>m.clearPassword())},i),(0,s._)("button",{class:"number-buttons__item",onClick:t[10]||(t[10]=e=>m.pushIntoNumber("0"))},"0"),(0,s._)("button",{class:"number-buttons__item",onClick:t[11]||(t[11]=e=>m.popIntoNumber())},u)],512)}var l={name:"InputNumber",methods:{pushIntoNumber(e){this.$emit("pushIntoNumber",e)},popIntoNumber(){this.$emit("popIntoNumber")},clearPassword(){this.$emit("clearNumber")}},mounted(){this.$refs.numbers.querySelectorAll("button").forEach(((e,t)=>{e.classList.add("animate__animated"),e.classList.add("animate__fadeInUp"),e.style.setProperty("animation-delay",.6+.05*t+"s")}))}},c=n(89);const _=(0,c.Z)(l,[["render",m]]);var p=_},9775:function(e,t,n){n.d(t,{Z:function(){return m}});var s=n(3396);function o(e,t,n,o,a,i){const r=(0,s.up)("input-number");return(0,s.wg)(),(0,s.j4)(r,{onPushIntoNumber:t[0]||(t[0]=e=>i.pushCharIntoPassword(e)),onPopIntoNumber:t[1]||(t[1]=()=>i.extractLastCharIntoPassword()),onClearNumber:t[2]||(t[2]=()=>i.clearPassword())})}var a=n(7557),i={name:"InputPersonalNumberForm",components:{InputNumber:a.Z},data(){return{password:""}},methods:{pushCharIntoPassword(e){this.password+=e},extractLastCharIntoPassword(){this.password=this.password.slice(0,-1)},clearPassword(){this.password=""},emitPass(){this.$emit("password",this.password)}},watch:{password:function(){this.emitPass()}}},r=n(89);const u=(0,r.Z)(i,[["render",o]]);var m=u},5994:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var s=n(3396);function o(e,t,n,o,a,i){const r=(0,s.up)("employee-login");return(0,s.wg)(),(0,s.j4)(r)}var a=n(4677),i=n(7139),r=n(9242);const u={class:"home"},m={class:"driver-form"},l={key:0,class:"driver-form__title animate__animated animate__fadeInDown d-2"},c={key:1,class:"driver-form__title animate__animated animate__fadeInDown d-2"},_={class:"driver-form__input"},p={key:2,class:"driver-form__not-found animate__animated animate__fadeInUp"};function d(e,t,n,o,a,d){const b=(0,s.up)("input-personal-number-form");return(0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",m,[d.login?((0,s.wg)(),(0,s.iD)("div",l,(0,i.zw)(a.employee.fio),1)):((0,s.wg)(),(0,s.iD)("div",c," Введите ваш идентификатор ")),(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{type:"number",class:"animate__animated animate__fadeIn d-5","onUpdate:modelValue":t[0]||(t[0]=e=>a.employee_id=e),onInput:t[1]||(t[1]=(...e)=>d.checkEmployee&&d.checkEmployee(...e))},null,544),[[r.nr,a.employee_id]])]),(0,s.Wm)(b,{onPassword:t[2]||(t[2]=e=>d.updateEmployeeId(e))}),(0,s._)("div",null,[d.canOpen?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[3]||(t[3]=e=>d.start("open")),class:"btn animate__animated animate__fadeInUp mr-2"}," начать смену ")):(0,s.kq)("",!0),d.canClose?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:t[4]||(t[4]=e=>d.start("close")),class:"btn animate__animated animate__fadeInUp"}," закончить смену ")):(0,s.kq)("",!0)]),a.error?((0,s.wg)(),(0,s.iD)("div",p,(0,i.zw)(a.error),1)):(0,s.kq)("",!0)])])}n(7658);var b=n(9775),h=n(4951),y={components:{InputPersonalNumberForm:b.Z},data(){return{employee_id:"",employee:null,error:"",toast:(0,a.pm)(),loading:!1}},methods:{start(e){this.$store.state.inspection.person_id=this.employee.hash_id,this.$store.state.inspection.person_fio=this.employee.fio,this.$store.state.inspection.type="employee",this.$store.state.inspection.type_anketa=e,this.$router.push({name:"step-driver"})},updateEmployeeId(e){this.employee_id=e,this.checkEmployee()},async checkEmployee(){if(this.error=null,!(this.employee_id.length<6)){this.loading=!0;try{const e=await(0,h.J)(this.employee_id);e?(this.employee=e,this.error=null):this.error="Сотрудник не найден"}catch(e){this.error=e.response?.data?.message||"Неизвестная ошибка"}this.loading=!1}}},computed:{login(){return this.employee},canOpen(){return this.employee?.inspection_types.includes("open")},canClose(){return this.employee?.inspection_types.includes("close")}}},f=n(89);const w=(0,f.Z)(y,[["render",d]]);var v=w;const I={class:"last-inspection"},k={class:"step-1__outer"},C={class:"step-1"},N={class:"step-1__item"},g=(0,s._)("div",{class:"step-1__label animate__animated animate__fadeInDown"}," Ваш идентификатор ",-1),P={class:"step-1__id animate__animated animate__fadeInDown d-1"},D=(0,s._)("div",{class:"step-1__item"},[(0,s._)("div",{class:"step-1__label animate__animated animate__fadeInDown d-2"}," Ваше полное имя "),(0,s._)("div",{class:"step-1__name animate__animated animate__fadeInDown d-3"}," Ivanov Ivan Ivanovich ")],-1),$={class:"step-buttons"};function Z(e,t,n,o,a,r){return(0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("div",k,[(0,s._)("div",C,[(0,s._)("div",N,[g,(0,s._)("div",P,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)("112345",(e=>(0,s._)("span",{key:e},(0,i.zw)(e),1))),64))])]),D]),(0,s._)("div",$,[(0,s._)("button",{onClick:t[0]||(t[0]=t=>e.$router.push({name:"home"})),class:"btn opacity blue"},"Назад"),(0,s._)("button",{onClick:t[1]||(t[1]=t=>e.$router.push({name:"step-photo"})),class:"btn"},"Продолжить")])])])}var E={data(){return{}},methods:{},watch:{},computed:{}};const L=(0,f.Z)(E,[["render",Z]]);var U=L,q={components:{EmployeeLogin:v,EmployeeIndex:U},data(){return{employee:null,toast:(0,a.pm)()}},methods:{},computed:{login(){return null!==this.employee}}};const x=(0,f.Z)(q,[["render",o]]);var z=x}}]);
//# sourceMappingURL=994.e2cef10c.js.map