(function(){"use strict";var e={6700:function(e,t,n){n.d(t,{_:function(){return a},p:function(){return r}});var o=n(7625),i=n(4677);const s=(0,i.pm)();async function r(){return await axios.post("device/alcometer").then((({data:e})=>e)).catch(c)}async function a(){return await axios.post("device/alcometer/close").then((({data:e})=>e)).catch(c)}function c(e){const t=e.response?.data;if(t?.message)s.error(t.message);else if(e.response)switch(e?.response?.status){case 400:s.error("Ошибка авторизации запроса");case 500:s.error("Ошибка сервера");default:s.error("Неизвестная ошибка запроса")}else o.Z.$state.loseConnect=!0;console.log(e)}},6509:function(e,t,n){n.d(t,{F8:function(){return d},Jw:function(){return m},L$:function(){return a},Ni:function(){return f},S1:function(){return c},Sx:function(){return v},_u:function(){return l},oP:function(){return h},oX:function(){return p},rd:function(){return u},sl:function(){return b},xv:function(){return _}});var o=n(7625),i=n(1076),s=n(4677);const r=(0,s.pm)();async function a(e){return await i.Z.post(`inspection/${e}`).then((({data:e})=>e))}async function c(e,t){return await i.Z.post("api/photo",{driver_id:e,photo:t}).then((({data:e})=>e))}async function u(){return await i.Z.post("api/photo/stop").then((({data:e})=>e))}async function l(e=o.Z.state.inspection){return o.Z.state.config?.main?.selected_medic?.id&&(e.user_id=o.Z.state.config.main.selected_medic.id),await i.Z.post("inspection/save",e).then((({data:e})=>(console.log(e),e))).catch(g)}async function m(){return await i.Z.post("inspection/print").then((({data:e})=>e)).catch(g)}async function p(e){return await i.Z.post("api/check",{address:e}).then((({data:e})=>e)).catch((e=>{e.response||(o.Z.$state.loseConnect=!0)}))}async function d(){return await i.Z.get("api/pv").then((({data:e})=>e)).catch((e=>{console.log(e)}))}async function f(){let e=await i.Z.get("api/verification").then((({data:e})=>e)).catch((e=>{console.log(e)})),t=e.date_check??"",n=e.serial_number??"";return{dateInspection:t,serialNumberTerminal:n}}async function h(){return await i.Z.get("api/medics").then((({data:e})=>e)).catch((e=>{console.log(e)}))}async function _(){i.Z.post("exit").then((({data:e})=>{})).catch((e=>{console.log(e)})),window.location.reload()}async function v(e){return await i.Z.post("api/logo",{logo:e}).then((({data:e})=>e)).catch((e=>{console.log(e)}))}async function b(e){return await i.Z.post("api/medic",e).then((({data:e})=>e)).catch((e=>{console.log(e)}))}function g(e){const t=e.response?.data;if(t?.message)r.error(t.message);else if(e.response)switch(e?.response?.status){case 400:r.error("Ошибка авторизации запроса");default:r.error("Неизвестная ошибка запроса")}else o.Z.$state.loseConnect=!0;console.log(e)}},4457:function(e,t,n){n.d(t,{Tc:function(){return l},XP:function(){return u},hR:function(){return c},ri:function(){return r},vW:function(){return a}});var o=n(7625),i=n(1076),s=n(6509);async function r(){await i.Z.post("/setting/load").then((({data:e})=>{o.Z.state.config=e,e?.system?.cursor&&document.documentElement.classList.remove("disable-mouse")})).catch((e=>{console.log(e)})),o.Z.state.point=await(0,s.F8)(),o.Z.state.verification=await(0,s.Ni)()}async function a(e){await i.Z.post("/setting/password",{password:e}).catch((e=>{console.log(e)}))}async function c(e){await i.Z.post("/setting/system",e).catch((e=>{console.log(e)}))}async function u(e,t){await i.Z.post("/setting/api",{address:e,token:t}).catch((e=>{console.log(e)}))}async function l(e){await i.Z.post("/setting/tonometer",{address:e}).catch((e=>{console.log(e)}))}},3348:function(e,t,n){n(7658);var o=n(9242),i=n(3396),s=n(7139);const r={class:"footer"},a={class:"footer__point-version"},c=(0,i._)("span",null,"Версия: 2.5.9",-1),u={class:"footer__serial-number_date-notification"},l={class:"date-notification"},m={class:"serial-number"};function p(e,t,n,p,d,f){const h=(0,i.up)("navigation"),_=(0,i.up)("error-modal"),v=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(h),(0,i.Wm)(_),(0,i.Wm)(o.uT,{name:"fade"},{default:(0,i.w5)((()=>[(0,i.Wm)(v)])),_:1}),(0,i._)("div",r,[(0,i._)("div",a,[(0,i.Uk)((0,s.zw)(f.point||"Незвестный пункт выпуска")+" ",1),c])]),(0,i._)("div",u,[(0,i._)("div",null,[(0,i._)("span",l,(0,s.zw)(f.dateVerification||""),1)]),(0,i._)("span",m,(0,s.zw)(f.serialNumber?"S/N "+f.serialNumber:""),1)])],64)}var d=n.p+"img/logo.957d00d6.png";const f={class:"nav"},h={class:"nav__logo animate__animated animate__fadeInDown"},_=["src"],v={key:1,src:d,alt:""},b={key:0,class:"nav__info animate__animated animate__fadeInDown"},g={key:1,class:"nav__buttons"},w={key:2,class:"nav__buttons"},y=(0,i._)("i",{class:"ri-cursor-fill"},null,-1),k=[y],Z=(0,i._)("i",{class:"ri-fullscreen-line"},null,-1),N=[Z],C={key:3,class:"nav__buttons"},x=(0,i._)("i",{class:"ri-tools-fill"},null,-1),q=[x],D={key:0,class:"step-progress animate__animated animate__fadeInDown"},F=(0,i._)("i",{class:"ri-check-fill"},null,-1),E=[F],S=(0,i._)("i",{class:"ri-check-fill"},null,-1),O=[S],$=(0,i._)("i",{class:"ri-check-fill"},null,-1),I=[$],R=(0,i._)("i",{class:"ri-check-fill"},null,-1),T=[R],j=(0,i._)("i",{class:"ri-check-fill"},null,-1),z=[j],P=(0,i._)("i",{class:"ri-check-fill"},null,-1),J=[P],L=(0,i._)("i",{class:"ri-check-fill"},null,-1),M=[L],A=(0,i._)("i",{class:"ri-check-fill"},null,-1),U=[A],W=(0,i._)("i",{class:"ri-check-fill"},null,-1),V=[W];function X(e,t,n,o,r,a){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",f,[(0,i._)("div",h,[a.logo?((0,i.wg)(),(0,i.iD)("img",{key:0,src:a.logo,alt:""},null,8,_)):((0,i.wg)(),(0,i.iD)("img",v))]),a.currentRouter.includes("/step/")?((0,i.wg)(),(0,i.iD)("div",b,[(0,i.Uk)((0,s.zw)(a.inspection.driver_fio)+" ",1),(0,i._)("span",null,(0,s.zw)(a.inspection.driver_id),1)])):(0,i.kq)("",!0),["/help","/login"].includes(a.currentRouter)||a.currentRouter.includes("/step/")?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/")),class:"btn opacity blue animate__animated animate__fadeInDown d-1"},"В начало")])):a.currentRouter.includes("/admin")?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("button",{onClick:t[1]||(t[1]=e=>a.requestVisibleMouse()),class:"btn icon animate__animated animate__fadeInDown d-1",style:{padding:"5px"}},k),(0,i._)("button",{onClick:t[2]||(t[2]=e=>a.requestFullScreen()),class:"btn icon animate__animated animate__fadeInDown d-1",style:{padding:"5px"}},N),(0,i._)("button",{onClick:t[3]||(t[3]=e=>a.logout()),class:"btn opacity blue animate__animated animate__fadeInDown d-2"},"Выйти")])):((0,i.wg)(),(0,i.iD)("div",C,[(0,i._)("button",{onClick:t[4]||(t[4]=t=>e.$store.state.selectingMedic=!0),class:"btn opacity animate__animated animate__fadeInDown"},"Мед работник"),(0,i._)("button",{onClick:t[5]||(t[5]=t=>e.$router.push("/help")),class:"btn opacity animate__animated animate__fadeInDown d-2"},"Помощь"),(0,i._)("button",{onClick:t[6]||(t[6]=t=>e.$router.push("/login")),class:"btn icon animate__animated animate__fadeInDown d-3"},q)]))]),a.currentRouter.includes("/step/")?((0,i.wg)(),(0,i.iD)("div",D,[JSON.parse(a.system.driver_info)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=1}])},E,2)):(0,i.kq)("",!0),JSON.parse(a.system.type_ride)?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=2}])},O,2)):(0,i.kq)("",!0),JSON.parse(a.system.type_ride)?((0,i.wg)(),(0,i.iD)("div",{key:2,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=3}])},I,2)):(0,i.kq)("",!0),JSON.parse(a.system.tonometer_visible)?((0,i.wg)(),(0,i.iD)("div",{key:3,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=4}])},T,2)):(0,i.kq)("",!0),JSON.parse(a.system.thermometer_visible)?((0,i.wg)(),(0,i.iD)("div",{key:4,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=5}])},z,2)):(0,i.kq)("",!0),JSON.parse(a.system.alcometer_visible)?((0,i.wg)(),(0,i.iD)("div",{key:5,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=6}])},J,2)):(0,i.kq)("",!0),JSON.parse(a.system.question_sleep)?((0,i.wg)(),(0,i.iD)("div",{key:6,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=7}])},M,2)):(0,i.kq)("",!0),JSON.parse(a.system.question_helth)?((0,i.wg)(),(0,i.iD)("div",{key:7,class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=8}])},U,2)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,s.C_)(["step-progress__item",{active:a.pageNumber>=9}])},V,2)])):(0,i.kq)("",!0)],64)}var B=n(6509),H={data(){return{}},methods:{close:B.xv,requestVisibleMouse(){document.documentElement.classList.contains("disable-mouse")?(document.documentElement.classList.remove("disable-mouse"),this.system.cursor=!0):(document.documentElement.classList.add("disable-mouse"),this.system.cursor=!1)},requestFullScreen(){const e=document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement,t=document.documentElement;e?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},computed:{currentRouter(){return this.$route.path},pageNumber(){return console.log(this.$route.meta?.number),this.$route.meta?.number||0},logout(){this.$store.state.admin=!1,this.$router.push("/")},system(){return this.$store.state.config?.system||{}},inspection(){return this.$store.state.inspection},logo(){return this.$store.state.config?.main?.logo}}},Y=n(89);const G=(0,Y.Z)(H,[["render",X]]);var K=G;const Q={key:0,class:"alert-container"},ee=(0,i._)("div",{class:"alert"},[(0,i._)("h2",null,"Потеряна связь"),(0,i.Uk)(" Пожалуйста, перезапустите СДПО ")],-1),te=[ee];function ne(e,t,n,o,s,r){return r.loseConnect?((0,i.wg)(),(0,i.iD)("div",Q,te)):(0,i.kq)("",!0)}var oe={data(){},computed:{loseConnect(){return this.$store.state.loseConnect}}};const ie=(0,Y.Z)(oe,[["render",ne]]);var se=ie,re={name:"App",components:{Navigation:K,ErrorModal:se},computed:{point(){return this.$store.state.point},dateVerification(){return this.$store.state.verification.dateInspection},serialNumber(){return this.$store.state.verification.serialNumberTerminal}}};const ae=(0,Y.Z)(re,[["render",p]]);var ce=ae,ue=n(7625),le=n(1076),me=n(2483);const pe=[{path:"",name:"home",component:()=>n.e(341).then(n.bind(n,6341))},{path:"/help",component:()=>n.e(988).then(n.bind(n,6988))},{path:"/login",component:()=>n.e(820).then(n.bind(n,5820))},{path:"/admin",component:()=>n.e(467).then(n.bind(n,7467))},{path:"/step/driver",component:()=>n.e(450).then(n.bind(n,4450)),name:"step-driver",meta:{visible:"driver_info",next:"step-photo",prev:"home",number:1}},{path:"/step/photo",component:()=>n.e(165).then(n.bind(n,6165)),name:"step-photo",meta:{visible:"driver_photo",next:"step-ride",prev:"step-driver",number:2}},{path:"/step/ride",component:()=>n.e(906).then(n.bind(n,906)),name:"step-ride",meta:{visible:"type_ride",next:"step-tonometer",prev:"step-driver",number:3}},{path:"/step/tonometer",component:()=>n.e(453).then(n.bind(n,1453)),name:"step-tonometer",meta:{visible:"tonometer_visible",next:"step-thermometer",prev:"step-ride",number:4}},{path:"/step/thermometer",component:()=>n.e(394).then(n.bind(n,572)),name:"step-thermometer",meta:{visible:"thermometer_visible",next:"step-alcometer",prev:"step-thermometer",number:5}},{path:"/step/alcometer",component:()=>n.e(83).then(n.bind(n,5564)),name:"step-alcometer",meta:{visible:"alcometer_visible",next:"step-sleep",prev:"step-alcometer",number:6}},{path:"/step/sleep",component:()=>n.e(176).then(n.bind(n,176)),name:"step-sleep",meta:{visible:"question_sleep",next:"step-helth",prev:"step-alcometer",number:7}},{path:"/step/helth",component:()=>n.e(508).then(n.bind(n,4508)),name:"step-helth",meta:{visible:"question_helth",next:"step-result",prev:"step-sleep",number:8}},{path:"/step/result",component:()=>n.e(42).then(n.bind(n,3042)),name:"step-result",meta:{next:"home",prev:"step-result",number:9}}];var de=n(4677),fe=(n(343),n(4457)),he=n(6700);le.Z.defaults.baseURL="http://localhost:8080/",window.axios=le.Z,(0,fe.ri)();const _e=(0,me.p7)({history:(0,me.PO)(),routes:pe,mode:"history",scrollBehavior(e,t,n){return n||{top:0,left:0}}});_e.beforeEach(((e,t,n)=>{if("step-alcometer"===t.name&&(0,he._)(),e.path.includes("/step/")){if(!ue.Z.state.inspection?.driver_id)return _e.push({name:"home"});if(e.meta?.visible&&ue.Z.state.config?.system&&!JSON.parse(ue.Z.state.config.system[e.meta.visible]))return t.meta?.number>e.meta.number?_e.push({name:e.meta.prev}):_e.push({name:e.meta.next})}return e.path.includes("/admin/")&&!ue.Z.state.admin?_e.push({name:"home"}):("home"===e.name&&(ue.Z.state.inspection={}),n())})),setInterval((async()=>{ue.Z.state.config?.main?.url&&(ue.Z.state.connection=await(0,B.oX)(ue.Z.state.config.main.url))}),2e3),(0,o.ri)(ce).use(ue.Z).use(de.ZP,{position:"top-center",timeout:2500}).use(_e).mount("#app")},7625:function(e,t,n){n(1703);var o=n(65),i=n(4677);const s=(0,i.pm)(),r=(0,o.MT)({state(){return{inspection:{},driver:{},config:{},admin:!1,connection:!1,point:"",verification:{serialNumberTerminal:"",dateInspection:""},selectingMedic:!1,loseConnect:!1}},getters:{url:e=>{if(e.config?.main?.url)return e.config.main.url;throw s.error("Ошибка конфигурации. URL адрес не указан."),new Error("Error configuration API url")}}});t["Z"]=r}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,s){if(!o){var r=1/0;for(l=0;l<e.length;l++){o=e[l][0],i=e[l][1],s=e[l][2];for(var a=!0,c=0;c<o.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(a=!1,s<r&&(r=s));if(a){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[o,i,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{42:"e2d16f80",83:"8e047445",165:"658ea353",176:"0c1c4a49",341:"35bbad6b",394:"7de42d87",450:"dfb2cbb3",453:"61bd4555",467:"3bae83a3",508:"1aac74f2",820:"e73568fe",906:"1223f042",988:"67a97181"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="sdpo-frontend:";n.l=function(o,i,s,r){if(e[o])e[o].push(i);else{var a,c;if(void 0!==s)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var m=u[l];if(m.getAttribute("src")==o||m.getAttribute("data-webpack")==t+s){a=m;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=o),e[o]=[i];var p=function(t,n){a.onerror=a.onload=null,clearTimeout(d);var i=e[o];if(delete e[o],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={143:0};n.f.j=function(t,o){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)o.push(i[2]);else{var s=new Promise((function(n,o){i=e[t]=[n,o]}));o.push(i[2]=s);var r=n.p+n.u(t),a=new Error,c=function(o){if(n.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var s=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,i[1](a)}};n.l(r,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,s,r=o[0],a=o[1],c=o[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)var l=c(n)}for(t&&t(o);u<r.length;u++)s=r[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},o=self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3348)}));o=n.O(o)})();
//# sourceMappingURL=app.a64e6ed2.js.map