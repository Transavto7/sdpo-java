"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[104],{8791:function(e,t,a){a.d(t,{Eq:function(){return i},SX:function(){return r}});var s=a.p+"media/alert.1cca9e8e.ogg",n=a(7625);function i(){new Audio(s).play()}async function r(){await o();let e=5;n.Z.state.waitRecordMedia=!0,n.Z.state.timerRecordMedia=setInterval((()=>{e--,console.log("осталось "+e),e<1&&o()}),1e3)}async function o(){n.Z.state.waitRecordMedia&&(n.Z.state.waitRecordMedia=!1,await clearInterval(n.Z.state.timerRecordMedia))}},1387:function(e,t,a){a.d(t,{Z:function(){return m}});var s=a(3396),n=a(7139);const i={key:1,class:"approval animate__animated animate__fadeInRight"},r=(0,s._)("div",{class:"not-identify__title"},[(0,s._)("h3",null,"Не идентифицирован")],-1),o={class:"approval__content"},l={class:"not-identify__content"};function d(e,t,a,d,c,_){return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.visible?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>_.closeModal&&_.closeModal(...e)),class:"medics__overlay animate__animated animate__fadeIn"})):(0,s.kq)("",!0),a.visible?((0,s.wg)(),(0,s.iD)("div",i,[r,(0,s._)("div",o,[(0,s._)("div",l,(0,n.zw)(this.messageContent),1),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>_.accept&&_.accept(...e)),class:"btn approval__button-submit animate__animated animate__fadeInUp"},"В начало осмотра ")])])):(0,s.kq)("",!0)],64)}var c=a(8791),_={props:{visible:{type:Boolean,require:!0},messageContent:{type:String,require:!0,default:""}},methods:{closeModal(){this.$emit("close-modal")},accept(){this.closeModal(),this.$emit("accept")}},watch:{visible:function(e){e&&(0,c.Eq)()}}},u=a(89);const p=(0,u.Z)(_,[["render",d]]);var m=p},5511:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(3396);const n={key:0,class:"admin__loading animate__animated animate__fadeInUp",style:{"z-index":"3"}},i=(0,s._)("div",{class:"lds-ring"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div"),(0,s._)("div")],-1);function r(e,t,a,r,o,l){return a.loading?((0,s.wg)(),(0,s.iD)("div",n,[i,(0,s.Uk)(" Загрузка ")])):(0,s.kq)("",!0)}var o={props:{loading:{type:Boolean,default:!1}}},l=a(89);const d=(0,l.Z)(o,[["render",r]]);var c=d},5473:function(e,t,a){a.r(t),a.d(t,{default:function(){return ee}});a(7658);var s=a(3396),n=a(7139),i=a.p+"img/like.f974bf18.svg",r=a.p+"img/madam-t7-say.6033cebf.svg",o=a.p+"img/madam-t7.ac16778d.svg";const l={style:{display:"flex"}},d={key:0,class:"step-result"},c={style:{"text-align":"center"}},_={class:"step-result__header_with_result animate__animated animate__fadeInDown"},u={class:"step-result__text animate__animated animate__fadeInUp"},p=(0,s._)("br",null,null,-1),m={class:"step-result__cards"},h={key:0,class:"step-result__card animate__animated animate__fadeInUp d-1"},y=(0,s._)("span",null,"Давление",-1),g={key:1,class:"step-result__card animate__animated animate__fadeInUp d-2"},k=(0,s._)("span",null,"Пульс",-1),v={key:2,class:"step-result__card animate__animated animate__fadeInUp d-2"},w=(0,s._)("span",null,"Количество промилле",-1),f={key:3,class:"step-result__card animate__animated animate__fadeInUp d-2"},b=(0,s._)("span",null,"Температура тела",-1),R={key:4,class:"step-result__card animate__animated animate__fadeInUp d-2"},U=(0,s._)("span",null,"Сонливость",-1),I={key:5,class:"step-result__card animate__animated animate__fadeInUp d-2"},P=(0,s._)("span",null,"Самочувствие",-1),q={class:"step-result__footer"},D={class:"feedback-after-inspection"},C={key:0},M=(0,s._)("span",{class:"header"},[(0,s.Uk)("Спасибо за оценку! "),(0,s._)("br"),(0,s.Uk)(" Ваше мнение важно для нас!")],-1),S=[M],T={key:1},O=(0,s._)("span",{class:"header"},"Как прошел осмотр?",-1),Z={class:"like-box"},$=(0,s._)("img",{src:i},null,-1),z=[$],x=(0,s._)("img",{src:i},null,-1),F=[x],Q={class:"step-result__buttons"},W={key:1,class:"madam-t7 animate__fadeInUpBig"},A={class:"madam-t7-text-box animate__animated animate__fadeInUp"},H={class:"wish"},B={class:"animate__fadeInUp"},E=(0,s._)("img",{width:"300",src:r},null,-1),G=(0,s._)("img",{width:"300",height:"500",src:o},null,-1);function Y(e,t,a,i,r,o){const M=(0,s.up)("loader"),$=(0,s.up)("result-repeat");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(M,{loading:r.loading,"onUpdate:loading":t[0]||(t[0]=e=>r.loading=e)},null,8,["loading"]),(0,s.Wm)($,{visible:o.showRetryModal,"onUpdate:visible":t[1]||(t[1]=e=>o.showRetryModal=e),"message-content":o.getComment,"onUpdate:messageContent":t[2]||(t[2]=e=>o.getComment=e),onAccept:t[3]||(t[3]=e=>o.redirectRepeat())},null,8,["visible","message-content"]),(0,s._)("div",l,[r.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",c,[(0,s._)("h3",_,[(0,s.Uk)("Результаты осмотра: "),(0,s._)("span",u,[(0,s.Uk)((0,n.zw)(r.result.admitted||"ожидание ответа"),1),p])]),(0,s._)("div",m,[o.system.tonometer_visible&&o.inspection.hasOwnProperty("tonometer")?((0,s.wg)(),(0,s.iD)("div",h,[y,(0,s.Uk)(" "+(0,n.zw)(o.inspection.hasOwnProperty("tonometer")?o.inspection.tonometer:"Неизвестно"),1)])):(0,s.kq)("",!0),o.system.tonometer_visible&&o.inspection.hasOwnProperty("pulse")?((0,s.wg)(),(0,s.iD)("div",g,[k,(0,s.Uk)(" "+(0,n.zw)(o.inspection.hasOwnProperty("pulse")?o.inspection.pulse:"Неизвестно"),1)])):(0,s.kq)("",!0),o.system.alcometer_visible&&o.inspection.hasOwnProperty("alcometer_result")?((0,s.wg)(),(0,s.iD)("div",v,[w,(0,s.Uk)(" "+(0,n.zw)(o.inspection.hasOwnProperty("alcometer_result")?o.inspection.alcometer_result+" ‰":"Неизвестно"),1)])):(0,s.kq)("",!0),o.system.thermometer_visible&&o.inspection.hasOwnProperty("t_people")?((0,s.wg)(),(0,s.iD)("div",f,[b,(0,s.Uk)(" "+(0,n.zw)(o.inspection.hasOwnProperty("t_people")?o.inspection.t_people+" °C":"Неизвестно"),1)])):(0,s.kq)("",!0),o.system.question_sleep&&o.inspection.hasOwnProperty("sleep_status")?((0,s.wg)(),(0,s.iD)("div",R,[U,(0,s.Uk)(" "+(0,n.zw)(o.inspection.hasOwnProperty("sleep_status")?o.getSleepStatus(o.inspection.sleep_status):"Неизвестно"),1)])):(0,s.kq)("",!0),o.system.question_helth&&o.inspection.hasOwnProperty("people_status")?((0,s.wg)(),(0,s.iD)("div",I,[P,(0,s.Uk)(" "+(0,n.zw)(o.inspection.hasOwnProperty("people_status")?o.getPeopleStatus(o.inspection.people_status):"Неизвестно"),1)])):(0,s.kq)("",!0)])]),(0,s._)("div",q,[(0,s._)("div",D,[o.hasReaction?((0,s.wg)(),(0,s.iD)("div",C,S)):((0,s.wg)(),(0,s.iD)("div",T,[O,(0,s._)("div",Z,[(0,s._)("span",{class:"like bad",onClick:t[4]||(t[4]=e=>o.saveFeedback("negative"))},z),(0,s._)("span",{class:"like awesome",onClick:t[5]||(t[5]=e=>o.saveFeedback("positive"))},F)])]))]),(0,s._)("div",Q,[(0,s._)("button",{onClick:t[6]||(t[6]=t=>e.$router.push("/")),class:"btn blue animate__animated animate__fadeInUp"},"В начало"),this.admitted&&this.canRetryPrint?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[7]||(t[7]=e=>o.replayPrint()),class:"btn opacity animate__animated animate__fadeInUp"},"Повтор печати ")):(0,s.kq)("",!0),o.connection&&this.admitted&&this.canRetryPrintQR?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:t[8]||(t[8]=e=>o.replayPrintQr()),class:"btn opacity animate__animated animate__fadeInUp"},"Повтор печати QR ")):(0,s.kq)("",!0)])])])),r.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",W,[(0,s._)("div",A,[(0,s._)("div",H,[(0,s._)("span",B,(0,n.zw)(o.drawReaction),1)]),E]),G]))])],64)}var J=a(2227),L=a(1387),X=a(5511),j=a(4457),K={components:{Loader:X.Z,ResultRepeat:L.Z},data(){return{backTimeout:null,result:{},conclusion:{admitted:"",comments:""},notIdentified:"Не идентифицирован",loading:!1,feedback:null,phrase:""}},async mounted(){this.$data.loading=!0,await this.getWishMessage();let e=this,t=async function(){e.$store.state.waitRecordMedia?setTimeout(t,1e3):(e.loading=!1,await e.save(),e.autoStart&&(e.backTimeout=e.setTimeoutAndRedirect()))};setTimeout(t,1e3)},unmounted(){clearTimeout(this.backTimeout)},methods:{sendFeedbackToServer(){this.hasResult&&null!==this.feedback&&(0,J.EW)(this.feedback,this.result.id)},saveFeedback(e){this.feedback=e},getSleepStatus(e){return"Да"===e?"Выспались":"Не выспались"},getPeopleStatus(e){return"Да"===e?"Хорошее":"Плохое"},async getWishMessage(){this.phrase=(await(0,J.MR)()).wish_message??null},async save(){this.result=await(0,J._u)(),this.conclusion.admitted=this.result.admitted??"",this.conclusion.comments=this.result.comments??""},async replayPrint(){await(0,J.Jw)()},async replayPrintQr(){await(0,J.Cg)()},redirectHome(){"step-result"===this.$route.name&&this.$router.push("/")},redirectRepeat(){"step-result"===this.$route.name&&this.$router.push({name:"step-retry"})},setTimeoutAndRedirect(){return this.result.admitted===this.notIdentified?setTimeout(this.redirectRepeat,this.system.delay_before_retry_inspection):setTimeout(this.redirectHome,this.system.delay_before_redirect_to_main_page)}},watch:{feedback:function(e){this.sendFeedbackToServer()},result:function(e){this.sendFeedbackToServer()}},computed:{autoStart(){return this.system.auto_start},admitted(){return"Допущен"===this.result?.admitted},showRetryModal(){return this.result.admitted===this.notIdentified},getComment(){return this.result.comments??""},hasResult(){return void 0!==this.result.admitted},inspection(){return this.$store.state.inspection},system(){return this.$store.state.config?.system||{}},drawReaction(){return this.hasReaction?this.phrase||"Хорошего дня!":"Пожалуйста, оцените осмотр"},hasReaction(){return null!==this.feedback},hasPhrase(){return console.log(null!==this.phrase),null!==this.phrase},canRetryPrint(){return(0,j.Gw)("printer_write")},canRetryPrintQR(){return(0,j.Gw)("print_qr_check")},connection(){return this.$store.state.connection||!1}}},N=a(89);const V=(0,N.Z)(K,[["render",Y]]);var ee=V}}]);
//# sourceMappingURL=104.04a011f1.js.map