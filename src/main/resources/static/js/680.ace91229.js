"use strict";(self["webpackChunksdpo_frontend"]=self["webpackChunksdpo_frontend"]||[]).push([[680],{8791:function(e,t,a){a.d(t,{E:function(){return i},S:function(){return o}});var n=a.p+"media/alert.1cca9e8e.ogg",s=a(7625);function i(){new Audio(n).play()}function o(){let e=15;s.Z.state.waitRecordMedia=!0;let t=setInterval((()=>{e--,console.log("осталось "+e),e<1&&(s.Z.state.waitRecordMedia=!1,clearInterval(t))}),1e3)}},5511:function(e,t,a){a.d(t,{Z:function(){return _}});var n=a(3396);const s={key:0,class:"admin__loading animate__animated animate__fadeInUp",style:{"z-index":"3"}},i=(0,n._)("div",{class:"lds-ring"},[(0,n._)("div"),(0,n._)("div"),(0,n._)("div"),(0,n._)("div")],-1);function o(e,t,a,o,l,r){return a.loading?((0,n.wg)(),(0,n.iD)("div",s,[i,(0,n.Uk)(" Загрузка ")])):(0,n.kq)("",!0)}var l={props:{loading:{type:Boolean,default:!1}}},r=a(89);const d=(0,r.Z)(l,[["render",o]]);var _=d},4163:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});a(7658);var n=a(3396),s=a(7139);const i={key:0,class:"step-result"},o=(0,n._)("h3",{class:"animate__animated animate__fadeInDown"},"Результаты осмотра",-1),l={class:"step-result__cards"},r={key:0,class:"step-result__card animate__animated animate__fadeInUp d-1"},d=(0,n._)("span",null,"Давление",-1),_={key:1,class:"step-result__card animate__animated animate__fadeInUp d-2"},c=(0,n._)("span",null,"Пульс",-1),u={key:2,class:"step-result__card animate__animated animate__fadeInUp d-2"},m=(0,n._)("span",null,"Количество промилле",-1),p={key:3,class:"step-result__card animate__animated animate__fadeInUp d-2"},h=(0,n._)("span",null,"Температура тела",-1),v={key:4,class:"step-result__card animate__animated animate__fadeInUp d-2"},y=(0,n._)("span",null,"Сонливость",-1),g={key:5,class:"step-result__card animate__animated animate__fadeInUp d-2"},f=(0,n._)("span",null,"Самочувствие",-1),k={class:"step-result__footer"},w={class:"step-result__text animate__animated animate__fadeInUp"},b=(0,n._)("br",null,null,-1),U={key:0,class:"animate__animated animate__fadeInUp"},I={class:"step-result__buttons"};function q(e,t,a,q,D,R){const C=(0,n.up)("loader"),$=(0,n.up)("result-repeat");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(C,{loading:D.loading,"onUpdate:loading":t[0]||(t[0]=e=>D.loading=e)},null,8,["loading"]),(0,n.Wm)($,{visible:R.showRetryModal,"onUpdate:visible":t[1]||(t[1]=e=>R.showRetryModal=e),"message-content":R.getComment,"onUpdate:messageContent":t[2]||(t[2]=e=>R.getComment=e),onAccept:t[3]||(t[3]=e=>R.redirectRepeat())},null,8,["visible","message-content"]),D.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",i,[o,(0,n._)("div",l,[R.system.tonometer_visible?((0,n.wg)(),(0,n.iD)("div",r,[d,(0,n.Uk)(" "+(0,s.zw)(R.inspection.hasOwnProperty("tonometer")?R.inspection.tonometer:"Неизвестно"),1)])):(0,n.kq)("",!0),R.system.tonometer_visible?((0,n.wg)(),(0,n.iD)("div",_,[c,(0,n.Uk)(" "+(0,s.zw)(R.inspection.hasOwnProperty("pulse")?R.inspection.pulse:"Неизвестно"),1)])):(0,n.kq)("",!0),R.system.alcometer_visible?((0,n.wg)(),(0,n.iD)("div",u,[m,(0,n.Uk)(" "+(0,s.zw)(R.inspection.hasOwnProperty("alcometer_result")?R.inspection.alcometer_result+" ‰":"Неизвестно"),1)])):(0,n.kq)("",!0),R.system.thermometer_visible?((0,n.wg)(),(0,n.iD)("div",p,[h,(0,n.Uk)(" "+(0,s.zw)(R.inspection.hasOwnProperty("t_people")?R.inspection.t_people+" °C":"Неизвестно"),1)])):(0,n.kq)("",!0),R.system.question_sleep?((0,n.wg)(),(0,n.iD)("div",v,[y,(0,n.Uk)(" "+(0,s.zw)(R.inspection.hasOwnProperty("sleep_status")?R.getSleepStatus(R.inspection.sleep_status):"Неизвестно"),1)])):(0,n.kq)("",!0),R.system.question_helth?((0,n.wg)(),(0,n.iD)("div",g,[f,(0,n.Uk)(" "+(0,s.zw)(R.inspection.hasOwnProperty("people_status")?R.getPeopleStatus(R.inspection.people_status):"Неизвестно"),1)])):(0,n.kq)("",!0)]),(0,n._)("div",k,[(0,n._)("span",w,[(0,n.Uk)((0,s.zw)(D.result.admitted||"ожидание ответа"),1),b,"Допущен"===D.result.admitted?((0,n.wg)(),(0,n.iD)("p",U," Счастливого пути! ")):(0,n.kq)("",!0)]),(0,n._)("div",I,[(0,n._)("button",{onClick:t[4]||(t[4]=t=>e.$router.push("/")),class:"btn blue animate__animated animate__fadeInUp"},"В начало"),"Допущен"===D.result?.admitted?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:t[5]||(t[5]=e=>R.replayPrint()),class:"btn opacity animate__animated animate__fadeInUp"},"Повтор печати ")):(0,n.kq)("",!0)])])]))],64)}var D=a(6509);const R={key:1,class:"approval animate__animated animate__fadeInRight"},C=(0,n._)("div",{class:"not-identify__title"},[(0,n._)("h3",null,"Не идентифицирован")],-1),$={class:"approval__content"},M={class:"not-identify__content"};function P(e,t,a,i,o,l){return(0,n.wg)(),(0,n.iD)(n.HY,null,[a.visible?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"medics__overlay animate__animated animate__fadeIn"})):(0,n.kq)("",!0),a.visible?((0,n.wg)(),(0,n.iD)("div",R,[C,(0,n._)("div",$,[(0,n._)("div",M,(0,s.zw)(this.messageContent),1),(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>l.accept&&l.accept(...e)),class:"btn approval__button-submit animate__animated animate__fadeInUp"},"В начало осмотра ")])])):(0,n.kq)("",!0)],64)}var S=a(8791),T={props:{visible:{type:Boolean,require:!0},messageContent:{type:String,require:!0,default:""}},methods:{closeModal(){this.$emit("close-modal")},accept(){this.closeModal(),this.$emit("accept")}},watch:{visible:function(e){e&&(0,S.E)()}}},z=a(89);const Z=(0,z.Z)(T,[["render",P]]);var O=Z,A=a(5511),H={components:{Loader:A.Z,ResultRepeat:O},data(){return{backTimeout:null,result:{},conclusion:{admitted:"",comments:""},notIdentified:"Не идентифицирован",loading:!1}},async mounted(){this.$data.loading=!0;let e=this,t=async function(){e.$store.state.waitRecordMedia?setTimeout(t,1e3):(e.loading=!1,await e.save(),e.autoStart&&(e.backTimeout=e.setTimeoutAndRedirect()))};setTimeout(t,1e3)},unmounted(){clearTimeout(this.backTimeout)},methods:{getSleepStatus(e){return"Да"===e?"Выспались":"Не выспались"},getPeopleStatus(e){return"Да"===e?"Хорошее":"Плохое"},async save(){this.result=await(0,D._u)(),this.conclusion.admitted=this.result.admitted??"",this.conclusion.comments=this.result.comments??""},async replayPrint(){await(0,D.Jw)()},redirectHome(){"step-result"===this.$route.name&&this.$router.push("/")},redirectRepeat(){"step-result"===this.$route.name&&this.$router.push({name:"step-retry"})},setTimeoutAndRedirect(){return this.result.admitted===this.notIdentified?setTimeout(this.redirectRepeat,this.system.delay_before_retry_inspection):setTimeout(this.redirectHome,5e3)}},computed:{autoStart(){return this.system.auto_start},showRetryModal(){return this.result.admitted===this.notIdentified},getComment(){return this.result.comments??""},inspection(){return this.$store.state.inspection},system(){return this.$store.state.config?.system||{}}}};const x=(0,z.Z)(H,[["render",q]]);var B=x}}]);
//# sourceMappingURL=680.ace91229.js.map